
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Génesis &#8212; La pandemia por la ventana</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/eyes.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="canonical" href="https://pandemiaventana.github.io/pandemiaventana/page/2_programacion/1_thisistheway.html" />
    <link rel="shortcut icon" href="../../_static/0_favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Aprendizaje" href="2_thisistheway.html" />
    <link rel="prev" title="Programación 👨‍💻" href="0_programacion.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      <img src="../../_static/1_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">La pandemia por la ventana</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../0_intro/0_introduccion.html">
   Bienvenido 📉
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../1_experiencia/0_experiencia.html">
   Experiencia 💭
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_experiencia/1_experiencia.html">
     El saber sin saber
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_experiencia/2_experiencia.html">
     Del desorden a el orden
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="0_programacion.html">
   Programación 👨‍💻
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Génesis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_thisistheway.html">
     Aprendizaje
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="3_thisistheway.html">
     Salida
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../3_reconocimiento/0_reconocimiento.html">
   Reconocimiento 🌊
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../3_reconocimiento/1_reconocimiento.html">
     Instituciones públicas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../3_reconocimiento/2_reconocimiento.html">
     Instituciones privadas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../3_reconocimiento/3_reconocimiento.html">
     Prensa
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../4_legado/0_legado.html">
   Legado 🔀
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_legado/1_legado.html">
     Lo nuevo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_legado/2_legado.html">
     Lo que aún vive
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../5_reportes/0_reportes.html">
   Reportes 😷
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_reportes/1_reportes.html">
     Reporte diario
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_reportes/2_reportes.html">
     Balance de vacunas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_reportes/3_reportes.html">
     Indicador de fase
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../6_bibliografia/0_bibliografia.html">
   Bibliografía 📰
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Realizado con <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/page/2_programacion/1_thisistheway.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/pandemiaventana/pandemiaventana"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/pandemiaventana/pandemiaventana/issues/new?title=Issue%20on%20page%20%2Fpage/2_programacion/1_thisistheway.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/pandemiaventana/pandemiaventana/edit/main/page/2_programacion/1_thisistheway.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/pandemiaventana/pandemiaventana/main?urlpath=tree/page/2_programacion/1_thisistheway.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importando-paquetes">
   Importando paquetes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#obtencion-de-datos">
   Obtención de datos
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#micitec">
     MICITEC
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sochimi">
     SOCHIMI
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analisis-y-manipulacion-de-datos">
   Análisis y manipulación de datos
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#arreglo">
     Arreglo
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#que-es-la-manipulacion-de-datos">
     ¿Qué es la manipulación de datos?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datos-calculados">
     Datos calculados
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#positividad-diaria-pcr">
       Positividad diaria PCR
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#positividad-media-movil-semanal">
       Positividad media móvil semanal
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tasa-de-crecimiento-semanal">
       Tasa de crecimiento semanal
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#mortalidad-especifica-por-cien-mil-habitantes">
       Mortalidad específica por cien mil habitantes
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#uci-diaria-aproximada">
       UCI diaria aproximada
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tasa-de-casos-nuevos-por-cien-mil-habitantes">
       Tasa de casos nuevos por cien mil habitantes
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dias-por-fase-del-plan-paso-a-paso">
       Días por fase del plan Paso a Paso
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#limpieza-de-datos">
     Limpieza de datos
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tratamiento">
       Tratamiento
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#manipulando-ahora-si">
     Manipulando (
     <em>
      ahora sí
     </em>
     )
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#uniendo-en-una-sola-tabla">
   Uniendo en una sola tabla
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#por-que-unificar-los-datos">
     ¿Por qué unificar los datos?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exportando-informacion">
   Exportando información
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#archivos-json">
     Archivos .JSON
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#archivos-csv">
     Archivos .CSV
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#infografias-generadas">
     Infografías generadas
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#como-realizabas-las-infografias-antes-de-automatizar-el-proceso">
       ¿Cómo realizabas las infografías antes de automatizar el proceso?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#por-que-no-automatizaste-el-proceso-de-subida-a-instagram">
       ¿Por qué no automatizaste el proceso de subida a Instagram?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cuantas-infografias-generaste">
       ¿Cuántas infografías generaste?
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#csv">
     CSV
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reporte-diario">
     Reporte diario
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#balance-de-vacunas">
     Balance de vacunas
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#indicador-de-fase">
     Indicador de fase
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#graficando">
   Graficando
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id8">
     Reporte diario
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id9">
     Balance de vacunas
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id10">
     Indicador de fase
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generando-reportes">
   Generando reportes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id13">
     Reporte diario
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id14">
     Balance de vacunas
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id15">
     Indicador de fase
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#resultado">
   Resultado
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id16">
     Reporte diario
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#balance-vacunas">
     Balance vacunas
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id17">
     Indicador de fase
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ejemplos">
   Ejemplos
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ejemplo-1">
     Ejemplo (1)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ejemplo-2">
     Ejemplo (2)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aclaraciones">
   Aclaraciones
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#con-relacion-a-conceptos-del-ministerio-de-salud">
     Con relación a conceptos del Ministerio de Salud
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#casos-activos-confirmados">
       Casos activos confirmados
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#casos-confirmados-acumulados">
       Casos confirmados acumulados
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#definiciones">
       Definiciones
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#requerimientos">
   Requerimientos
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#informacion-de-sesion">
   Información de sesión
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bibliografia-de-esta-pagina">
   Bibliografía de esta página
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="genesis">
<h1>Génesis<a class="headerlink" href="#genesis" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<div class="figure align-default" id="markdown-fig">
<a class="reference internal image-reference" href="../../_images/2_cover.png"><img alt="../../_images/2_cover.png" src="../../_images/2_cover.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-number">Fig. 12 </span><span class="caption-text"><strong>Ilustración realizada por Bernardo Dinamarca</strong>.</span><a class="headerlink" href="#markdown-fig" title="Permalink to this image">¶</a></p>
</div>
<p>¡Hola! Comenzar, en primer lugar, con que el presente notebook es la mejora del primero que realicé. La primera versión del código era repetitiva y por tanto, poco eficiente. Me digne a mejorarla y este fue el resultado (aún no me convence, pero es trabajo honesto).</p>
<p>Esta versión está hecha con un poco más de conocimiento, aunque cabe recalcar, no soy un maestro de la programación, y estoy bastante distante de serlo. Me considero un sobreviviente, y un constante aprendiz.</p>
<p>Por otro lado, en algunas partes del texto se obvia la acentuación puesto que, en LATEX y especialmente, a la hora de manejar variables, no se utiliza codificación de carácteres UTF-16.</p>
<div class="section" id="importando-paquetes">
<h2>Importando paquetes<a class="headerlink" href="#importando-paquetes" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>En Python, tenemos la posibilidad de importar librerías, que en estricto rigor, es código ya escrito por otras personas. Por tanto, simplifica nuestra tarea, y es perfectamente común trabajar con ellas. En este caso, utilizaremos las siguientes librerías:</p>
<ul class="simple">
<li><p>Pandas (librería por especialidad de manipulación de datos). Permite leer y trabajar con distintos tipos de archivos.</p></li>
</ul>
<div class="figure align-default" id="id1">
<a class="reference internal image-reference" href="https://www.adictosaltrabajo.com/wp-content/uploads/2020/12/1200px-Pandas_logo.svg_.png"><img alt="https://www.adictosaltrabajo.com/wp-content/uploads/2020/12/1200px-Pandas_logo.svg_.png" src="https://www.adictosaltrabajo.com/wp-content/uploads/2020/12/1200px-Pandas_logo.svg_.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-number">Fig. 13 </span><span class="caption-text"><strong>Logo de la librería <a href="https://pandas.pydata.org/">Pandas</a></strong>.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<ul class="simple">
<li><p>Numpy (librería de álgebra que trabaja en conjunto con Pandas).</p></li>
</ul>
<div class="figure align-default" id="id2">
<a class="reference internal image-reference" href="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/NumPy_logo_2020.svg/1280px-NumPy_logo_2020.svg.png"><img alt="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/NumPy_logo_2020.svg/1280px-NumPy_logo_2020.svg.png" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/NumPy_logo_2020.svg/1280px-NumPy_logo_2020.svg.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-number">Fig. 14 </span><span class="caption-text"><strong>Logo de la librería <a href="https://numpy.org/">Numpy</a></strong>.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<ul class="simple">
<li><p>Y otras varias de Python base.</p></li>
</ul>
<p>En el siguiente bloque de código (1), importaremos las librerías necesarias.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importando paquetes</span>

<span class="c1">### Librería de manipulación de datos </span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">chained_assignment</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># default=&#39;warn&#39;</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>

<span class="c1">### Librería de álgebra</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1">### Librerías para graficar</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mpimg</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>

<span class="c1">### Customizamos para tener fondos transparentes con alta resolución</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.dpi&#39;</span><span class="p">]</span><span class="o">=</span> <span class="mi">300</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;savefig&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s2">&quot;figure.facecolor&quot;</span><span class="p">:</span>  <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
    <span class="s2">&quot;axes.facecolor&quot;</span><span class="p">:</span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
    <span class="s2">&quot;savefig.facecolor&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="p">})</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes.spines&#39;</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;bottom&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">})</span>

<span class="c1">### Para formato local</span>
<span class="kn">import</span> <span class="nn">locale</span>
<span class="c1">### Según Windows o Ubuntu</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1">### Windows</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;esp&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="c1">### Ubuntu (action)</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;es_CL.UTF-8&#39;</span><span class="p">)</span>

<span class="c1">### Otros paquetes</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span> <span class="k">as</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">IPython.display</span> <span class="k">as</span> <span class="nn">display</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span><span class="p">,</span> <span class="n">ImageFont</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>

<span class="c1">### Solo de uso esporádico</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">import</span> <span class="nn">pkg_resources</span>
<span class="kn">import</span> <span class="nn">types</span>

<span class="c1">### Gracias a joelostblom (https://gitlab.com/joelostblom/session_info)</span>
<span class="kn">import</span> <span class="nn">session_info</span>

<span class="c1">### Pybtex</span>
<span class="kn">import</span> <span class="nn">pybtex.plugin</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="obtencion-de-datos">
<h2>Obtención de datos<a class="headerlink" href="#obtencion-de-datos" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<div class="section" id="micitec">
<h3>MICITEC<a class="headerlink" href="#micitec" title="Permalink to this headline">¶</a></h3>
<p>En función de que, los datos están ampliamente organizados y trabajados por el <a href="https://github.com/MinCiencia/Datos-COVID19">Ministerio de Ciencia, Tecnología, Conocimiento e Innovación (<strong>MICITEC</strong>) en su GitHub</a> <span id="id3">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id3">MinisteriodCienciaTeInnovacion21</a>]</span>, procedemos a leer los archivos .CSV en el siguiente bloque de código. <a class="footnote-reference brackets" href="#id5" id="id4">1</a></p>
<ul class="simple">
<li><p>Los archivos .CSV refieren a “comma separated values”, que en español significa “archivos separados por coma”, y si bien, parecieran tener una estructura desorganizada, en verdad tienen un orden por columna y fila, delimitando cada elemento por una coma. En Data Science son ampliamente utilizados, aunque, en secuencias de datos más amplias (y con mayor peso) se suele utilizar el lenguaje de consulta SQL, dado que la librería Pandas, en un archivo .CSV, debe leer uno y cada uno de los datos, por lo que a medida escala el número de datos, el proceso de lectura de un .CSV se torna ineficiente.</p></li>
<li><p>Para ejemplo práctico, leer bloque de código (<a class="reference external" href="#ejemplo1">Ejemplo 1</a>).</p></li>
</ul>
<p>Sin embargo, al tratar con datos diarios que no han sido registrados por más de dos años, ni con un gran número de variables, no existe ningún inconveniente al trabajar con los archivos separados por coma.</p>
</div>
<div class="section" id="sochimi">
<h3>SOCHIMI<a class="headerlink" href="#sochimi" title="Permalink to this headline">¶</a></h3>
<p>Los datos de la encuesta nacional de la Sociedad Chilena de Medicina Intensiva (SOCHIMI), del producto 48 (csv48), no los consideramos puesto que estos no serán actualizados a futuro.</p>
<p>A continuación (2), haremos un procedimiento similar, pero desde archivos .CSV con mayor número de columnas y brindando como argumento el enlace donde se encuentra el archivo en GitHub.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obteniendo datos desde Min. de Ciencia y Tecnología</span>

<span class="c1">### csv13 (casos acumulativos), producto 13</span>
<span class="n">csv13</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto13/CasosNuevosCumulativo_T.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv3 (casos por detalle), producto 3</span>
<span class="n">csv3_detalle</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/TotalesPorRegion.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv14 (fallecidos cumulativos), producto 14</span>
<span class="n">csv14</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto14/FallecidosCumulativo_T.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv3 (casos cumulativos), producto 3</span>
<span class="n">csv3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto3/CasosTotalesCumulativo_T.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv7 (pcr cumulativos), producto 7</span>
<span class="n">csv7</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto7/PCR_T.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv36 (residencias sanitarias), producto 36</span>
<span class="n">csv36</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto36/ResidenciasSanitarias.csv&#39;</span><span class="p">)</span>

<span class="c1">### 2.1. csv48 (sochimi), producto 48</span>
<span class="c1">#csv48 = pd.read_csv(&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto48/SOCHIMI.csv&#39;)</span>

<span class="c1">### csv54 (r regional), producto 54</span>
<span class="n">csv54_regional</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto54/r.regional.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv54 (r provincial), producto 54</span>
<span class="n">csv54_provincial</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto54/r.provincial.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv8 (camas uci diarias), producto 8</span>
<span class="n">csv8</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto8/UCI_T.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv58 (camas uci por detalle), producto 58</span>
<span class="n">csv58</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto58/Camas_UCI_diarias.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv76 (vacunación), producto 76</span>
<span class="n">csv76</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto76/vacunacion.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv81 (población por edad), producto 81</span>
<span class="n">csv81_poblacionedad</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto81/poblacion_comuna_edad.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv81 (vacunación por edad 1° dosis), producto 81</span>
<span class="n">csv81_edad1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto81/vacunacion_comuna_edad_1eraDosis.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv81 (vacunación por edad 2° dosis), producto 81</span>
<span class="n">csv81_edad2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto81/vacunacion_comuna_edad_2daDosis.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv87 (antígenos por región)</span>
<span class="n">csv87</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto87/Ag.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv19 (casos activos por comuna), producto 19</span>
<span class="n">csv19</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto19/CasosActivosPorComuna_T.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv1 (casos confirmados comuna)</span>
<span class="n">csv1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto1/Covid-19_T.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv74 (paso a paso histórico)</span>
<span class="n">csv74</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto74/paso_a_paso.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv82 (movilidad en la semana y el fin de semana)</span>
<span class="n">csv82_semana</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto82/ISCI_weeks.csv&#39;</span><span class="p">)</span>
<span class="n">csv82_finsemana</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto82/ISCI_weekends.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv65 (positividad por comuna)</span>
<span class="n">csv65</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto65/PositividadPorComuna.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv66 (cobertura por comuna)</span>
<span class="n">csv66</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto66/CoberturaPorComuna.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv67 (oportunidad en la notificación)</span>
<span class="n">csv67</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto67/OportunidadPorComuna.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv63 (notificación por comuna)</span>
<span class="n">csv63</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto63/NNotificacionPorComuna.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv64 (BAC por comuna)</span>
<span class="n">csv64</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto64/BACPorComuna.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv38 (casos fallecidos por comuna, no procesados por DEIS)</span>
<span class="n">csv38</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto38/CasosFallecidosPorComuna.csv&#39;</span><span class="p">)</span>

<span class="c1">### csv61 (casos fallecidos por comuna, procesados por DEIS)</span>
<span class="n">csv61</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto61/serie_fallecidos_comuna.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="analisis-y-manipulacion-de-datos">
<h2>Análisis y manipulación de datos<a class="headerlink" href="#analisis-y-manipulacion-de-datos" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>Antes de proceder con el trabajo con los datos, se debe realizar un pequeño análisis, recorriendo aquellas variables que nos sean útiles. Este análisis ya está previamente hecho, dado que, nos basaremos en la disposición de datos del reporte diario del Ministerio de Salud, sumando otros que pueden ser calculados con las librerías de Python a través de operaciones vectoriales sobre las columnas.</p>
<p>Sin embargo, tenemos un inconveniente. Públicamente, en los informes diarios del Ministerio de Salud, no se especificaban casos activos y recuperados. Por dicha razón, con fecha anterior al 21 de junio y 29 del mismo mes, del año 2020, no están disponibles las curvas históricas para casos activos y recuperados, respectivamente, en los archivos del GitHub del MICITEC.</p>
<div class="section" id="arreglo">
<h3>Arreglo<a class="headerlink" href="#arreglo" title="Permalink to this headline">¶</a></h3>
<p>Para suplir esa falta de datos, los añadiremos de forma manual, los cuales fueron registrados por el Dr. Cristóbal Corral en su seguimiento de la pandemia en Tarapacá. Éstos, fueron estimados de acuerdo a la metodología del Ministerio de Salud en ese entonces.</p>
<p>Los datos a añadir, contemplan hasta el 20 de junio del 2020 en los activos, y hasta el 28 de junio del mismo año para los casos recuperados. Posterior a esas fechas, se realizó el cambio de metodología y se empezó a proporcionar las cifras en los reportes diarios. De hecho, los saltos en las gráficas de casos activos y recuperados se explican por los cambios de metodología.</p>
</div>
<div class="section" id="que-es-la-manipulacion-de-datos">
<h3>¿Qué es la manipulación de datos?<a class="headerlink" href="#que-es-la-manipulacion-de-datos" title="Permalink to this headline">¶</a></h3>
<p>Por otro lado, suena extraño “manipular datos”, ¿cierto? La significancia es más simple de lo que parece. Cuando trabajamos con datos, estos suelen venir en formatos no apropiados. En tales casos, una columna que cuantifica debe tener números (int o float) y no palabras (str), del contrario, tendremos inconvenientes a la hora de realizar gráficos. Un ejemplo se puede apreciar a continuación, donde nos interesa la columna de la Región de Tarapacá (y no otras), y también, que las columnas contengan exclusivamente números. Entonces… ¿Por qué alguien pondría una fila de strings (variables de texto) entre medio de columnas con variables numéricas? La función es que podamos identificar a qué región de Chile pertenecen los datos (de otra forma, no podríamos saberlo), pero una vez ya las identificamos, ¡no las necesitamos! Y será necesario limpiar o quitar la fila (en este caso, la fila <b style="color:red">’Región’</b>).</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Fecha</p></th>
<th class="head"><p>Casos nuevos</p></th>
<th class="head"><p><b style="color:red">Casos nuevos</b></p></th>
<th class="head"><p><b style="color:red">…</b></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><b style="color:red">Región</b></p></td>
<td><p><b style="color:red">Tarapacá</b></p></td>
<td><p><b style="color:red">Antofagasta</b></p></td>
<td><p><b style="color:red">…</b></p></td>
</tr>
<tr class="row-odd"><td><p>06-05-2021</p></td>
<td><p>115</p></td>
<td><p><b style="color:red">144</b></p></td>
<td><p><b style="color:red">…</b></p></td>
</tr>
<tr class="row-even"><td><p>05-05-2021</p></td>
<td><p>101</p></td>
<td><p><b style="color:red">76</b></p></td>
<td><p><b style="color:red">…</b></p></td>
</tr>
<tr class="row-odd"><td><p>04-05-2021</p></td>
<td><p>71</p></td>
<td><p><b style="color:red">83</b></p></td>
<td><p><b style="color:red">…</b></p></td>
</tr>
<tr class="row-even"><td><p>…</p></td>
<td><p>…</p></td>
<td><p><b style="color:red">…</b></p></td>
<td><p><b style="color:red">…</b></p></td>
</tr>
</tbody>
</table>
<p>Todo ésto es parte de lo que se denomina limpieza de datos, que deberemos realizarlo con anterioridad al análisis exploratorio.</p>
<p>A continuación, y una vez la data limpia, como también, reconocidas las variables que nos pueden ser útiles, debemos utilizar nuestra creatividad, y generar, a partir de la información que tenemos, nuevas variables que permitan resumir o acotar otras, dando a explicar, de mejor forma, los datos de la pandemia.</p>
</div>
<div class="section" id="datos-calculados">
<h3>Datos calculados<a class="headerlink" href="#datos-calculados" title="Permalink to this headline">¶</a></h3>
<p>Para efectos de contar con mayor cantidad de variables, se calculan:</p>
<div class="section" id="positividad-diaria-pcr">
<h4>Positividad diaria PCR<a class="headerlink" href="#positividad-diaria-pcr" title="Permalink to this headline">¶</a></h4>
<p>La positividad PCR entrega el porcentaje de personas positivas de la cantidad de PCR informados en un determinado intervalo de tiempo. En este caso, en el día.</p>
<div class="math notranslate nohighlight" id="equation-positividad-diaria">
<span class="eqno">(1)<a class="headerlink" href="#equation-positividad-diaria" title="Permalink to this equation">¶</a></span>\[
\begin{align}
\Large POSITIVIDAD_{diaria} = \frac{(casos \ nuevos \ totales) - (casos \ por \ antigeno)}{examenes \ pcr \ informados}
\end{align}
\]</div>
</div>
<div class="section" id="positividad-media-movil-semanal">
<h4>Positividad media móvil semanal<a class="headerlink" href="#positividad-media-movil-semanal" title="Permalink to this headline">¶</a></h4>
<p>La positividad media móvil semanal se entiende como la media que, a lo menos, requiere siete datos para obtenerse, obteniendo los promedios por ventana de siete días en un determinado conjunto de datos.</p>
<div class="math notranslate nohighlight" id="equation-positividad-movil">
<span class="eqno">(2)<a class="headerlink" href="#equation-positividad-movil" title="Permalink to this equation">¶</a></span>\[
\begin{align}
\Large POSITIVIDAD_{movil \ semanal} = \frac{1}{7}\sum_{i=1}^{7} Dato_{i}
\end{align}
\]</div>
</div>
<div class="section" id="tasa-de-crecimiento-semanal">
<h4>Tasa de crecimiento semanal<a class="headerlink" href="#tasa-de-crecimiento-semanal" title="Permalink to this headline">¶</a></h4>
<p>Idea original de Dr. Cristóbal Corral, con una tasa de crecimiento capaz de entregar el cambio diario a partir del cociente entre los casos nuevos del día <span class="math notranslate nohighlight">\(n\)</span> y los casos nuevos del día <span class="math notranslate nohighlight">\(n-1\)</span>. Se modifica y se contempla una tasa de crecimiento semanal, a partir de la media móvil de la sumatoria de los casos nuevos registrados en una semana <span class="math notranslate nohighlight">\(n\)</span> y la semana <span class="math notranslate nohighlight">\(n-1\)</span>.</p>
<div class="math notranslate nohighlight" id="equation-tasa-crecimiento">
<span class="eqno">(3)<a class="headerlink" href="#equation-tasa-crecimiento" title="Permalink to this equation">¶</a></span>\[ 
\begin{align}
\Large TASA_{crecimiento \ semanal} = \frac{\sum_{i=1}^{7} Dato_{i}}{\sum_{i=7}^{14} Dato_{i}} 
\end{align}
\]</div>
</div>
<div class="section" id="mortalidad-especifica-por-cien-mil-habitantes">
<h4>Mortalidad específica por cien mil habitantes<a class="headerlink" href="#mortalidad-especifica-por-cien-mil-habitantes" title="Permalink to this headline">¶</a></h4>
<p>La mortalidad específica entrega la cantidad de personas que fallecen por una determinada enfermedad, en un determinado período en una población. El determinado período se entiende en razón de que la pandemia aún no finaliza, y sería erróneo considerar la tasa de letalidad sabiendo que, aún no se registra la cantidad de contagiados y fallecidos totales por la enfermedad. En este caso, la contemplaremos por cada 100.000 habitantes.</p>
<div class="math notranslate nohighlight" id="equation-mortalidad-especifica">
<span class="eqno">(4)<a class="headerlink" href="#equation-mortalidad-especifica" title="Permalink to this equation">¶</a></span>\[ 
\begin{align}
\Large MORTALIDAD_{especifica} = \frac{fallecidos \ acumulados}{poblacion}*100000 
\end{align}
\]</div>
</div>
<div class="section" id="uci-diaria-aproximada">
<h4>UCI diaria aproximada<a class="headerlink" href="#uci-diaria-aproximada" title="Permalink to this headline">¶</a></h4>
<p>En razón de que:</p>
<ul class="simple">
<li><p>No se entrega una ocupación UCI por región en los reportes diarios del Ministerio de Salud.</p></li>
<li><p>Los datos disponibles respecto a la cantidad de camas disponibles y utilizadas tienen demora en actualizarse en la base de datos del MICITEC.</p></li>
</ul>
<p>Ésto nos genera un inconveniente particular, que es no tener un dato diario de la ocupación UCI regional. Para solucionar este problema, ocuparemos una aproximación. A la fecha (2021-05-04), la aproximación UCI diaria tiene un error absoluto del 0.017 (<a class="reference external" href="#ejemplo2">Ejemplo 2</a>).</p>
<p>La aproximación consiste en utilizar los últimos datos disponibles del producto 58 (csv58) y los datos diarios del producto 8 (csv8), calculando la ocupación de la siguiente forma, por media móvil semanal:</p>
<div class="math notranslate nohighlight" id="equation-uci-diaria">
<span class="eqno">(5)<a class="headerlink" href="#equation-uci-diaria" title="Permalink to this equation">¶</a></span>\[
\begin{align}
\Large UCI_{diaria \ aproximada} = \frac{1}{7}\sum_{i=1}^{7} (\frac{(pacientes \ covid_{csv8}) + (pacientes \ no \ covid_{csv58})}{(uci \ disponibles_{csv58})})_{i} 
\end{align}
\]</div>
</div>
<div class="section" id="tasa-de-casos-nuevos-por-cien-mil-habitantes">
<h4>Tasa de casos nuevos por cien mil habitantes<a class="headerlink" href="#tasa-de-casos-nuevos-por-cien-mil-habitantes" title="Permalink to this headline">¶</a></h4>
<p>Se entiende como la media móvil semanal de casos nuevos por cada cien mil habitantes. Se utiliza ampliamente en el plan Paso a Paso, y debido a la normalización, es un dato perfectamente comparable entre las regiones de Chile. Su cálculo es a partir de:</p>
<div class="math notranslate nohighlight" id="equation-tasa-casos">
<span class="eqno">(6)<a class="headerlink" href="#equation-tasa-casos" title="Permalink to this equation">¶</a></span>\[
\begin{align}
\Large Tasa_{casos \ nuevos} = \frac{100000}{7*poblacion}\sum_{i=1}^{7} Dato_{i}
\end{align}
\]</div>
</div>
<div class="section" id="dias-por-fase-del-plan-paso-a-paso">
<h4>Días por fase del plan Paso a Paso<a class="headerlink" href="#dias-por-fase-del-plan-paso-a-paso" title="Permalink to this headline">¶</a></h4>
<p>Variable que cuantifica la cantidad de días de una determinada fase del plan del Paso a Paso, por comuna. La variable, en sí, no requiere de una descripción. Se subentiende que, se acumulan los días que una determinada comuna estuvo en una determinada fase, haciendo un “<em>reset</em>” de días por cambio de fase de la comuna en el Paso a Paso.</p>
</div>
</div>
<div class="section" id="limpieza-de-datos">
<h3>Limpieza de datos<a class="headerlink" href="#limpieza-de-datos" title="Permalink to this headline">¶</a></h3>
<p>En toda recolección de información, se quiera o no, existirá inconsistencia. Algunos días, se genera inconsistencia producto de:</p>
<ul class="simple">
<li><p>Cambios de criterio.</p></li>
<li><p>Suma de cifras de otros días en un día específico (<strong>ajustes históricos considerables</strong>).</p></li>
</ul>
<p>Ésto afecta las tendencias y las curvas de los datos cumulativos.</p>
<div class="section" id="tratamiento">
<h4>Tratamiento<a class="headerlink" href="#tratamiento" title="Permalink to this headline">¶</a></h4>
<p>Nuestro trabajo es, dentro de lo posible, limpiar esa inconsistencia. Por lo que, a lo largo del código, se optará por reemplazar los <strong>outliers</strong> (datos atípicos) con cifras del día anterior, <strong>pero, solo en las cifras cumulativas, de modo de no generar descuadre con respecto al Minsal en las cifras acumulativas</strong>.</p>
</div>
</div>
<div class="section" id="manipulando-ahora-si">
<h3>Manipulando (<em>ahora sí</em>)<a class="headerlink" href="#manipulando-ahora-si" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Manipulando datos</span>

<span class="c1">### Obteniendo casos cumulativos</span>
<span class="n">casos_cumulativos</span> <span class="o">=</span> <span class="n">csv13</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span>
<span class="n">casos_cumulativos</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">csv13</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span>

<span class="c1">### Obteniendo casos acumulativos</span>
<span class="n">casos_acumulativos</span> <span class="o">=</span> <span class="n">csv3</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span>
<span class="n">casos_acumulativos</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">csv3</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span>

<span class="c1">### Obteniendo fallecidos acumulativos</span>
<span class="n">fallecidos_acumulativos</span> <span class="o">=</span> <span class="n">csv14</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span>
<span class="n">fallecidos_diarios</span> <span class="o">=</span> <span class="n">fallecidos_acumulativos</span> <span class="o">-</span> <span class="n">fallecidos_acumulativos</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">fallecidos_acumulativos</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">fallecidos_diarios</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">csv14</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">],</span> <span class="n">csv14</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span>

<span class="c1">### Obteniendo PCR</span>
<span class="n">pcr_cumulativos</span> <span class="o">=</span> <span class="n">csv7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">:]</span>
<span class="n">pcr_cumulativos</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">csv7</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">:]</span>

<span class="c1">### El día 12 de mayo se registraron más casos de los PCR que se informaron, lo que es imposible</span>
<span class="c1">### Asignamos los PCR del 13 de mayo de 2020, a los del 12 de mayo del mismo año</span>
<span class="c1">### Posiblemente, es un dato mal registrado</span>
<span class="n">pcr_cumulativos</span><span class="p">[</span><span class="s1">&#39;2020-05-13&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pcr_cumulativos</span><span class="p">[</span><span class="s1">&#39;2020-05-12&#39;</span><span class="p">]</span>
<span class="n">pcr_acumulativos</span> <span class="o">=</span> <span class="n">pcr_cumulativos</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>

<span class="c1">### Obteniendo UCI diaria con COVID-19</span>
<span class="n">uci_diaria</span> <span class="o">=</span> <span class="n">csv8</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">:]</span>
<span class="n">uci_diaria</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">csv8</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">:]</span>

<span class="c1">### Obteniendo detalle de casos (sintomáticos, asintomáticos, etc.)</span>
<span class="n">casos_detalle</span> <span class="o">=</span> <span class="n">csv3_detalle</span><span class="p">[</span><span class="n">csv3_detalle</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span>

<span class="c1">### Obteniendo residencias</span>
<span class="n">residencias</span> <span class="o">=</span> <span class="n">csv36</span><span class="p">[</span><span class="n">csv36</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span>

<span class="c1">### Obteniendo encuesta nacional de medicina intensiva (desactualizada)</span>
<span class="c1"># sochimi = csv48[csv48[&#39;Region&#39;] == &#39;Tarapacá&#39;]</span>

<span class="c1">### Obteniendo detalle de UCI semanal</span>
<span class="n">uci_detalle</span> <span class="o">=</span> <span class="n">csv58</span><span class="p">[</span><span class="n">csv58</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span>
<span class="n">uci_habilitadas</span> <span class="o">=</span> <span class="n">uci_detalle</span><span class="p">[</span><span class="n">uci_detalle</span><span class="p">[</span><span class="s1">&#39;Serie&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Camas UCI habilitadas&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-04-14&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">uci_ocupadas_covid</span> <span class="o">=</span> <span class="n">uci_detalle</span><span class="p">[</span><span class="n">uci_detalle</span><span class="p">[</span><span class="s1">&#39;Serie&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Camas UCI ocupadas COVID-19&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-04-14&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">uci_ocupadas_nocovid</span> <span class="o">=</span> <span class="n">uci_detalle</span><span class="p">[</span><span class="n">uci_detalle</span><span class="p">[</span><span class="s1">&#39;Serie&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Camas UCI ocupadas no COVID-19&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-04-14&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1">### Añadiendo cifras recopiladas por Dr. Cristóbal Corral con metodología de conteo anterior al criterio actual</span>
<span class="n">activos_rescatados</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">72</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">88</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">104</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">126</span><span class="p">,</span><span class="mi">130</span><span class="p">,</span><span class="mi">181</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">217</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">288</span><span class="p">,</span><span class="mi">324</span><span class="p">,</span><span class="mi">342</span><span class="p">,</span><span class="mi">364</span><span class="p">,</span><span class="mi">383</span><span class="p">,</span><span class="mi">409</span><span class="p">,</span><span class="mi">432</span><span class="p">,</span><span class="mi">484</span><span class="p">,</span><span class="mi">578</span><span class="p">,</span><span class="mi">632</span><span class="p">,</span><span class="mi">700</span><span class="p">,</span><span class="mi">758</span><span class="p">,</span><span class="mi">784</span><span class="p">,</span><span class="mi">797</span><span class="p">,</span><span class="mi">826</span><span class="p">,</span><span class="mi">930</span><span class="p">,</span><span class="mi">982</span><span class="p">,</span><span class="mi">1038</span><span class="p">,</span><span class="mi">1077</span><span class="p">,</span><span class="mi">1152</span><span class="p">,</span><span class="mi">1186</span><span class="p">,</span><span class="mi">1264</span><span class="p">,</span><span class="mi">1302</span><span class="p">,</span><span class="mi">1389</span><span class="p">,</span><span class="mi">1369</span><span class="p">,</span><span class="mi">1452</span><span class="p">,</span><span class="mi">1466</span><span class="p">,</span><span class="mi">1519</span><span class="p">,</span><span class="mi">1540</span><span class="p">,</span><span class="mi">1549</span><span class="p">,</span><span class="mi">1598</span><span class="p">,</span><span class="mi">1658</span><span class="p">,</span><span class="mi">1734</span><span class="p">,</span><span class="mi">1727</span><span class="p">,</span><span class="mi">1745</span><span class="p">,</span><span class="mi">1705</span><span class="p">,</span><span class="mi">1696</span><span class="p">,</span><span class="mi">1720</span><span class="p">,</span><span class="mi">1747</span><span class="p">,</span><span class="mi">1696</span><span class="p">,</span><span class="mi">1736</span><span class="p">,</span><span class="mi">2066</span><span class="p">,</span><span class="mi">2019</span><span class="p">,</span><span class="mi">1987</span><span class="p">,</span><span class="mi">2000</span><span class="p">]</span>
<span class="n">recuperados_rescatados</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">26</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">46</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">73</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">93</span><span class="p">,</span><span class="mi">104</span><span class="p">,</span><span class="mi">114</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">134</span><span class="p">,</span><span class="mi">142</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">199</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">271</span><span class="p">,</span><span class="mi">294</span><span class="p">,</span><span class="mi">321</span><span class="p">,</span><span class="mi">338</span><span class="p">,</span><span class="mi">416</span><span class="p">,</span><span class="mi">458</span><span class="p">,</span><span class="mi">484</span><span class="p">,</span><span class="mi">519</span><span class="p">,</span><span class="mi">546</span><span class="p">,</span><span class="mi">577</span><span class="p">,</span><span class="mi">614</span><span class="p">,</span><span class="mi">681</span><span class="p">,</span><span class="mi">777</span><span class="p">,</span><span class="mi">843</span><span class="p">,</span><span class="mi">971</span><span class="p">,</span><span class="mi">1052</span><span class="p">,</span><span class="mi">1105</span><span class="p">,</span><span class="mi">1135</span><span class="p">,</span><span class="mi">1242</span><span class="p">,</span><span class="mi">1388</span><span class="p">,</span><span class="mi">1466</span><span class="p">,</span><span class="mi">1557</span><span class="p">,</span><span class="mi">1623</span><span class="p">,</span><span class="mi">1729</span><span class="p">,</span><span class="mi">1800</span><span class="p">,</span><span class="mi">1945</span><span class="p">,</span><span class="mi">2079</span><span class="p">,</span><span class="mi">2232</span><span class="p">,</span><span class="mi">2340</span><span class="p">,</span><span class="mi">2504</span><span class="p">,</span><span class="mi">2571</span><span class="p">,</span><span class="mi">2654</span><span class="p">,</span><span class="mi">2782</span><span class="p">,</span><span class="mi">2937</span><span class="p">,</span><span class="mi">3064</span><span class="p">,</span><span class="mi">3215</span><span class="p">,</span><span class="mi">3357</span><span class="p">,</span> <span class="mi">3545</span><span class="p">,</span><span class="mi">3650</span><span class="p">,</span><span class="mi">3775</span><span class="p">,</span><span class="mi">3952</span><span class="p">,</span><span class="mi">4087</span><span class="p">]</span>

<span class="c1">### Obteniendo el detalle de los casos</span>
<span class="n">casos_con_sintomas</span> <span class="o">=</span> <span class="n">casos_detalle</span><span class="p">[</span><span class="n">casos_detalle</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Casos nuevos con sintomas&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-03-03&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">casos_sin_sintomas</span> <span class="o">=</span> <span class="n">casos_detalle</span><span class="p">[</span><span class="n">casos_detalle</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Casos nuevos sin sintomas&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-03-03&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">casos_sin_notificar</span> <span class="o">=</span> <span class="n">casos_detalle</span><span class="p">[</span><span class="n">casos_detalle</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Casos nuevos sin notificar&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-03-03&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">casos_recuperados</span> <span class="o">=</span> <span class="n">casos_detalle</span><span class="p">[</span><span class="n">casos_detalle</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Casos confirmados recuperados&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-03-03&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">casos_recuperados</span><span class="p">[</span><span class="s1">&#39;2020-04-07&#39;</span><span class="p">:</span><span class="s1">&#39;2020-06-28&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">recuperados_rescatados</span>
<span class="n">casos_recuperados_cumulativos</span> <span class="o">=</span> <span class="n">casos_recuperados</span> <span class="o">-</span> <span class="n">casos_recuperados</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">### Limpieza de outlier de 981 (solo en cifras cumulativas para no descuadrar cifra acumulada)</span>
<span class="n">casos_recuperados_cumulativos</span><span class="p">[</span><span class="s1">&#39;2020-06-29&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">casos_recuperados_cumulativos</span><span class="p">[</span><span class="s1">&#39;2020-06-28&#39;</span><span class="p">]</span>
<span class="n">casos_activos</span> <span class="o">=</span> <span class="n">casos_detalle</span><span class="p">[</span><span class="n">casos_detalle</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Casos activos confirmados&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-03-03&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">casos_activos</span><span class="p">[</span><span class="s1">&#39;2020-03-23&#39;</span><span class="p">:</span><span class="s1">&#39;2020-06-20&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">activos_rescatados</span>
<span class="n">casos_activos_probables</span> <span class="o">=</span> <span class="n">casos_detalle</span><span class="p">[</span><span class="n">casos_detalle</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Casos activos probables&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-03-03&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">casos_cumulativos_antigeno</span> <span class="o">=</span> <span class="n">casos_detalle</span><span class="p">[</span><span class="n">casos_detalle</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Casos nuevos confirmados por antigeno&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-03-03&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">casos_acumulativos_reinfeccion</span> <span class="o">=</span> <span class="n">casos_detalle</span><span class="p">[</span><span class="n">casos_detalle</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Casos con sospecha de reinfeccion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-03-03&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1">### Obteniendo el detalle de residencias</span>
<span class="n">residencias_cupos</span> <span class="o">=</span> <span class="n">residencias</span><span class="p">[</span><span class="n">residencias</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cupos totales&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-05-29&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">residencias_usuarios</span> <span class="o">=</span> <span class="n">residencias</span><span class="p">[</span><span class="n">residencias</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;usuarios en residencia&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-05-29&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">residencias_numero</span> <span class="o">=</span> <span class="n">residencias</span><span class="p">[</span><span class="n">residencias</span><span class="p">[</span><span class="s1">&#39;Categoria&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;residencias&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2020-05-29&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1">### Obteniendo el detalle de SOCHIMI (producto desactualizado e incompleto)</span>
<span class="c1">#sochimi_uci_ocupadas = sochimi[sochimi[&#39;Serie&#39;] == &#39;Camas ocupadas intensivo&#39;].loc[:, &#39;2020-04-12&#39;:].transpose().iloc[:, 0]</span>
<span class="c1">#sochimi_uci_totales = sochimi[sochimi[&#39;Serie&#39;] == &#39;Camas totales intensivo&#39;].loc[:, &#39;2020-04-12&#39;:].transpose().iloc[:, 0]</span>
<span class="c1">#sochimi_uti_ocupadas = sochimi[sochimi[&#39;Serie&#39;] == &#39;Camas ocupadas intermedio&#39;].loc[:, &#39;2020-04-12&#39;:].transpose().iloc[:, 0]</span>
<span class="c1">#sochimi_uti_totales = sochimi[sochimi[&#39;Serie&#39;] == &#39;Camas totales intermedio&#39;].loc[:, &#39;2020-04-12&#39;:].transpose().iloc[:, 0]</span>
<span class="c1">#sochimi_vmi_covid = sochimi[sochimi[&#39;Serie&#39;] == &#39;Vmi covid19 confirmados&#39;].loc[:, &#39;2020-04-12&#39;:].transpose().iloc[:, 0]</span>
<span class="c1">#sochimi_vmi_sospecha = sochimi[sochimi[&#39;Serie&#39;] == &#39;Vmi covid19 sospechosos&#39;].loc[:, &#39;2020-04-12&#39;:].transpose().iloc[:, 0]</span>
<span class="c1">#sochimi_vmi_ocupados = sochimi[sochimi[&#39;Serie&#39;] == &#39;Vmi ocupados&#39;].loc[:, &#39;2020-04-12&#39;:].transpose().iloc[:, 0]</span>
<span class="c1">#sochimi_vmi_totales = sochimi[sochimi[&#39;Serie&#39;] == &#39;Vmi totales&#39;].loc[:, &#39;2020-04-12&#39;:].transpose().iloc[:, 0]</span>

<span class="c1">### Obteniendo R-efectivo</span>
<span class="n">r_regional</span> <span class="o">=</span> <span class="n">csv54_regional</span><span class="p">[</span><span class="n">csv54_regional</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">][[</span><span class="s1">&#39;fecha&#39;</span><span class="p">,</span><span class="s1">&#39;r.estimado&#39;</span><span class="p">]]</span>
<span class="n">r_regional</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">r_regional</span><span class="p">[</span><span class="s1">&#39;fecha&#39;</span><span class="p">]</span>
<span class="n">r_regional</span> <span class="o">=</span> <span class="n">r_regional</span><span class="p">[</span><span class="s1">&#39;r.estimado&#39;</span><span class="p">]</span>
<span class="n">r_provincial</span> <span class="o">=</span> <span class="n">csv54_provincial</span><span class="p">[</span><span class="n">csv54_provincial</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">][[</span><span class="s1">&#39;fecha&#39;</span><span class="p">,</span><span class="s1">&#39;r.estimado&#39;</span><span class="p">,</span> <span class="s1">&#39;Provincia&#39;</span><span class="p">]]</span>
<span class="n">r_provincial</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">r_provincial</span><span class="p">[</span><span class="s1">&#39;fecha&#39;</span><span class="p">]</span>
<span class="n">r_provincial_iqq</span> <span class="o">=</span> <span class="n">r_provincial</span><span class="p">[</span><span class="n">r_provincial</span><span class="p">[</span><span class="s1">&#39;Provincia&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Iquique&#39;</span><span class="p">][</span><span class="s1">&#39;r.estimado&#39;</span><span class="p">]</span>
<span class="n">r_provincial_tam</span> <span class="o">=</span> <span class="n">r_provincial</span><span class="p">[</span><span class="n">r_provincial</span><span class="p">[</span><span class="s1">&#39;Provincia&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tamarugal&#39;</span><span class="p">][</span><span class="s1">&#39;r.estimado&#39;</span><span class="p">]</span>

<span class="c1">### Obteniendo vacunacion</span>
<span class="n">vacunacion</span> <span class="o">=</span> <span class="n">csv76</span><span class="p">[</span><span class="n">csv76</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">vacunacion</span> <span class="o">=</span> <span class="n">vacunacion</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Dosis&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Region&#39;</span><span class="p">)</span>
<span class="n">vacunacion</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">vacunacion</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">vacunacion</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="n">vacunacion</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">vacunacion</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1° Dosis&#39;</span><span class="p">,</span> <span class="s1">&#39;2° Dosis&#39;</span><span class="p">,</span> <span class="s1">&#39;Unica&#39;</span><span class="p">]</span>

<span class="c1">### Obteniendo vacunación por edades (dataframe aparte)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">vacunacion_etaria</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([])</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">vacunacion_etaria</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> a </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">csv81_edad1</span><span class="p">[</span><span class="n">csv81_edad1</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapaca&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                               <span class="n">csv81_edad1</span><span class="p">[</span><span class="n">csv81_edad1</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapaca&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])]</span> \
    <span class="o">=</span> <span class="p">[</span><span class="n">csv81_poblacionedad</span><span class="p">[</span><span class="n">csv81_poblacionedad</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapaca&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
       <span class="n">csv81_edad1</span><span class="p">[</span><span class="n">csv81_edad1</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapaca&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> 
      <span class="n">csv81_edad2</span><span class="p">[</span><span class="n">csv81_edad2</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapaca&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()]</span>
<span class="n">vacunacion_etaria</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Poblacion&#39;</span><span class="p">,</span> <span class="s1">&#39;1° Dosis&#39;</span><span class="p">,</span> <span class="s1">&#39;2° Dosis&#39;</span><span class="p">]</span>
<span class="n">vacunacion_etaria</span> <span class="o">=</span> <span class="n">vacunacion_etaria</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

<span class="c1">### Antígenos en la región</span>
<span class="n">antigenos</span> <span class="o">=</span> <span class="n">csv87</span><span class="p">[</span><span class="n">csv87</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;2021-06-05&#39;</span><span class="p">:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">antigenos_acumulativos</span> <span class="o">=</span> <span class="n">antigenos</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>

<span class="c1">### Obteniendo datos comunales</span>
<span class="n">casoscomuna_acumulativos</span> <span class="o">=</span> <span class="n">csv1</span><span class="p">[</span><span class="n">csv1</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">csv1</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;^Tarapac&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]][</span><span class="mi">4</span><span class="p">:]</span>
<span class="n">casoscomuna_acumulativos</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="s1">&#39;Casos acumulados en &#39;</span> <span class="o">+</span> <span class="n">csv1</span><span class="p">[</span><span class="n">csv1</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">csv1</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;^Tarapac&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span>\
<span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Camina&#39;</span><span class="p">,</span> <span class="s1">&#39;Camiña&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Desconocido Tarapaca&#39;</span><span class="p">,</span> <span class="s1">&#39;Comuna desconocida&#39;</span><span class="p">)</span>
<span class="n">casoscomuna_acumulativos</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">csv1</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">][</span><span class="mi">4</span><span class="p">:]</span>
<span class="n">casoscomuna_acumulativos</span> <span class="o">=</span> <span class="n">casoscomuna_acumulativos</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Tasa&#39;</span><span class="p">)</span>

<span class="n">casoscomuna_activos</span> <span class="o">=</span> <span class="n">csv19</span><span class="p">[</span><span class="n">csv19</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">csv19</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;^Tarapac&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]][</span><span class="mi">4</span><span class="p">:]</span>
<span class="n">casoscomuna_activos</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="s1">&#39;Casos activos en &#39;</span> <span class="o">+</span> <span class="n">csv19</span><span class="p">[</span><span class="n">csv19</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">csv19</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;^Tarapac&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span>\
<span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Camina&#39;</span><span class="p">,</span> <span class="s1">&#39;Camiña&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Desconocido Tarapaca&#39;</span><span class="p">,</span> <span class="s1">&#39;Comuna desconocida&#39;</span><span class="p">)</span>
<span class="n">casoscomuna_activos</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">csv19</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">][</span><span class="mi">4</span><span class="p">:]</span>
<span class="n">casoscomuna_activos</span> <span class="o">=</span> <span class="n">casoscomuna_activos</span><span class="p">[</span><span class="n">casoscomuna_activos</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

<span class="c1">### Paso a paso histórico por comuna (descartamos zonas rurales)</span>
<span class="n">pasopaso_comuna</span> <span class="o">=</span> <span class="n">csv74</span><span class="p">[</span><span class="n">csv74</span><span class="p">[</span><span class="s1">&#39;region_residencia&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">csv74</span><span class="p">[</span><span class="n">csv74</span><span class="p">[</span><span class="s1">&#39;region_residencia&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;zona&#39;</span><span class="p">,:]</span> <span class="o">!=</span> <span class="s1">&#39;Rural&#39;</span><span class="p">]</span>
<span class="n">pasopaso_comuna</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="s1">&#39;Paso a Paso &#39;</span> <span class="o">+</span> <span class="n">pasopaso_comuna</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;comuna_residencia&#39;</span><span class="p">]</span>
<span class="n">pasopaso_comuna</span> <span class="o">=</span> <span class="n">pasopaso_comuna</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;codigo_region&#39;</span><span class="p">,</span> <span class="s1">&#39;codigo_comuna&#39;</span><span class="p">,</span> <span class="s1">&#39;comuna_residencia&#39;</span><span class="p">,</span> <span class="s1">&#39;zona&#39;</span><span class="p">,</span> <span class="s1">&#39;region_residencia&#39;</span><span class="p">])</span>

<span class="c1">### Movilidad</span>
<span class="n">movilidad_sem</span> <span class="o">=</span> <span class="n">csv82_semana</span><span class="p">[</span><span class="n">csv82_semana</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">movilidad_finsem</span> <span class="o">=</span> <span class="n">csv82_finsemana</span><span class="p">[</span><span class="n">csv82_finsemana</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">movilidad_comuna</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">movilidad_sem</span><span class="p">,</span> <span class="n">movilidad_finsem</span><span class="p">])</span>
<span class="n">movilidad_comuna</span><span class="p">[</span><span class="s1">&#39;fecha_inicio&#39;</span><span class="p">],</span> <span class="n">movilidad_comuna</span><span class="p">[</span><span class="s1">&#39;fecha_termino&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">movilidad_comuna</span><span class="p">[</span><span class="s1">&#39;fecha_inicio&#39;</span><span class="p">]),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">movilidad_comuna</span><span class="p">[</span><span class="s1">&#39;fecha_termino&#39;</span><span class="p">])</span>
<span class="n">movilidad_comuna</span> <span class="o">=</span> <span class="n">movilidad_comuna</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;fecha_inicio&#39;</span><span class="p">])</span>

<span class="c1">### Gracias a Erfan (stackoverflow.com/a/57334167/13746427) ###</span>
<span class="n">movilidad_comuna</span><span class="p">[</span><span class="s1">&#39;Fecha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">movilidad_comuna</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;fecha_inicio&#39;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;fecha_termino&#39;</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>
<span class="n">movilidad_comuna</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">movilidad_comuna</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;fecha_inicio&#39;</span><span class="p">,</span> <span class="s1">&#39;fecha_termino&#39;</span><span class="p">])</span>
<span class="p">)</span>

<span class="n">movilidad_comuna</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">movilidad_comuna</span><span class="p">[</span><span class="s1">&#39;Fecha&#39;</span><span class="p">])</span>
<span class="c1">### ¿Por qué no ocupar el Paso a Paso histórico de este archivo? Por la frecuencia de actualización ###</span>
<span class="n">movilidad_comuna</span> <span class="o">=</span> <span class="n">movilidad_comuna</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;semana&#39;</span><span class="p">,</span><span class="s1">&#39;paso&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;comuna&#39;</span><span class="p">,</span> <span class="s1">&#39;var_salidas_cota_inferior&#39;</span><span class="p">,</span> \
                                         <span class="s1">&#39;var_salidas_cota_superior&#39;</span><span class="p">,</span> <span class="s1">&#39;Fecha&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">### Finalmente, código que nos segrega por comuna los valores de la movilidad ###</span>
<span class="n">movilidad</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([])</span>
<span class="k">for</span> <span class="n">comuna</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">movilidad_comuna</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;nom_comuna&#39;</span><span class="p">,</span> <span class="p">:]):</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;movilidad[&quot;</span><span class="si">{}</span><span class="s1">&quot;] = movilidad_comuna[movilidad_comuna[&quot;nom_comuna&quot;] == &quot;</span><span class="si">{}</span><span class="s1">&quot;][&quot;var_salidas&quot;]&#39;</span>\
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;Movilidad &#39;</span> <span class="o">+</span> <span class="n">comuna</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()),</span> <span class="n">comuna</span><span class="p">))</span>
<span class="n">movilidad</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">movilidad</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">movilidad</span> <span class="o">=</span> <span class="n">movilidad</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2020-03-03&#39;</span><span class="p">:,</span> <span class="p">:]</span>

<span class="c1">### Arreglamos tilde para coincidir</span>
<span class="n">csv61</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">csv61</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Tarapacá&#39;</span><span class="p">,</span> <span class="s1">&#39;Tarapaca&#39;</span><span class="p">)</span>

<span class="c1">### Notificación PCR, búsqueda activa, positividad, cobertura de testeo, oportunidad en la notificación por comuna,</span>
<span class="c1">### fallecidos no procesados por deis y fallecidos procesados por deis</span>
<span class="c1">### Se rellenan días sin registro con la última observación válida</span>
<span class="c1">### Exceptuando días antes del primer caso y últimos días sin información ###</span>
<span class="n">csvs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;csv63&#39;</span><span class="p">,</span> <span class="s1">&#39;csv64&#39;</span><span class="p">,</span> <span class="s1">&#39;csv65&#39;</span><span class="p">,</span> <span class="s1">&#39;csv66&#39;</span><span class="p">,</span> <span class="s1">&#39;csv67&#39;</span><span class="p">,</span> <span class="s1">&#39;csv38&#39;</span><span class="p">,</span> <span class="s2">&quot;csv61[csv61[&#39;CIE 10&#39;] == &#39;U07.1&#39;]&quot;</span><span class="p">,</span> <span class="s2">&quot;csv61[csv61[&#39;CIE 10&#39;] == &#39;U07.2&#39;]&quot;</span><span class="p">]</span>
<span class="n">var</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;notificacion&#39;</span><span class="p">,</span> <span class="s1">&#39;bac&#39;</span><span class="p">,</span> <span class="s1">&#39;positividad&#39;</span><span class="p">,</span> <span class="s1">&#39;cobertura&#39;</span><span class="p">,</span> <span class="s1">&#39;oportunidad&#39;</span><span class="p">,</span> <span class="s1">&#39;fallecidos&#39;</span><span class="p">,</span> <span class="s1">&#39;fallecidosdeis_conf&#39;</span><span class="p">,</span> <span class="s1">&#39;fallecidosdeis_prob&#39;</span><span class="p">]</span>
<span class="n">nom</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Notificacion PCR&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC&#39;</span> <span class="p">,</span> <span class="s1">&#39;Positividad&#39;</span><span class="p">,</span> <span class="s1">&#39;Cobertura de testeo&#39;</span><span class="p">,</span> <span class="s1">&#39;Oportunidad en notificacion&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos&#39;</span><span class="p">,</span> \
      <span class="s1">&#39;Fallecidos confirmados DEIS&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos probables DEIS&#39;</span><span class="p">]</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">csv</span> <span class="ow">in</span> <span class="n">csvs</span><span class="p">:</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_comuna = pd.DataFrame([], index=casos_cumulativos.index)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_comuna = </span><span class="si">{}</span><span class="s1">_comuna.join(</span><span class="si">{}</span><span class="s1">[</span><span class="si">{}</span><span class="s1">[&quot;Region&quot;] == &quot;Tarapaca&quot;].transpose())&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">csv</span><span class="p">,</span> <span class="n">csv</span><span class="p">))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_comuna.columns = &quot;</span><span class="si">{}</span><span class="s1"> &quot; + </span><span class="si">{}</span><span class="s1">[</span><span class="si">{}</span><span class="s1">[&quot;Region&quot;] == &quot;Tarapaca&quot;].transpose().loc[&quot;Comuna&quot;, :].replace(&quot;Camina&quot;, &quot;Camiña&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">nom</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">csv</span><span class="p">,</span> <span class="n">csv</span><span class="p">))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;for col in </span><span class="si">{}</span><span class="s1">_comuna: </span><span class="se">\</span>
<span class="s1">        </span><span class="si">{}</span><span class="s1">_comuna[col]</span><span class="se">\</span>
<span class="s1">        [</span><span class="si">{}</span><span class="s1">_comuna[col].first_valid_index():</span><span class="si">{}</span><span class="s1">_comuna[col].last_valid_index()] = </span><span class="se">\</span>
<span class="s1">        </span><span class="si">{}</span><span class="s1">_comuna[col]</span><span class="se">\</span>
<span class="s1">        [</span><span class="si">{}</span><span class="s1">_comuna[col].first_valid_index():</span><span class="si">{}</span><span class="s1">_comuna[col].last_valid_index()]</span><span class="se">\</span>
<span class="s1">        .fillna(method=&quot;ffill&quot;, inplace=False)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">var</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    
<span class="c1">### Otras cifras</span>
<span class="n">poblacion</span> <span class="o">=</span> <span class="n">csv7</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Tarapacá&#39;</span><span class="p">]</span>
<span class="n">uciocupacion_nacional</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(((</span><span class="nb">int</span><span class="p">(</span><span class="n">csv58</span><span class="p">[(</span><span class="n">csv58</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Total&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">csv58</span><span class="p">[</span><span class="s1">&#39;Serie&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Camas UCI ocupadas no COVID-19&#39;</span><span class="p">)]</span><span class="o">.</span>\
                         <span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">csv58</span><span class="p">[(</span><span class="n">csv58</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Total&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">csv58</span><span class="p">[</span><span class="s1">&#39;Serie&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Camas UCI ocupadas COVID-19&#39;</span><span class="p">)]</span>\
                         <span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span><span class="o">/</span><span class="n">csv58</span><span class="p">[(</span><span class="n">csv58</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Total&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">csv58</span><span class="p">[</span><span class="s1">&#39;Serie&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Camas UCI habilitadas&#39;</span><span class="p">)]</span>\
                         <span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="mi">16</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>


<span class="c1">### Datos calculados ###</span>

<span class="c1">### Positividad diaria PCR</span>
<span class="n">positividad_diaria</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">casos_cumulativos</span> <span class="o">-</span> <span class="n">casos_cumulativos_antigeno</span><span class="p">)</span><span class="o">/</span><span class="n">pcr_cumulativos</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">### Rellenamos datos anteriores al primer registro de los antígenos</span>
<span class="n">positividad_diaria</span> <span class="o">=</span> <span class="n">positividad_diaria</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">casos_cumulativos</span><span class="p">)</span><span class="o">/</span><span class="n">pcr_cumulativos</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">### Positividad media móvil</span>
<span class="n">positividad_media_movil</span> <span class="o">=</span> <span class="n">positividad_diaria</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">### Rellenamos datos anteriores al primer registro de los antígenos</span>
<span class="n">positividad_media_movil</span> <span class="o">=</span> <span class="n">positividad_diaria</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">casos_cumulativos</span><span class="p">)</span><span class="o">/</span><span class="n">pcr_cumulativos</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">### Positividad diaria ANTÍGENO</span>
<span class="n">positividad_antigeno</span> <span class="o">=</span> <span class="p">(</span><span class="n">casos_cumulativos_antigeno</span><span class="p">[</span><span class="n">antigenos</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">/</span>
      <span class="n">antigenos</span><span class="p">[</span><span class="n">antigenos</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

<span class="c1">### Positividad media móvil ANTÍGENO</span>
<span class="n">positividad_antigeno_media_movil</span> <span class="o">=</span> <span class="p">(</span><span class="n">casos_cumulativos_antigeno</span><span class="p">[</span><span class="n">antigenos</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">/</span>
      <span class="n">antigenos</span><span class="p">[</span><span class="n">antigenos</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1">### Tasa de crecimiento semanal y diaria</span>
<span class="n">crecimiento</span> <span class="o">=</span> <span class="n">casos_cumulativos</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">casos_cumulativos</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">crecimientodiario</span> <span class="o">=</span> <span class="n">casos_cumulativos</span><span class="o">/</span><span class="n">casos_cumulativos</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">### Limpieza de outlier de 41</span>
<span class="n">crecimientodiario</span><span class="p">[</span><span class="s1">&#39;2020-12-13&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">crecimientodiario</span><span class="p">[</span><span class="s1">&#39;2020-12-12&#39;</span><span class="p">]</span>

<span class="c1">### Mortalidad específica por cien mil habitantes</span>
<span class="n">mortalidad_especifica</span> <span class="o">=</span> <span class="p">(((</span><span class="n">fallecidos_acumulativos</span><span class="p">)</span> <span class="o">/</span> <span class="n">poblacion</span><span class="p">)</span><span class="o">*</span><span class="mi">100000</span><span class="p">)</span>

<span class="c1">### Mortalidad específica por cien mil habitantes por comuna</span>
<span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">poblaciones_comunales</span> <span class="o">=</span> <span class="n">csv38</span><span class="p">[</span><span class="n">csv38</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tarapaca&#39;</span><span class="p">][:</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="s1">&#39;Poblacion&#39;</span><span class="p">]</span>
<span class="n">poblaciones_comunales</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">me_comuna</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([])</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">fallecidosdeis_conf_comuna</span><span class="p">:</span>
    <span class="n">me_comuna</span><span class="p">[</span><span class="s1">&#39;Mortalidad especifica comunal </span><span class="si">{}</span><span class="s1"> *&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">28</span><span class="p">:])]</span> <span class="o">=</span> <span class="n">fallecidosdeis_conf_comuna</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">/</span><span class="n">poblaciones_comunales</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="mi">100000</span>
    <span class="n">me_comuna</span><span class="p">[</span><span class="s1">&#39;Mortalidad especifica comunal </span><span class="si">{}</span><span class="s1"> *&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">28</span><span class="p">:])]</span> <span class="o">=</span> <span class="n">me_comuna</span><span class="p">[</span><span class="s1">&#39;Mortalidad especifica comunal </span><span class="si">{}</span><span class="s1"> *&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">28</span><span class="p">:])]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
    
<span class="c1">### UCI diaria aproximada, real y error absoluto</span>
<span class="n">uci_aprox</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">uci_diaria</span> <span class="o">+</span> <span class="n">uci_ocupadas_nocovid</span><span class="p">)</span><span class="o">/</span><span class="n">uci_habilitadas</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1">### Rellenamos con últimos disponibles datos las filas faltantes</span>
<span class="n">uci_aprox</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">uci_aprox</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">():]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">uci_diaria</span> <span class="o">+</span> <span class="n">uci_ocupadas_nocovid</span><span class="p">[</span><span class="n">uci_ocupadas_nocovid</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()])</span><span class="o">/</span><span class="n">uci_habilitadas</span><span class="p">[</span><span class="n">uci_habilitadas</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()])</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">uci_real</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">uci_ocupadas_covid</span> <span class="o">+</span> <span class="n">uci_ocupadas_nocovid</span><span class="p">)</span><span class="o">/</span><span class="n">uci_habilitadas</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">error_abs</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(((</span><span class="n">uci_real</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">uci_aprox</span><span class="p">[:</span><span class="n">uci_habilitadas</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()])))</span>

<span class="c1">### Tasa de casos nuevos por cien mil habitantes</span>
<span class="n">tasa_casosnuevos</span> <span class="o">=</span> <span class="p">((</span><span class="n">casos_cumulativos</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">/</span><span class="n">poblacion</span><span class="p">)</span><span class="o">*</span><span class="mi">100000</span><span class="p">)</span>

<span class="c1">### Días por fase del plan Paso a Paso</span>
<span class="c1">### Gracias a P.Tillmann (stackoverflow.com/q/25119524/13746427), código para contar duración en días por fase ###</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">pasopaso_comuna</span><span class="p">:</span>
    <span class="n">pasopaso_comuna</span><span class="p">[</span><span class="s1">&#39;Paso a Paso (dias) &#39;</span> <span class="o">+</span> <span class="n">col</span><span class="p">[</span><span class="mi">5</span><span class="p">:]]</span> <span class="o">=</span> <span class="n">pasopaso_comuna</span><span class="o">.</span><span class="n">groupby</span><span class="p">((</span><span class="n">pasopaso_comuna</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">!=</span> <span class="n">pasopaso_comuna</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span><span class="o">.</span><span class="n">cumcount</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="uniendo-en-una-sola-tabla">
<h2>Uniendo en una sola tabla<a class="headerlink" href="#uniendo-en-una-sola-tabla" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>En razón de contar con los datos de la Región de Tarapacá unificados, procederemos a unir todos los datos en una tabla (DataFrame). Absolutamente todos las salidas (imágenes, archivos, descripciones, etc.) se basan en ella.</p>
<div class="section" id="por-que-unificar-los-datos">
<h3>¿Por qué unificar los datos?<a class="headerlink" href="#por-que-unificar-los-datos" title="Permalink to this headline">¶</a></h3>
<p>La primera vez que trabajé con código en Ciencia de Datos, recuerdo haber utilizado las bases de datos de pétalos y sépalos en R Studio, y me preguntaba, ¿podré algún día generar algo similar en base a determinadas observaciones? Quizás, por allí va el por qué del querer unificar todos los datos en un solo archivo, aunque también, en el anhelo que le pueda servir a alguien en un futuro no muy lejano para cuantificar las cifras de la pandemia del COVID-19 en la Región de Tarapacá… Por cierto, nací iquiqueño y al día en que escribo, 31/05/2021, estoy en vías de emprender migración a otra ciudad. Quizás, Numeral.lab, es el aporte a esta tierra que me brindó, junto con mi familia, todo lo que soy (para bien o para mal, todo es dual).</p>
<p>Los cambios siempre son para mejor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Uniendo datos</span>

<span class="c1">### Tabla de todos los datos</span>
<span class="n">dfs</span> <span class="o">=</span> <span class="p">[</span><span class="n">casos_acumulativos</span><span class="p">,</span> <span class="n">casos_recuperados</span><span class="p">,</span> <span class="n">fallecidos_acumulativos</span><span class="p">,</span> \
       <span class="n">casos_activos</span><span class="p">,</span> <span class="n">casos_activos_probables</span><span class="p">,</span> <span class="n">casos_cumulativos</span><span class="p">,</span> <span class="n">casos_con_sintomas</span><span class="p">,</span> \
       <span class="n">casos_sin_sintomas</span><span class="p">,</span> <span class="n">casos_sin_notificar</span><span class="p">,</span> <span class="n">casos_cumulativos_antigeno</span><span class="p">,</span> \
       <span class="n">casos_acumulativos_reinfeccion</span><span class="p">,</span> <span class="n">casos_recuperados_cumulativos</span><span class="p">,</span> <span class="n">fallecidos_diarios</span><span class="p">,</span> <span class="n">antigenos</span><span class="p">,</span> <span class="n">antigenos_acumulativos</span><span class="p">,</span>\
       <span class="n">pcr_cumulativos</span><span class="p">,</span> <span class="n">pcr_acumulativos</span><span class="p">,</span> <span class="n">residencias_cupos</span><span class="p">,</span> <span class="n">residencias_usuarios</span><span class="p">,</span> \
       <span class="n">residencias_numero</span><span class="p">,</span> <span class="n">uci_habilitadas</span><span class="p">,</span> <span class="n">uci_diaria</span><span class="p">,</span> <span class="n">uci_ocupadas_nocovid</span><span class="p">,</span> <span class="n">uci_real</span><span class="p">,</span> <span class="n">r_regional</span><span class="p">,</span> \
       <span class="n">r_provincial_iqq</span><span class="p">,</span> <span class="n">r_provincial_tam</span><span class="p">,</span> <span class="n">positividad_diaria</span><span class="p">,</span> <span class="n">vacunacion</span><span class="p">,</span> <span class="n">casoscomuna_acumulativos</span><span class="p">,</span> 
       <span class="n">casoscomuna_activos</span><span class="p">,</span> <span class="n">pasopaso_comuna</span><span class="p">,</span> <span class="n">movilidad</span><span class="p">,</span> <span class="n">notificacion_comuna</span><span class="p">,</span> <span class="n">bac_comuna</span><span class="p">,</span> <span class="n">positividad_comuna</span><span class="p">,</span>\
       <span class="n">cobertura_comuna</span><span class="p">,</span> <span class="n">oportunidad_comuna</span><span class="p">,</span> <span class="n">fallecidos_comuna</span><span class="p">,</span> <span class="n">fallecidosdeis_conf_comuna</span><span class="p">,</span> <span class="n">fallecidosdeis_prob_comuna</span><span class="p">,</span>\
       <span class="n">positividad_media_movil</span><span class="p">,</span> <span class="n">mortalidad_especifica</span><span class="p">,</span>\
       <span class="n">crecimiento</span><span class="p">,</span> <span class="n">crecimientodiario</span><span class="p">,</span> <span class="n">uci_aprox</span><span class="p">,</span> <span class="n">error_abs</span><span class="p">,</span> <span class="n">tasa_casosnuevos</span><span class="p">,</span> <span class="n">positividad_antigeno</span><span class="p">,</span>\
       <span class="n">positividad_antigeno_media_movil</span><span class="p">,</span> <span class="n">me_comuna</span><span class="p">]</span>

<span class="c1">### Unimos a la tabla anterior y rellenamos valores NaN (Not a Number o no definido)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dfs</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">### Asignamos nombres de columnas y formateamos datos</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Casos confirmados acumulados&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos recuperados acumulados&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos fallecidos acumulados&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Casos activos confirmados&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos activos probables&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos nuevos&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos nuevos con sintomas&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Casos nuevos sin sintomas&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos nuevos por laboratorio&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos nuevos por antigeno&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Casos con sospecha de reinfeccion&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos recuperados nuevos&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos fallecidos nuevos&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Antigenos informados nuevos&#39;</span><span class="p">,</span> <span class="s1">&#39;Antigenos informados acumulados&#39;</span><span class="p">,</span><span class="s1">&#39;PCR informados nuevos&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;PCR informados acumulados&#39;</span><span class="p">,</span> <span class="s1">&#39;Cupos en residencias&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Usuarios en residencias&#39;</span><span class="p">,</span> <span class="s1">&#39;Numero de residencias&#39;</span><span class="p">,</span> <span class="s1">&#39;UCI habilitadas&#39;</span><span class="p">,</span> <span class="s1">&#39;UCI ocupadas por confirmados&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;UCI ocupadas por no confirmados&#39;</span><span class="p">,</span> <span class="s1">&#39;UCI ocupacion media movil real&#39;</span><span class="p">,</span> <span class="s1">&#39;Re regional&#39;</span><span class="p">,</span> <span class="s1">&#39;Re Iquique&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Re Tamarugal&#39;</span><span class="p">,</span> <span class="s1">&#39;Positividad diaria&#39;</span><span class="p">,</span> <span class="s1">&#39;Vacunados acumulados 1° dosis&#39;</span><span class="p">,</span> <span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Vacunados acumulados unica dosis&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos acumulados en Alto Hospicio&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos acumulados en Camiña&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Casos acumulados en Colchane&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Casos acumulados en Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos acumulados en Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos acumulados en Pica&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Casos acumulados en Pozo Almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos acumulados en Comuna desconocida&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;Casos activos en Alto Hospicio&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos activos en Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos activos en Colchane&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Casos activos en Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos activos en Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos activos en Pica&#39;</span><span class="p">,</span> \
              <span class="s1">&#39;Casos activos en Pozo Almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos activos en Comuna desconocida&#39;</span> <span class="p">,</span><span class="s1">&#39;Paso a Paso Alto Hospicio&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Paso a Paso Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso Colchane&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso Iquique&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Paso a Paso Pica&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso Pozo Almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso (dias) Alto Hospicio&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Paso a Paso (dias) Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso (dias) Colchane&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso (dias) Huara&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Paso a Paso (dias) Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso (dias) Pica&#39;</span><span class="p">,</span> <span class="s1">&#39;Paso a Paso (dias) Pozo Almonte&#39;</span><span class="p">,</span> \
              <span class="s1">&#39;Movilidad Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Movilidad Pica&#39;</span><span class="p">,</span> <span class="s1">&#39;Movilidad Alto Hospicio&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Movilidad Pozo almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Movilidad Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;Notificacion PCR Alto Hospicio&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Notificacion PCR Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;Notificacion PCR Colchane&#39;</span><span class="p">,</span> <span class="s1">&#39;Notificacion PCR Huara&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Notificacion PCR Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Notificacion PCR Pica&#39;</span><span class="p">,</span> <span class="s1">&#39;Notificacion PCR Pozo Almonte&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;BAC Alto Hospicio&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC Colchane&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC Pica&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;BAC Pozo Almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Positividad Alto Hospicio&#39;</span><span class="p">,</span> <span class="s1">&#39;Positividad Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;Positividad Colchane&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Positividad Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;Positividad Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Positividad Pica&#39;</span><span class="p">,</span> <span class="s1">&#39;Positividad Pozo Almonte&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Cobertura de testeo Alto Hospicio&#39;</span><span class="p">,</span> <span class="s1">&#39;Cobertura de testeo Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;Cobertura de testeo Colchane&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Cobertura de testeo Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;Cobertura de testeo Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Cobertura de testeo Pica&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Cobertura de testeo Pozo Almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Oportunidad en notificacion Alto Hospicio&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Oportunidad en notificacion Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;Oportunidad en notificacion Colchane&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Oportunidad en notificacion Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;Oportunidad en notificacion Iquique&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Oportunidad en notificacion Pica&#39;</span><span class="p">,</span> <span class="s1">&#39;Oportunidad en notificacion Pozo Almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos Alto Hospicio&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos Camiña&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos Colchane&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos Huara&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos Pica&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos Pozo Almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos Comuna desconocida&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos total comunal&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos confirmados DEIS Alto Hospicio&#39;</span><span class="p">,</span><span class="s1">&#39;Fallecidos confirmados DEIS Camiña&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos confirmados DEIS Colchane&#39;</span><span class="p">,</span><span class="s1">&#39;Fallecidos confirmados DEIS Huara&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos confirmados DEIS Iquique&#39;</span><span class="p">,</span><span class="s1">&#39;Fallecidos confirmados DEIS Pica&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos confirmados DEIS Pozo Almonte&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos probables DEIS Alto Hospicio&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos probables DEIS Camiña&#39;</span><span class="p">,</span><span class="s1">&#39;Fallecidos probables DEIS Colchane&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos probables DEIS Huara&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos probables DEIS Iquique&#39;</span><span class="p">,</span> <span class="s1">&#39;Fallecidos probables DEIS Pica&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Fallecidos probables DEIS Pozo Almonte&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Positividad media movil *&#39;</span><span class="p">,</span> <span class="s1">&#39;Mortalidad especifica *&#39;</span><span class="p">,</span> <span class="s1">&#39;Crecimiento semanal *&#39;</span><span class="p">,</span> <span class="s1">&#39;Crecimiento diario *&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;UCI ocupacion media movil aprox *&#39;</span><span class="p">,</span> <span class="s1">&#39;UCI error abs *&#39;</span><span class="p">,</span><span class="s1">&#39;Tasa casos nuevos *&#39;</span><span class="p">,</span> <span class="s1">&#39;Positividad antigeno *&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Positividad antigeno media movil *&#39;</span><span class="p">,</span> <span class="s1">&#39;Mortalidad especifica comunal Alto Hospicio *&#39;</span><span class="p">,</span> <span class="s1">&#39;Mortalidad especifica comunal Camiña *&#39;</span><span class="p">,</span>\
              <span class="s1">&#39;Mortalidad especifica comunal Colchane *&#39;</span><span class="p">,</span> <span class="s1">&#39;Mortalidad especifica comunal Huara *&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Mortalidad especifica comunal Iquique *&#39;</span><span class="p">,</span> <span class="s1">&#39;Mortalidad especifica comunal Pica *&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Mortalidad especifica comunal Pozo Almonte *&#39;</span><span class="p">]</span>

<span class="c1">### Redondeamos a solo dos cifras significativas</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">### Pasamos el index (índice) a objeto datetime (fecha) y le asignamos nombre</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>

<span class="c1">### Imprimimos el DataFrame</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Casos confirmados acumulados</th>
      <th>Casos recuperados acumulados</th>
      <th>Casos fallecidos acumulados</th>
      <th>Casos activos confirmados</th>
      <th>Casos activos probables</th>
      <th>Casos nuevos</th>
      <th>Casos nuevos con sintomas</th>
      <th>Casos nuevos sin sintomas</th>
      <th>Casos nuevos por laboratorio</th>
      <th>Casos nuevos por antigeno</th>
      <th>Casos con sospecha de reinfeccion</th>
      <th>Casos recuperados nuevos</th>
      <th>Casos fallecidos nuevos</th>
      <th>Antigenos informados nuevos</th>
      <th>Antigenos informados acumulados</th>
      <th>PCR informados nuevos</th>
      <th>PCR informados acumulados</th>
      <th>Cupos en residencias</th>
      <th>Usuarios en residencias</th>
      <th>Numero de residencias</th>
      <th>UCI habilitadas</th>
      <th>UCI ocupadas por confirmados</th>
      <th>UCI ocupadas por no confirmados</th>
      <th>UCI ocupacion media movil real</th>
      <th>Re regional</th>
      <th>...</th>
      <th>Fallecidos confirmados DEIS Pica</th>
      <th>Fallecidos confirmados DEIS Pozo Almonte</th>
      <th>Fallecidos probables DEIS Alto Hospicio</th>
      <th>Fallecidos probables DEIS Camiña</th>
      <th>Fallecidos probables DEIS Colchane</th>
      <th>Fallecidos probables DEIS Huara</th>
      <th>Fallecidos probables DEIS Iquique</th>
      <th>Fallecidos probables DEIS Pica</th>
      <th>Fallecidos probables DEIS Pozo Almonte</th>
      <th>Positividad media movil *</th>
      <th>Mortalidad especifica *</th>
      <th>Crecimiento semanal *</th>
      <th>Crecimiento diario *</th>
      <th>UCI ocupacion media movil aprox *</th>
      <th>UCI error abs *</th>
      <th>Tasa casos nuevos *</th>
      <th>Positividad antigeno *</th>
      <th>Positividad antigeno media movil *</th>
      <th>Mortalidad especifica comunal Alto Hospicio *</th>
      <th>Mortalidad especifica comunal Camiña *</th>
      <th>Mortalidad especifica comunal Colchane *</th>
      <th>Mortalidad especifica comunal Huara *</th>
      <th>Mortalidad especifica comunal Iquique *</th>
      <th>Mortalidad especifica comunal Pica *</th>
      <th>Mortalidad especifica comunal Pozo Almonte *</th>
    </tr>
    <tr>
      <th>Fecha</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-03-03</th>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-04</th>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-05</th>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-06</th>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-07</th>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2021-06-25</th>
      <td>38,706.00</td>
      <td>37,499.00</td>
      <td>721.00</td>
      <td>468.00</td>
      <td>249.00</td>
      <td>69.00</td>
      <td>50.00</td>
      <td>16.00</td>
      <td>3.00</td>
      <td>9.00</td>
      <td>38.00</td>
      <td>60.00</td>
      <td>4.00</td>
      <td>68.00</td>
      <td>1,327.00</td>
      <td>1,368.00</td>
      <td>413,334.00</td>
      <td>604.00</td>
      <td>401.00</td>
      <td>8.00</td>
      <td>NaN</td>
      <td>53.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>12.0</td>
      <td>22.0</td>
      <td>19.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>68.0</td>
      <td>2.0</td>
      <td>7.0</td>
      <td>4.00</td>
      <td>188.36</td>
      <td>0.81</td>
      <td>1.33</td>
      <td>96.02</td>
      <td>NaN</td>
      <td>16.42</td>
      <td>13.24</td>
      <td>10.26</td>
      <td>131.54</td>
      <td>218.18</td>
      <td>126.34</td>
      <td>233.33</td>
      <td>225.54</td>
      <td>201.41</td>
      <td>126.47</td>
    </tr>
    <tr>
      <th>2021-06-26</th>
      <td>38,790.00</td>
      <td>37,609.00</td>
      <td>724.00</td>
      <td>439.00</td>
      <td>227.00</td>
      <td>84.00</td>
      <td>58.00</td>
      <td>21.00</td>
      <td>5.00</td>
      <td>8.00</td>
      <td>38.00</td>
      <td>110.00</td>
      <td>3.00</td>
      <td>125.00</td>
      <td>1,452.00</td>
      <td>1,156.00</td>
      <td>414,490.00</td>
      <td>604.00</td>
      <td>417.00</td>
      <td>8.00</td>
      <td>NaN</td>
      <td>53.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.00</td>
      <td>189.15</td>
      <td>0.76</td>
      <td>1.22</td>
      <td>96.02</td>
      <td>NaN</td>
      <td>15.68</td>
      <td>6.40</td>
      <td>8.26</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-27</th>
      <td>38,840.00</td>
      <td>37,681.00</td>
      <td>726.00</td>
      <td>415.00</td>
      <td>224.00</td>
      <td>51.00</td>
      <td>37.00</td>
      <td>13.00</td>
      <td>1.00</td>
      <td>8.00</td>
      <td>38.00</td>
      <td>72.00</td>
      <td>2.00</td>
      <td>71.00</td>
      <td>1,523.00</td>
      <td>1,468.00</td>
      <td>415,958.00</td>
      <td>604.00</td>
      <td>429.00</td>
      <td>8.00</td>
      <td>NaN</td>
      <td>53.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.00</td>
      <td>189.67</td>
      <td>0.71</td>
      <td>0.61</td>
      <td>96.25</td>
      <td>NaN</td>
      <td>14.85</td>
      <td>11.27</td>
      <td>6.58</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-28</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-29</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>484 rows × 140 columns</p>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="exportando-informacion">
<h2>Exportando información<a class="headerlink" href="#exportando-informacion" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>Ahora, deberemos exportar la información que trabajamos, y para ello, utilizaremos:</p>
<ul class="simple">
<li><p>Archivos .JSON (archivos ampliamente utilizados en web para intercambiar información entre distintos sitios).</p></li>
<li><p>Archivos .CSV (sí, generaremos un .CSV de datos específico de la Región de Tarapacá a partir de otros .CSV que recopilan datos a nivel nacional).</p></li>
<li><p>Infografías (archivos de imagen); se abordarán a modo explicativo en la presente sección.</p></li>
<li><p>Descripciones regionales.</p></li>
<li><p>Gráficos. Permiten entender una tendencia en segundos; los abordaremos en la siguiente sección.</p></li>
<li><p>Entre otros.</p></li>
</ul>
<p>A continuación, se detalla cada uno de los output (salidas) exportadas (archivos):</p>
<div class="section" id="archivos-json">
<h3>Archivos .JSON<a class="headerlink" href="#archivos-json" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><b>0_dia.json</b></p></li>
</ul>
<p>Resumen de la región del día, con referencia a los últimos registros de todas las variables del DataFrame.</p>
</div>
<div class="section" id="archivos-csv">
<h3>Archivos .CSV<a class="headerlink" href="#archivos-csv" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><b>numeralab.csv</b></p></li>
</ul>
<p>Tabla de datos con todas las variables y registros.</p>
</div>
<div class="section" id="infografias-generadas">
<h3>Infografías generadas<a class="headerlink" href="#infografias-generadas" title="Permalink to this headline">¶</a></h3>
<p>Por lo general, todas las infografías las considero una “burbuja regional”. Mi forma de verlas, desde un principio, fue desarrollar a nivel de la Región de Tarapacá, y luego, en otras regiones. Definitivamente, la contribución hubiese sido enorme si lo hubiese desarrollado a nivel interregional. Sin embargo, la primera versión del código era incapaz de actualizarse (había mucha dependencia en las líneas de código, y hasta incluso, código repetido), por lo que la modificación de una sola línea estropeaba todo el script.</p>
<p>En contraste del párrafo anterior, el presente código es menos dependiente y más eficiente. Por lo que, es posible modificarlo a nivel interregional. El problema es que no cuento con el tiempo de hacerlo, y tampoco creo sea necesario a este nivel de la pandemia. Existen otras muchas contribuciones, como la de Juan Cristóbal Olivares: Para visitarla, busca <a href="https://www.instagram.com/covid19statscl/">covid19statscl</a> en Instagram, que es una plataforma que visualiza la pandemia por regiones, desarrollada por él.</p>
<div class="section" id="como-realizabas-las-infografias-antes-de-automatizar-el-proceso">
<h4>¿Cómo realizabas las infografías antes de automatizar el proceso?<a class="headerlink" href="#como-realizabas-las-infografias-antes-de-automatizar-el-proceso" title="Permalink to this headline">¶</a></h4>
<p>Básicamente, tenía una plantilla hecha en Photoshop, y tenía que modificar todos los días las líneas de texto, copiando y pegando texto, y el mismo proceso era para las imágenes de los gráficos. ¡Me tomaba 30 min.! Era un proceso tedioso y altamente susceptible a equivocaciones. Por dicha razón, realicé el siguiente script, no solo organizando el código y haciéndolo más amigable (dentro de mis posibilidades), sino también, utilizando IPython para modificar las plantillas y de esa forma, reducir considerablemente el proceso de elaboración de los informes (o infografías, como lo desees ver). Es más, desde los 30 min., el proceso actual demora aprox. 20 a 30s. en rellenar los campos, y otros 10 a 15s. en hacer el proceso manual de subir el reporte a Instagram.</p>
</div>
<div class="section" id="por-que-no-automatizaste-el-proceso-de-subida-a-instagram">
<h4>¿Por qué no automatizaste el proceso de subida a Instagram?<a class="headerlink" href="#por-que-no-automatizaste-el-proceso-de-subida-a-instagram" title="Permalink to this headline">¶</a></h4>
<p>Por miedo y en parte, desconocimiento. Instagram no es amigo de los bots, por lo que opté por evitar automatizar la subida a Instagram (y de esa forma, evitar ser baneado).</p>
</div>
<div class="section" id="cuantas-infografias-generaste">
<h4>¿Cuántas infografías generaste?<a class="headerlink" href="#cuantas-infografias-generaste" title="Permalink to this headline">¶</a></h4>
<p>Las expongo a continuación:</p>
<ul class="simple">
<li><p><b>Reporte diario</b></p></li>
</ul>
<p>El más numeroso en la cuenta de Instagram. Es el reporte diario del COVID-19, con el que comenzó Numeral.lab; está basado en el reporte diario del Ministerio de Salud, ahondando con mayor profundidad en los indicadores epidemiológicos.</p>
<ul class="simple">
<li><p><b>Indicador de fase</b></p></li>
</ul>
<p>El plan Paso a Paso y la capacidad de poder “predecirlo”. El indicador de fase surgió como una idea de saber, qué tan cerca o qué tan distantes se estaba de los avances o retrocesos de fase, en términos de confinamiento o desconfinamiento. La idea original la desarrollé un día por la noche, e hizo boom en redes sociales. El miembro del comité científico COVID-19 de la Universidad Arturo Prat, el Dr. Cristóbal Corral, fue capaz de explicarlo brevemente a los medios: Un termómetro del Paso a Paso.</p>
<p>La primera versión de este reporte fue subida por última vez el 12/05/2021, que fue la 36° edición <span id="id6">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id5">Din21</a>]</span>. Consistía en una aproximación provincial, es decir, una generalización en torno a las comunas de Iquique o del Tamarugal. ¿Cómo se realizaba el cálculo? Pues, no había cálculo (más que obtener o trabajar los datos disponibles), sino que, se basaba en condicionales (o restricciones): Si se cumplen todos los indicadores, se puede estar en tal fase del plan Paso a Paso por provincia. Evidentemente, no era del todo certero, particularmente, porque no consideraba variables temporales. <a class="footnote-reference brackets" href="#numeralab-indicadorfase" id="id7">2</a></p>
<p>La segunda versión de este reporte fue subida, inicialmente, el 02/05/2021, que fue la 37° edición. Fue procesada en el siguiente script (This is the way 2), y se basa en un problema de clasificación. Para mayor información del cómo funciona y  sus fundamentos, recomiendo ver el siguiente notebook.</p>
<ul class="simple">
<li><p><b>Reporte comunal</b></p></li>
</ul>
<p>El reporte comunal es, posiblemente, el reporte más simple de todos: Es un reporte que entrega la situación comunal en torno a los cambios del plan Paso a Paso, como también, los casos activos de COVID-19 por comuna, de acuerdo al informe epidemiológico.</p>
<ul class="simple">
<li><p><b>Balance de vacunas</b></p></li>
</ul>
<p>En período de práctica, me vi en la necesidad de hacer nuevas cosas. En diciembre de 2020 y enero de 2021 era alta la expectativa respecto a la campaña de vacunación “Yo me vacuno” impulsada por el Ministerio de Salud. Ello coincidió con que Juan Cristóbal Olivares, ingeniero de Amazon, contribuyó en el repositorio del MICITEC con un “dataproduct” (datos) de vacunación a nivel nacional. Entonces, haciendo uso de su contribución, desarrollé el “Avance de vacunas”, luego denominado “Balance vacunas”.</p>
<p>En un principio, brindaba la comparativa regional en torno al proceso de vacunación de forma estandarizada. Sin embargo, luego lo modifiqué para que, tal como el reporte diario, difundiese información sobre el proceso de vacunación a nivel regional.</p>
</div>
</div>
<div class="section" id="csv">
<h3>CSV<a class="headerlink" href="#csv" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exportando información</span>

<span class="c1">### df a csv (numeral.csv) ###</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/numeralab.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">### Índices</span>
<span class="n">weekstart_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">weekend_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span>
<span class="n">weekend_datay</span> <span class="o">=</span> <span class="n">weekend_data</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">weekstart2_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>

<span class="c1">### Cifras región</span>

<span class="c1">### Balance semanal de casos ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados nuevos&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos nuevos&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]</span>
              <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Casos nuevos últimos siete días&#39;</span><span class="p">,</span> <span class="s1">&#39;Recuperados nuevos últimos siete días&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Fallecidos nuevos últimos siete días&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data1.csv&#39;</span><span class="p">)</span>

<span class="c1">### Balance semanal de activos ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos confirmados&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos probables&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]</span>
             <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Casos activos confirmados últimos siete días&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos activos probables últimos siete días&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data2.csv&#39;</span><span class="p">)</span>

<span class="c1">### Balance histórico de casos ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados nuevos&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos nuevos&#39;</span><span class="p">]</span>
              <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Casos nuevos históricos&#39;</span><span class="p">,</span> <span class="s1">&#39;Recuperados nuevos históricos&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Fallecidos nuevos históricos&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data3.csv&#39;</span><span class="p">)</span>

<span class="c1">### Balance histórico de activos ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos confirmados&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos probables&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos probables&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos probables&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data4.csv&#39;</span><span class="p">)</span>

<span class="c1">### Balance histórico de casos acumulados ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos confirmados acumulados&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados acumulados&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos confirmados&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos acumulados&#39;</span><span class="p">]]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data5.csv&#39;</span><span class="p">)</span>

<span class="c1">### Tendencia región</span>

<span class="c1">### Casos ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
              <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Media móvil semanal de casos nuevos&#39;</span><span class="p">,</span> <span class="s1">&#39;Media móvil semanal de recuperados nuevos&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Media móvil semanal de fallecidos nuevos&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data6.csv&#39;</span><span class="p">)</span>

<span class="c1">### Positividad ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Positividad diaria&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Positividad media movil *&#39;</span><span class="p">]]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data7.csv&#39;</span><span class="p">)</span>

<span class="c1">### Número de reproducción efectivo ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Re regional&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Re Iquique&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Re Tamarugal&#39;</span><span class="p">]]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data8.csv&#39;</span><span class="p">)</span>

<span class="c1">### Tasa de crecimiento diaria y media móvil semanal ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Crecimiento diario *&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Crecimiento semanal *&#39;</span><span class="p">]]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data9.csv&#39;</span><span class="p">)</span>

<span class="c1">### Por comuna</span>

<span class="c1">### Histórico de casos ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Casos acumulados en&#39;</span><span class="p">)]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data10.csv&#39;</span><span class="p">)</span>

<span class="c1">### Positividad ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Positividad&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                    <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;diaria&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                    <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;movil&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                    <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;antigeno&#39;</span><span class="p">)]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data11.csv&#39;</span><span class="p">)</span>

<span class="c1">### Activos ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;activos&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                    <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;confirmados&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                    <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;probables&#39;</span><span class="p">)]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data12.csv&#39;</span><span class="p">)</span>

<span class="c1">### Fallecidos no procesados por DEIS ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos&#39;</span><span class="p">)</span> 
      <span class="o">&amp;</span> <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos confirmados&#39;</span><span class="p">)</span>
      <span class="o">&amp;</span> <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos probables&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data13.csv&#39;</span><span class="p">)</span>

<span class="c1">### Fallecidos procesados por DEIS, confirmados ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos&#39;</span><span class="p">)</span> 
      <span class="o">&amp;</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos confirmados&#39;</span><span class="p">)</span>
      <span class="o">&amp;</span> <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos probables&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data14.csv&#39;</span><span class="p">)</span>

<span class="c1">### Fallecidos procesados por DEIS, probables ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos&#39;</span><span class="p">)</span> 
      <span class="o">&amp;</span> <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos confirmados&#39;</span><span class="p">)</span>
      <span class="o">&amp;</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Fallecidos probables&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data15.csv&#39;</span><span class="p">)</span>


<span class="c1">### Red asistencial</span>

<span class="c1">### UCI real y aproximada ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil real&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil aprox *&#39;</span><span class="p">]</span>
             <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Media móvil real de ocupación UCI&#39;</span><span class="p">,</span> <span class="s1">&#39;Media móvil hipotética de ocupación UCI&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data16.csv&#39;</span><span class="p">)</span>

<span class="c1">### Residencias sanitarias ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;residencias&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Numero&#39;</span><span class="p">)]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data17.csv&#39;</span><span class="p">)</span>

<span class="c1">### Detalle de muestra y otros datos segregados</span>

<span class="c1">### PCR ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;PCR informados nuevos&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PCR informados nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
             <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PCR informados nuevos&#39;</span><span class="p">,</span> <span class="s1">&#39;Media móvil semanal de PCR informados nuevos&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data18.csv&#39;</span><span class="p">)</span>

<span class="c1">### Antígeno ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Antigenos informados nuevos&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Antigenos informados nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
             <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Antígenos informados nuevos&#39;</span><span class="p">,</span> <span class="s1">&#39;Media móvil semanal de antígenos informados nuevos&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data19.csv&#39;</span><span class="p">)</span>

<span class="c1">### Detalle de casos nuevos ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos con sintomas&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos sin sintomas&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos por laboratorio&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos por antigeno&#39;</span><span class="p">]</span>
             <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Casos nuevos con síntomas&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos nuevos sin síntomas&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;Casos nuevos por laboratorio&#39;</span><span class="p">,</span> <span class="s1">&#39;Casos nuevos por antígeno&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data20.csv&#39;</span><span class="p">)</span>

<span class="c1">### Detalle de casos nuevos con sospecha de reinfección ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos con sospecha de reinfeccion&#39;</span><span class="p">]</span>
             <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Casos con sospecha de reinfección&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data21.csv&#39;</span><span class="p">)</span>

<span class="c1">### Tasa de casos nuevos por cien mil habitantes en media móvil semanal ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tasa casos nuevos *&#39;</span><span class="p">]</span>
             <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Tasa de casos nuevos de casos nuevos por cien mil habitantes&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data22.csv&#39;</span><span class="p">)</span>

<span class="c1">### Mortalidad específica ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Mortalidad especifica *&#39;</span><span class="p">]</span>
             <span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Mortalidad específica por cien mil habitantes&#39;</span><span class="p">]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data23.csv&#39;</span><span class="p">)</span>

<span class="c1">### Mortalidad específica por comuna ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Mortalidad especifica comunal *&#39;</span><span class="p">)])</span>
              <span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data24.csv&#39;</span><span class="p">)</span>

<span class="c1">### Vacunación ###</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 1° dosis&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">],</span>
              <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados unica dosis&#39;</span><span class="p">]]</span>
              <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/data25.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="reporte-diario">
<h3>Reporte diario<a class="headerlink" href="#reporte-diario" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Infografías generadas</span>

<span class="c1">### Reporte diario ###</span>

<span class="c1">### Cambios</span>
<span class="n">cambios</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;• Ninguno.&quot;&quot;&quot;</span>

<span class="c1">### Fecha</span>
<span class="n">fecha_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> de %B de %Y&#39;</span><span class="p">)</span>

<span class="c1">### Casos nuevos confirmados y acumulados</span>
<span class="n">casos_hoy</span><span class="p">,</span> <span class="n">consintomas_hoy</span><span class="p">,</span> <span class="n">sinsintomas_hoy</span><span class="p">,</span> <span class="n">porlaboratorio_hoy</span><span class="p">,</span> <span class="n">casosacumulados_hoy</span><span class="p">,</span> <span class="n">antigeno_hoy</span><span class="p">,</span> <span class="n">reinfeccion_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos con sintomas&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos sin sintomas&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos por laboratorio&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos confirmados acumulados&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos por antigeno&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos con sospecha de reinfeccion&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]</span>

<span class="c1">### Casos recuperados nuevos y acumulados</span>
<span class="n">recuperados_hoy</span><span class="p">,</span> <span class="n">recuperadosacumulados_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados nuevos&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados acumulados&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]</span>

<span class="c1">### Casos fallecidos nuevos y acumulados</span>
<span class="n">fallecidosnuevos_hoy</span><span class="p">,</span> <span class="n">fallecidosacumulados_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos nuevos&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos acumulados&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]</span>

<span class="c1">### PCR informados nuevos y acumulados</span>
<span class="n">pcrnuevos_hoy</span><span class="p">,</span> <span class="n">pcracumulados_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PCR informados nuevos&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PCR informados acumulados&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]</span>

<span class="c1">### Residencias</span>
<span class="n">residenciasnumero_hoy</span><span class="p">,</span> <span class="n">residenciasusuarios_hoy</span><span class="p">,</span> <span class="n">residenciascupos_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Numero de residencias&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Usuarios en residencias&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Cupos en residencias&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]</span>

<span class="c1">### Activos confirmados y probables</span>
<span class="n">activos_hoy</span><span class="p">,</span> <span class="n">activosprobables_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos confirmados&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos probables&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]</span>

<span class="c1">### UCI diaria y ocupacion uci aproximada</span>
<span class="n">ucidiaria_hoy</span><span class="p">,</span> <span class="n">uciaprox_hoy</span><span class="p">,</span> <span class="n">errorabs_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupadas por confirmados&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="nb">round</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil aprox *&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="mi">1</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI error abs *&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI error abs *&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1">### Positividad diaria y móvil</span>
<span class="n">positividad_hoy</span><span class="p">,</span> <span class="n">positividadmovil_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Positividad diaria&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Positividad media movil *&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]</span>

<span class="c1">### Mortalidad especifica, Re, tasa casos nuevos y crecimiento</span>
<span class="n">me_hoy</span><span class="p">,</span> <span class="n">reregional_hoy</span><span class="p">,</span> <span class="n">tasanuevos_hoy</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Mortalidad especifica *&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Re regional&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Re regional&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> <span class="nb">round</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Tasa casos nuevos *&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1">### Tendencia curva</span>
<span class="n">crecimientodiario_hoy</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Crecimiento diario *&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="n">crecimientodiario_hoy</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">situacioncurva_hoy</span> <span class="o">=</span> <span class="s2">&quot;curva de contagios a la baja&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">crecimientodiario_hoy</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">situacioncurva_hoy</span> <span class="o">=</span> <span class="s2">&quot;curva de contagios sin cambios&quot;</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="n">situacioncurva_hoy</span> <span class="o">=</span> <span class="s2">&quot;curva de contagios al alza&quot;</span>

<span class="c1">### Proceso de vacunación a población objetivo objetivo</span>
<span class="n">procesovacunacion_hoy</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()])</span><span class="o">/</span><span class="p">(</span><span class="n">poblacion</span><span class="o">*</span><span class="mf">0.8</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
<span class="n">procesovacunaciontotales_hoy</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()])</span>

<span class="c1">### Número de edición</span>
<span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">27</span><span class="p">)</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">d3</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> 
                       <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> 
                       <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
<span class="n">ed_hoy</span> <span class="o">=</span> <span class="p">(</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">+</span> <span class="p">(</span><span class="n">d3</span> <span class="o">-</span> <span class="n">d2</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>
<span class="n">ed_hoy</span> <span class="o">=</span> <span class="p">(</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">+</span> <span class="p">(</span><span class="n">d3</span> <span class="o">-</span> <span class="n">d2</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>

<span class="c1">### Valores de hoy a integer</span>
<span class="n">casos_hoy</span><span class="p">,</span> <span class="n">consintomas_hoy</span><span class="p">,</span> <span class="n">sinsintomas_hoy</span><span class="p">,</span> <span class="n">porlaboratorio_hoy</span><span class="p">,</span> <span class="n">casosacumulados_hoy</span><span class="p">,</span> <span class="n">antigeno_hoy</span><span class="p">,</span> <span class="n">reinfeccion_hoy</span><span class="p">,</span> \
<span class="n">recuperados_hoy</span><span class="p">,</span> <span class="n">recuperadosacumulados_hoy</span><span class="p">,</span> \
<span class="n">fallecidosnuevos_hoy</span><span class="p">,</span> <span class="n">fallecidosacumulados_hoy</span><span class="p">,</span> \
<span class="n">pcrnuevos_hoy</span><span class="p">,</span> <span class="n">pcracumulados_hoy</span><span class="p">,</span> \
<span class="n">residenciasnumero_hoy</span><span class="p">,</span> <span class="n">residenciasusuarios_hoy</span><span class="p">,</span> <span class="n">residenciascupos_hoy</span><span class="p">,</span> \
<span class="n">activos_hoy</span><span class="p">,</span> <span class="n">activosprobables_hoy</span><span class="p">,</span> \
<span class="n">ucidiaria_hoy</span><span class="p">,</span> \
<span class="n">positividad_hoy</span><span class="p">,</span> <span class="n">positividadmovil_hoy</span><span class="p">,</span> \
<span class="n">me_hoy</span><span class="p">,</span> <span class="n">procesovacunacion_hoy</span><span class="p">,</span> <span class="n">procesovacunaciontotales_hoy</span><span class="p">,</span>\
<span class="n">ed_hoy</span> <span class="o">=</span> \
<span class="p">[</span> <span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="s1">&#39;,d&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span>
<span class="n">casos_hoy</span><span class="p">,</span> <span class="n">consintomas_hoy</span><span class="p">,</span> <span class="n">sinsintomas_hoy</span><span class="p">,</span> <span class="n">porlaboratorio_hoy</span><span class="p">,</span> <span class="n">casosacumulados_hoy</span><span class="p">,</span> <span class="n">antigeno_hoy</span><span class="p">,</span> <span class="n">reinfeccion_hoy</span><span class="p">,</span> \
<span class="n">recuperados_hoy</span><span class="p">,</span> <span class="n">recuperadosacumulados_hoy</span><span class="p">,</span> \
<span class="n">fallecidosnuevos_hoy</span><span class="p">,</span> <span class="n">fallecidosacumulados_hoy</span><span class="p">,</span> \
<span class="n">pcrnuevos_hoy</span><span class="p">,</span> <span class="n">pcracumulados_hoy</span><span class="p">,</span> \
<span class="n">residenciasnumero_hoy</span><span class="p">,</span> <span class="n">residenciasusuarios_hoy</span><span class="p">,</span> <span class="n">residenciascupos_hoy</span><span class="p">,</span> \
<span class="n">activos_hoy</span><span class="p">,</span> <span class="n">activosprobables_hoy</span><span class="p">,</span> \
<span class="n">ucidiaria_hoy</span><span class="p">,</span> \
<span class="n">positividad_hoy</span><span class="p">,</span> <span class="n">positividadmovil_hoy</span><span class="p">,</span> \
<span class="n">me_hoy</span><span class="p">,</span> <span class="n">procesovacunacion_hoy</span><span class="p">,</span> <span class="n">procesovacunaciontotales_hoy</span><span class="p">,</span>\
<span class="n">ed_hoy</span><span class="p">]]</span>

<span class="c1">### Datos de ayer ###</span>

<span class="c1">### Casos nuevos confirmados y acumulados</span>
<span class="n">casos_ayer</span><span class="p">,</span> <span class="n">consintomas_ayer</span><span class="p">,</span> <span class="n">sinsintomas_ayer</span><span class="p">,</span> <span class="n">porlaboratorio_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos con sintomas&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos sin sintomas&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos por laboratorio&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### Casos recuperados nuevos y acumulados</span>
<span class="n">recuperados_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados nuevos&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### Casos fallecidos nuevos y acumulados</span>
<span class="n">fallecidosnuevos_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos nuevos&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### PCR informados nuevos y acumulados</span>
<span class="n">pcrnuevos_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;PCR informados nuevos&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### Residencias</span>
<span class="n">residenciasusuarios_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Usuarios en residencias&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### Activos confirmados y probables</span>
<span class="n">activos_ayer</span><span class="p">,</span> <span class="n">activosprobables_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos confirmados&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos probables&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### UCI diaria y ocupacion uci aproximada</span>
<span class="n">ucidiaria_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil aprox *&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### Positividad diaria y móvil</span>
<span class="n">positividad_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Positividad diaria&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### Mortalidad especifica, Re y tasa casos nuevos</span>
<span class="n">me_ayer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Mortalidad especifica *&#39;</span><span class="p">][</span><span class="n">weekend_datay</span><span class="p">]</span>

<span class="c1">### Proceso de vacunación de población objetivo</span>
<span class="n">procesovacunacion_ayer</span> <span class="o">=</span> <span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">-</span><span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span><span class="o">/</span><span class="p">(</span><span class="n">poblacion</span><span class="o">*</span><span class="mf">0.8</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>

<span class="c1">### Valores de ayer a integer</span>
<span class="n">casos_ayer</span><span class="p">,</span> <span class="n">consintomas_ayer</span><span class="p">,</span> <span class="n">sinsintomas_ayer</span><span class="p">,</span> <span class="n">porlaboratorio_ayer</span><span class="p">,</span> \
<span class="n">recuperados_ayer</span><span class="p">,</span> \
<span class="n">fallecidosnuevos_ayer</span><span class="p">,</span> \
<span class="n">pcrnuevos_ayer</span><span class="p">,</span> \
<span class="n">residenciasusuarios_ayer</span><span class="p">,</span> \
<span class="n">activos_ayer</span><span class="p">,</span> <span class="n">activosprobables_ayer</span><span class="p">,</span> \
<span class="n">ucidiaria_ayer</span><span class="p">,</span> \
<span class="n">positividad_ayer</span><span class="p">,</span> \
<span class="n">me_ayer</span><span class="p">,</span> <span class="n">procesovacunacion_ayer</span>\
<span class="o">=</span> \
<span class="p">[</span> <span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="s1">&#39;,d&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span>
<span class="n">casos_ayer</span><span class="p">,</span> <span class="n">consintomas_ayer</span><span class="p">,</span> <span class="n">sinsintomas_ayer</span><span class="p">,</span> <span class="n">porlaboratorio_ayer</span><span class="p">,</span> \
<span class="n">recuperados_ayer</span><span class="p">,</span> \
<span class="n">fallecidosnuevos_ayer</span><span class="p">,</span> \
<span class="n">pcrnuevos_ayer</span><span class="p">,</span> \
<span class="n">residenciasusuarios_ayer</span><span class="p">,</span> \
<span class="n">activos_ayer</span><span class="p">,</span> <span class="n">activosprobables_ayer</span><span class="p">,</span> \
<span class="n">ucidiaria_ayer</span><span class="p">,</span> \
<span class="n">positividad_ayer</span><span class="p">,</span> \
<span class="n">me_ayer</span><span class="p">,</span> <span class="n">procesovacunacion_ayer</span><span class="p">]]</span>

<span class="c1">### Descripción</span>
<span class="n">desc1</span> <span class="o">=</span> \
<span class="sd">&quot;&quot;&quot;Reporte DIARIO, {} 🕑. \n</span>
<span class="sd">• Infectados {} casos nuevos de los cuales {} con síntomas, {} sin síntomas y {} sin notificar, dando un total de {} casos confirmados. Adicionalmente, {} casos nuevos confirmados por antígeno y {} casos totales con sospecha de reinfección. 🦠</span>
<span class="sd">• Recuperadas {} personas, sumando {} recuperados totales. 💪</span>
<span class="sd">• Perdieron la vida {} persona(s), sumando {} fallecidos totales. Nuestro profundo pésame a las familias. 🕊️</span>
<span class="sd">• Informados {} exámenes PCR dando un total de {} exámenes PCR totales en la región. 🌡️</span>
<span class="sd">• Respecto a residencias sanitarias, {} recintos de hospedaje con {} cupos, de los cuales {} están utilizados. 🏨</span>
<span class="sd">• Se reportaron {} casos activos y {} activos probables. 🧪</span>
<span class="sd">• La tasa de crecimiento es del {}: {}.</span>
<span class="sd">• Hasta ayer, {} pacientes en unidad de cuidados intensivos con COVID-19 confirmado. Esto nos da una ocupación UCI media móvil semanal aproximada del {}% ± {}%. 🆘</span>
<span class="sd">• La positividad de casos PCR fue del {}%. Asimismo, una positividad media móvil semanal del {}%. 😷</span>
<span class="sd">• De cada cien mil habitantes en la región, {} fallecen por COVID-19. 😵</span>
<span class="sd">• El Re Regional corresponde a {}. 💊</span>
<span class="sd">• La tasa de casos nuevos (media móvil semanal por cien mil habitantes) corresponde a {}. 💦</span>
<span class="sd">• En el proceso de vacunación, {}% vacunados de la población objetivo (el valor de personas inoculadas con segunda dosis es de {} personas). 💦</span>

<span class="sd">*Fuente desde Min. de Ciencia y Tecnología, ICOVIDCHILE y @juancriolivares</span>
<span class="sd">*La ocupación UCI es una aproximación de la situación de camas críticas regionales.</span>
<span class="sd">*Datos actualizados hasta las 21 hrs. del día anterior.</span>

<span class="sd">[ CAMBIOS EN LA {}° EDICION ⚙️ ]</span>
<span class="sd">{}</span>

<span class="sd">[ INFORMACIÓN ADICIONAL Y FE DE ERRATAS 🌌 ]</span>
<span class="sd">• Reporte generado de forma automática. Si encuentras algún error o sugerencia, ¡comenta!</span>
<span class="sd">• Autor: Alejandro Dinamarca.</span>

<span class="sd">¡A cuidarse Tarapacá! 😉&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fecha_hoy</span><span class="p">,</span> \
                                   <span class="n">casos_hoy</span><span class="p">,</span> <span class="n">consintomas_hoy</span><span class="p">,</span> <span class="n">sinsintomas_hoy</span><span class="p">,</span> <span class="n">porlaboratorio_hoy</span><span class="p">,</span> <span class="n">casosacumulados_hoy</span><span class="p">,</span> <span class="n">antigeno_hoy</span><span class="p">,</span> <span class="n">reinfeccion_hoy</span><span class="p">,</span> \
                                   <span class="n">recuperados_hoy</span><span class="p">,</span> <span class="n">recuperadosacumulados_hoy</span><span class="p">,</span> \
                                   <span class="n">fallecidosnuevos_hoy</span><span class="p">,</span> <span class="n">fallecidosacumulados_hoy</span><span class="p">,</span> \
                                   <span class="n">pcrnuevos_hoy</span><span class="p">,</span> <span class="n">pcracumulados_hoy</span><span class="p">,</span> \
                                   <span class="n">residenciasnumero_hoy</span><span class="p">,</span> <span class="n">residenciascupos_hoy</span><span class="p">,</span> <span class="n">residenciasusuarios_hoy</span><span class="p">,</span> \
                                   <span class="n">activos_hoy</span><span class="p">,</span> <span class="n">activosprobables_hoy</span><span class="p">,</span> \
                                   <span class="n">crecimientodiario_hoy</span><span class="p">,</span> <span class="n">situacioncurva_hoy</span><span class="p">,</span> \
                                   <span class="n">ucidiaria_hoy</span><span class="p">,</span> <span class="n">uciaprox_hoy</span><span class="p">,</span> <span class="n">errorabs_hoy</span><span class="p">,</span> \
                                   <span class="n">positividad_hoy</span><span class="p">,</span> <span class="n">positividadmovil_hoy</span><span class="p">,</span> \
                                   <span class="n">me_hoy</span><span class="p">,</span> <span class="n">reregional_hoy</span><span class="p">,</span> <span class="n">tasanuevos_hoy</span><span class="p">,</span> <span class="n">procesovacunacion_hoy</span><span class="p">,</span> <span class="n">procesovacunaciontotales_hoy</span><span class="p">,</span>\
                                   <span class="n">ed_hoy</span><span class="p">,</span> <span class="n">cambios</span><span class="p">)</span>

<span class="c1">## Imprimimos</span>
<span class="nb">print</span><span class="p">(</span><span class="n">desc1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Reporte DIARIO, 27 de junio de 2021 🕑. 

• Infectados 51 casos nuevos de los cuales 37 con síntomas, 13 sin síntomas y 1 sin notificar, dando un total de 38,840 casos confirmados. Adicionalmente, 8 casos nuevos confirmados por antígeno y 38 casos totales con sospecha de reinfección. 🦠
• Recuperadas 72 personas, sumando 37,681 recuperados totales. 💪
• Perdieron la vida 2 persona(s), sumando 726 fallecidos totales. Nuestro profundo pésame a las familias. 🕊️
• Informados 1,468 exámenes PCR dando un total de 415,958 exámenes PCR totales en la región. 🌡️
• Respecto a residencias sanitarias, 8 recintos de hospedaje con 604 cupos, de los cuales 429 están utilizados. 🏨
• Se reportaron 415 casos activos y 224 activos probables. 🧪
• La tasa de crecimiento es del 0.61: curva de contagios a la baja.
• Hasta ayer, 53 pacientes en unidad de cuidados intensivos con COVID-19 confirmado. Esto nos da una ocupación UCI media móvil semanal aproximada del 96.2% ± 0.5%. 🆘
• La positividad de casos PCR fue del 3%. Asimismo, una positividad media móvil semanal del 4%. 😷
• De cada cien mil habitantes en la región, 189 fallecen por COVID-19. 😵
• El Re Regional corresponde a 0.95. 💊
• La tasa de casos nuevos (media móvil semanal por cien mil habitantes) corresponde a 14.8. 💦
• En el proceso de vacunación, 56% vacunados de la población objetivo (el valor de personas inoculadas con segunda dosis es de 171,650 personas). 💦

*Fuente desde Min. de Ciencia y Tecnología, ICOVIDCHILE y @juancriolivares
*La ocupación UCI es una aproximación de la situación de camas críticas regionales.
*Datos actualizados hasta las 21 hrs. del día anterior.

[ CAMBIOS EN LA 365° EDICION ⚙️ ]
• Ninguno.

[ INFORMACIÓN ADICIONAL Y FE DE ERRATAS 🌌 ]
• Reporte generado de forma automática. Si encuentras algún error o sugerencia, ¡comenta!
• Autor: Alejandro Dinamarca.

¡A cuidarse Tarapacá! 😉
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="balance-de-vacunas">
<h3>Balance de vacunas<a class="headerlink" href="#balance-de-vacunas" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Balance vacunas ###</span>

<span class="c1">### Cambios</span>
<span class="n">cambios</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;• Ninguno&quot;&quot;&quot;</span>

<span class="c1">### Número de edición</span>
<span class="n">ed_vacuna</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ed_hoy</span><span class="p">)</span><span class="o">/</span><span class="mi">7</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1">### Descripción</span>
<span class="n">desc2</span> <span class="o">=</span> \
<span class="sd">&quot;&quot;&quot;Balance VACUNAS, {}. 🕑 </span>

<span class="sd">• El {}% de la población objetivo ha completado su proceso de vacunación en Tarapacá. El total es de {} personas innoculadas con segunda dosis.</span>

<span class="sd">*Información proporcionada por Juan Cristobal Olivares (@juancriolivares), COVID-19 Vaccination.</span>

<span class="sd">[ CAMBIOS EN LA {}° EDICION ⚙️ ]</span>
<span class="sd">{}</span>

<span class="sd">[ INFORMACIÓN ADICIONAL Y FE DE ERRATAS 🌌 ]</span>
<span class="sd">• Reporte generado de forma automática. Si encuentras algún error o sugerencia, ¡comenta!</span>
<span class="sd">• Autor: Alejandro Dinamarca.</span>

<span class="sd">¡A cuidarse Tarapacá! 😉</span>
<span class="sd">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fecha_hoy</span><span class="p">,</span> <span class="n">procesovacunacion_hoy</span><span class="p">,</span> <span class="n">procesovacunaciontotales_hoy</span><span class="p">,</span> <span class="n">ed_vacuna</span><span class="p">,</span> <span class="n">cambios</span><span class="p">)</span>

<span class="c1">## Imprimimos</span>
<span class="nb">print</span><span class="p">(</span><span class="n">desc2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Balance VACUNAS, 27 de junio de 2021. 🕑 

• El 56% de la población objetivo ha completado su proceso de vacunación en Tarapacá. El total es de 171,650 personas innoculadas con segunda dosis.

*Información proporcionada por Juan Cristobal Olivares (@juancriolivares), COVID-19 Vaccination.

[ CAMBIOS EN LA 53° EDICION ⚙️ ]
• Ninguno

[ INFORMACIÓN ADICIONAL Y FE DE ERRATAS 🌌 ]
• Reporte generado de forma automática. Si encuentras algún error o sugerencia, ¡comenta!
• Autor: Alejandro Dinamarca.

¡A cuidarse Tarapacá! 😉
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="indicador-de-fase">
<h3>Indicador de fase<a class="headerlink" href="#indicador-de-fase" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%capture</span>

<span class="c1">### Ejecutamos notebook 2</span>
<span class="o">%</span><span class="n">run</span> <span class="mi">2</span><span class="n">_thisistheway</span><span class="o">.</span><span class="n">ipynb</span>

<span class="c1">### Ejecutamos notebook 3</span>
<span class="o">%</span><span class="n">run</span> <span class="mi">3</span><span class="n">_thisistheway</span><span class="o">.</span><span class="n">ipynb</span>

<span class="c1">### Ejecutamos notebook 4</span>
<span class="o">%</span><span class="n">run</span> <span class="o">./../</span><span class="mi">4</span><span class="n">_legado</span><span class="o">/</span><span class="mi">1</span><span class="n">_legado</span><span class="o">.</span><span class="n">ipynb</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Cambios</span>
<span class="n">cambios</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;• Ninguno&quot;&quot;&quot;</span>

<span class="c1">### Número de edición</span>
<span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span>
<span class="n">d3</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> 
                       <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> 
                       <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
<span class="n">ed_indicador</span> <span class="o">=</span> <span class="p">(</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="o">/</span><span class="mf">7.8</span> <span class="o">+</span> <span class="p">(</span><span class="n">d3</span> <span class="o">-</span> <span class="n">d2</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="o">/</span><span class="mf">7.8</span>
<span class="n">ed_indicador</span> <span class="o">=</span> <span class="p">(</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="o">/</span><span class="mf">7.8</span> <span class="o">+</span> <span class="p">(</span><span class="n">d3</span> <span class="o">-</span> <span class="n">d2</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="o">/</span><span class="mf">7.8</span>
<span class="n">ed_indicador</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ed_indicador</span><span class="p">)</span>

<span class="c1">### Descripción</span>
<span class="n">pred</span> <span class="o">=</span> <span class="s1">&#39;Indicador FASE, </span><span class="si">{}</span><span class="s1">. 🕑&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fecha_hoy</span><span class="p">)</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="n">pred</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">result</span>

<span class="n">pred</span> <span class="o">+=</span> <span class="s2">&quot;&quot;&quot;</span>

<span class="s2">[ CAMBIOS EN LA </span><span class="si">{}</span><span class="s2">° EDICION ⚙️ ]</span>

<span class="si">{}</span><span class="s2"></span>

<span class="s2">[ INFORMACIÓN ADICIONAL Y FE DE ERRATAS 🌌 ]</span>

<span class="s2">• Reporte generado de forma automática. Si encuentras algún error o sugerencia, ¡comenta!</span>

<span class="s2">• Autor: Alejandro Dinamarca.</span>

<span class="s2">• Para mayor información del funcionamiento del algoritmo, visitar el sitio adinamarca.github.io</span>

<span class="s2">¡A cuidarse Tarapacá! 😉</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ed_indicador</span><span class="p">,</span> <span class="n">cambios</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">pred</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>Indicador FASE, 27 de junio de 2021. 🕑</p>
<ul class="simple">
<li><p>De acuerdo al algoritmo, y con un <strong>98.694%</strong> de probabilidad, <strong>Alto Hospicio</strong> debería estar en <b style="color:orange">Transición</b>.
Actualmente, la comuna registra 43 días en <b style="color:orange">Transición</b>.</p></li>
<li><p>De acuerdo al algoritmo, y con un <strong>98.002%</strong> de probabilidad, <strong>Camiña</strong> debería estar en <b style="color:orange">Transición</b>.
Actualmente, la comuna registra 59 días en <b style="color:orange">Transición</b>.</p></li>
<li><p>De acuerdo al algoritmo, y con un <strong>97.492%</strong> de probabilidad, <strong>Colchane</strong> debería estar en <b style="color:dodgerblue">Apertura Inicial</b>.
Actualmente, la comuna registra 43 días en <b style="color:dodgerblue">Apertura Inicial</b>.</p></li>
<li><p>De acuerdo al algoritmo, y con un <strong>99.764%</strong> de probabilidad, <strong>Huara</strong> debería estar en <b style="color:gold">Preparación</b>.
Actualmente, la comuna registra 54 días en <b style="color:gold">Preparación</b>.</p></li>
<li><p>De acuerdo al algoritmo, y con un <strong>98.172%</strong> de probabilidad, <strong>Iquique</strong> debería estar en <b style="color:orange">Transición</b>.
Actualmente, la comuna registra 43 días en <b style="color:orange">Transición</b>.</p></li>
<li><p>De acuerdo al algoritmo, y con un <strong>98.972%</strong> de probabilidad, <strong>Pica</strong> debería estar en <b style="color:orange">Transición</b>.
Actualmente, la comuna registra 85 días en <b style="color:orange">Transición</b>.</p></li>
<li><p>De acuerdo al algoritmo, y con un <strong>99.375%</strong> de probabilidad, <strong>Pozo Almonte</strong> debería estar en <b style="color:gold">Preparación</b>.
Actualmente, la comuna registra 40 días en <b style="color:gold">Preparación</b>.</p></li>
</ul>
<p>[ CAMBIOS EN LA 38° EDICION ⚙️ ]</p>
<p>• Ninguno</p>
<p>[ INFORMACIÓN ADICIONAL Y FE DE ERRATAS 🌌 ]</p>
<p>• Reporte generado de forma automática. Si encuentras algún error o sugerencia, ¡comenta!</p>
<p>• Autor: Alejandro Dinamarca.</p>
<p>• Para mayor información del funcionamiento del algoritmo, visitar el sitio adinamarca.github.io</p>
<p>¡A cuidarse Tarapacá! 😉</p>
</div>
</div>
</div>
</div>
<div class="section" id="graficando">
<h2>Graficando<a class="headerlink" href="#graficando" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>La mejor forma de resumir y entender la tendencia de datos es a partir de un gráfico. Un buen gráfico debe ser capaz de narrar sin complejizar, y por ello, son fundamentales en el data storytelling (que los datos den a conocer una historia). En este sentido, graficaremos con Matplotlib.</p>
<center><a href="https://matplotlib.org/"><img src="https://matplotlib.org/_static/logo2_compressed.svg" style="width:50%"></img></a></center>
<p>Existen otras librerías, como Seaborn (sns), que nos permite realizar gráficos más avanzados que Matplotlib con una sintaxis más simple. Sin embargo, Matplotlib tiene mayor versatilidad, y por ello, lo utilizaremos sobre Seaborn (sns viene con una sintaxis más simple pero menos manejable).</p>
<center><a href="https://seaborn.pydata.org/"><img src="https://seaborn.pydata.org/_static/logo-wide-lightbg.svg" style="width:50%"></img></a></center>
<div class="section" id="id8">
<h3>Reporte diario<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Graficando para reporte diario ###</span>

<span class="c1">### Para gráficos de torta</span>
<span class="k">class</span> <span class="nc">graphPie</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clase para gráfico de torta.</span>
<span class="sd">    Args</span>
<span class="sd">    ____</span>
<span class="sd">    data: datos para torta</span>
<span class="sd">    color: colores</span>
<span class="sd">    path: dirección de guardado</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">def</span> <span class="nf">absolute_value</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">val</span><span class="o">/</span><span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())))</span>
            <span class="k">return</span> <span class="n">a</span>
        <span class="n">graph</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">autopct</span><span class="o">=</span><span class="n">absolute_value</span><span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span> <span class="n">pctdistance</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">textprops</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;fontsize&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">},</span> <span class="n">explode</span><span class="o">=</span><span class="p">[</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Gráfico guardado.&#39;</span><span class="p">)</span>

<span class="c1">### Para gráficos de línea</span>
<span class="k">class</span> <span class="nc">graphLine</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clase para gráfico de barra.</span>
<span class="sd">    Args</span>
<span class="sd">    ____</span>
<span class="sd">    x: eje x</span>
<span class="sd">    y: eje y</span>
<span class="sd">    color: colores</span>
<span class="sd">    path: dirección de guardado</span>
<span class="sd">    opt: sufijo de dato</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">opt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opt</span> <span class="o">=</span> <span class="n">opt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
            <span class="n">graph</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">]):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt</span><span class="p">),</span><span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">grid_color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="s1">&#39;#000&#39;</span><span class="p">,</span> <span class="n">grid_color</span><span class="o">=</span><span class="s1">&#39;#000&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;#000&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;#000&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Gráfico guardado.&#39;</span><span class="p">)</span>

<span class="c1">### Primer gráfico: Detalle de casos nuevos</span>
<span class="n">graph1</span> <span class="o">=</span> <span class="n">graphPie</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos con sintomas&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos sin sintomas&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos por laboratorio&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]],</span> \
         <span class="p">[</span><span class="s1">&#39;#a688f1&#39;</span><span class="p">,</span> <span class="s1">&#39;#ca6e8f&#39;</span><span class="p">,</span> <span class="s1">&#39;#a8ca55&#39;</span><span class="p">],</span> <span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">diario</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">1.png&#39;</span><span class="p">)</span>

<span class="c1">### Segundo gráfico: Balance diario</span>
<span class="n">graph2</span> <span class="o">=</span> <span class="n">graphPie</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados nuevos&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos nuevos&#39;</span><span class="p">][</span><span class="n">weekend_data</span><span class="p">]],</span> \
         <span class="p">[</span><span class="s1">&#39;#b68b41&#39;</span><span class="p">,</span> <span class="s1">&#39;#43bb48&#39;</span><span class="p">,</span> <span class="s1">&#39;#fe4747&#39;</span><span class="p">],</span> <span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">diario</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">2.png&#39;</span><span class="p">)</span>


<span class="c1">### Tercer gráfico: Balance semanal</span>
<span class="n">graph3</span> <span class="o">=</span> <span class="n">graphLine</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>\
                   <span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos recuperados nuevos&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos fallecidos nuevos&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#b68b40&#39;</span><span class="p">,</span> <span class="s1">&#39;#43bb47&#39;</span><span class="p">,</span> <span class="s1">&#39;#fe4747&#39;</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">diario</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">3.png&#39;</span><span class="p">)</span>

<span class="c1">### Cuarto gráfico: Activos semanales</span>
<span class="n">graph4</span> <span class="o">=</span> <span class="n">graphLine</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>\
                   <span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos confirmados&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos activos probables&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#edf01c&#39;</span><span class="p">,</span> <span class="s1">&#39;#9585dc&#39;</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">diario</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">4.png&#39;</span><span class="p">,)</span>

<span class="c1">## Quinto gráfico: Positividad</span>
<span class="n">graph5</span> <span class="o">=</span> <span class="n">graphLine</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>\
                   <span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Positividad diaria&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Positividad media movil *&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#f052d0&#39;</span><span class="p">,</span> <span class="s1">&#39;#f5e7d0&#39;</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">diario</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">5.png&#39;</span><span class="p">,</span> <span class="n">opt</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>

<span class="c1">### Sexto gráfico: Residencias sanitarias</span>
<span class="n">graph6</span> <span class="o">=</span> <span class="n">graphLine</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>\
                   <span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Cupos en residencias&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Usuarios en residencias&#39;</span><span class="p">][</span><span class="n">weekstart_data</span><span class="p">:</span><span class="n">weekend_data</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#4c4c4c&#39;</span><span class="p">,</span> <span class="s1">&#39;#1efde2&#39;</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">diario</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">6.png&#39;</span><span class="p">)</span>
    
<span class="c1">### ¿Todo ok?</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> Gráficos del reporte diario guardados de forma exitosa.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1_thisistheway_22_0.png" src="../../_images/1_thisistheway_22_0.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_22_2.png" src="../../_images/1_thisistheway_22_2.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_22_4.png" src="../../_images/1_thisistheway_22_4.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_22_6.png" src="../../_images/1_thisistheway_22_6.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_22_8.png" src="../../_images/1_thisistheway_22_8.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_22_10.png" src="../../_images/1_thisistheway_22_10.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.

 
 Gráficos del reporte diario guardados de forma exitosa.
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id9">
<h3>Balance de vacunas<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Graficando para balance vacunas ###</span>

<span class="c1">### Últimas cifras de vacunación a población total/objetivo</span>
<span class="n">pob_total</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 1° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 1° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> \
          <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> \
          <span class="n">poblacion</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]])</span>
<span class="n">pob_obj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 1° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 1° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> \
          <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> \
          <span class="n">poblacion</span><span class="o">*</span><span class="mf">0.8</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 2° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]])</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;Con 1° dosis </span><span class="se">\n</span><span class="s1"> (sin inmunidad)&#39;</span><span class="p">,</span> <span class="s1">&#39;Con 2° dosis </span><span class="se">\n</span><span class="s1"> (eventual inmunes)&#39;</span><span class="p">,</span> <span class="s1">&#39;Sin 2° dosis </span><span class="se">\n</span><span class="s1"> (sin inmunidad)&#39;</span><span class="p">])</span>
<span class="n">vacunacion_pct</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">pob_total</span><span class="p">,</span> <span class="n">pob_obj</span><span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">vacunacion_pct</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">labels</span>
<span class="n">vacunacion_pct</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Población total&#39;</span><span class="p">,</span> <span class="s1">&#39;Población objetivo&#39;</span><span class="p">]</span>

<span class="c1">### Para gráficos de barra</span>
<span class="k">class</span> <span class="nc">graphBar</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clase para gráfico de barra.</span>
<span class="sd">    Args</span>
<span class="sd">    ____</span>
<span class="sd">    x: eje x</span>
<span class="sd">    y: eje y</span>
<span class="sd">    color: colores</span>
<span class="sd">    path: dirección de guardado</span>
<span class="sd">    alpha: transparencia</span>
<span class="sd">    opt:&#39;&#39; sufijo de dato</span>
<span class="sd">    uni:0 booleano (0 para color para todas las barras, 1 para color por cada barra)</span>
<span class="sd">    w:4 (ancho)</span>
<span class="sd">    l:3 (largo)</span>
<span class="sd">    horizontal:0 (gráfico vertical u horizontal)</span>
<span class="sd">    rot: rotacion para gráfico con uni=1</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">opt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">horizontal</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opt</span> <span class="o">=</span> <span class="n">opt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">l</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">l</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uni</span> <span class="o">=</span> <span class="n">uni</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">horizontal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rot</span>
        <span class="k">if</span> <span class="n">horizontal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">uni</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">]):</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="s1">&#39;,d&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt</span><span class="p">),</span><span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rot</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">])</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">]):</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="s1">&#39;,d&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt</span><span class="p">),</span><span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mf">4.5</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">])</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">grid_color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="s1">&#39;,d&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">bbox_inches</span> <span class="o">=</span> <span class="s1">&#39;tight&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="s1">&#39;#000&#39;</span><span class="p">,</span> <span class="n">grid_color</span><span class="o">=</span><span class="s1">&#39;#000&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;#000&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;#000&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Gráfico guardado.&#39;</span><span class="p">)</span>
        
<span class="c1">### Primer gráfico: Proporción objetivo vacunada</span>
<span class="n">graph1</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([[</span><span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">procesovacunacion_hoy</span><span class="p">)]],</span>\
                   <span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="s1">&#39;#9ad5ff&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">1.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">1.68</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">horizontal</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vaccine</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/pandemiaventana/pandemiaventana/main/in/vacuna/grafico/vaccine.png&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">)</span>
<span class="n">pct_</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">1.png&#39;</span><span class="p">)</span>
<span class="n">background</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;RGBA&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">background</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">pct_</span><span class="p">,</span> <span class="p">(</span><span class="mi">135</span><span class="p">,</span><span class="mi">359</span><span class="p">),</span> <span class="n">pct_</span><span class="p">)</span>
<span class="n">background</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">vaccine</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">vaccine</span><span class="p">)</span>
<span class="n">background</span> <span class="o">=</span> <span class="n">background</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">400</span><span class="p">,</span> <span class="mi">700</span><span class="p">),</span> <span class="n">Image</span><span class="o">.</span><span class="n">ANTIALIAS</span><span class="p">)</span>
<span class="n">background</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">1.png&#39;</span><span class="p">)</span>

<span class="c1">### Segundo gráfico: Vacunas administradas (1° dosis)</span>
<span class="n">graph2</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">vacunacion_pct</span><span class="o">.</span><span class="n">index</span><span class="p">],</span>\
                   <span class="p">[</span><span class="n">vacunacion_pct</span><span class="p">[</span><span class="s1">&#39;Población total&#39;</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#8899e1&#39;</span><span class="p">,</span> <span class="s1">&#39;#9ad5ff&#39;</span><span class="p">,</span> <span class="s1">&#39;gray&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">2.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>
        
<span class="c1">### Tercer gráfico: Vacunas administradas (1° dosis)</span>
<span class="n">graph3</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">vacunacion_pct</span><span class="o">.</span><span class="n">index</span><span class="p">],</span>\
                   <span class="p">[</span><span class="n">vacunacion_pct</span><span class="p">[</span><span class="s1">&#39;Población objetivo&#39;</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#8899e1&#39;</span><span class="p">,</span> <span class="s1">&#39;#9ad5ff&#39;</span><span class="p">,</span> <span class="s1">&#39;gray&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">3.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>
        
<span class="c1">### Cuarto gráfico: Vacunas administradas (1° dosis)</span>
<span class="n">graph4</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">vacunacion_etaria</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>\
                   <span class="p">[</span><span class="n">vacunacion_etaria</span><span class="p">[</span><span class="s1">&#39;Poblacion&#39;</span><span class="p">],</span> <span class="n">vacunacion_etaria</span><span class="p">[</span><span class="s1">&#39;1° Dosis&#39;</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="s1">&#39;#8899e1&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">],</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">4.png&#39;</span><span class="p">)</span>

<span class="c1">### Quinto gráfico: Vacunas administradas (2° dosis)</span>
<span class="n">graph5</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">vacunacion_etaria</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>\
                   <span class="p">[</span><span class="n">vacunacion_etaria</span><span class="p">[</span><span class="s1">&#39;Poblacion&#39;</span><span class="p">],</span> <span class="n">vacunacion_etaria</span><span class="p">[</span><span class="s1">&#39;2° Dosis&#39;</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="s1">&#39;#9ad5ff&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">],</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">5.png&#39;</span><span class="p">)</span>

<span class="c1">### ¿Todo ok?</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> Gráficos del balance de vacunas guardados de forma exitosa.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1_thisistheway_24_0.png" src="../../_images/1_thisistheway_24_0.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_24_2.png" src="../../_images/1_thisistheway_24_2.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_24_4.png" src="../../_images/1_thisistheway_24_4.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_24_6.png" src="../../_images/1_thisistheway_24_6.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_24_8.png" src="../../_images/1_thisistheway_24_8.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.

 
 Gráficos del balance de vacunas guardados de forma exitosa.
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id10">
<h3>Indicador de fase<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Graficando para indicador fase ###</span>

<span class="c1">### Primer gráfico: Días por fase por comuna</span>
<span class="n">graph1</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Paso a Paso (dias)&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">19</span><span class="p">:]],</span>\
                   <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Paso a Paso (dias)&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pasopaso_comuna</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="n">resultado_colores</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">1.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1">### Segundo gráfico: Activos al último informe epidemiológico por comuna</span>
<span class="n">graph2</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Paso a Paso (dias)&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">19</span><span class="p">:]],</span>\
                   <span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Casos activos en&#39;</span><span class="p">)]</span><span class="o">.</span>
<span class="n">loc</span><span class="p">[</span><span class="n">casoscomuna_activos</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">poblaciones_comunales</span><span class="p">)</span><span class="o">*</span><span class="mi">100000</span><span class="p">)[:</span><span class="mi">7</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="n">resultado_colores</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;white&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">2.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1">### Tercer gráfico: Fallecidos al último informe epidemiológico por comuna</span>
<span class="n">graph3</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;confirmados DEIS&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">28</span><span class="p">:]],</span>\
                   <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;confirmados DEIS&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">loc</span>
                    <span class="p">[</span><span class="n">casoscomuna_activos</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">poblaciones_comunales</span><span class="p">)</span><span class="o">*</span><span class="mi">100000</span><span class="p">],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="n">resultado_colores</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">3.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1">### Cuarto gráfico: Notificación PCR por comuna</span>
<span class="n">graph4</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Notificacion PCR&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">17</span><span class="p">:]],</span>\
                   <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Notificacion PCR &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span>
                    <span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">positividad_comuna</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">poblaciones_comunales</span><span class="p">)</span><span class="o">*</span><span class="mi">100000</span><span class="p">],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="n">resultado_colores</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">4.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1">### Quinto gráfico: Casos acumulados por comuna</span>
<span class="n">graph5</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Casos acumulados en&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">20</span><span class="p">:][:</span><span class="mi">7</span><span class="p">]],</span>\
                   <span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Casos acumulados en&#39;</span><span class="p">)]</span><span class="o">.</span>
<span class="n">loc</span><span class="p">[</span><span class="n">casoscomuna_activos</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">poblaciones_comunales</span><span class="p">)</span><span class="o">*</span><span class="mi">100000</span><span class="p">)[:</span><span class="mi">7</span><span class="p">]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="n">resultado_colores</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">5.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1">### Sexto gráfico: Positividad por comuna</span>
<span class="n">graph6</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Paso a Paso (dias)&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">19</span><span class="p">:]],</span>\
                   <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Positividad &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">&amp;</span> 
                   <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;diaria&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">&amp;</span>
                   <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;movil&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">&amp;</span>
                   <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;antigeno&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">positividad_comuna</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="n">resultado_colores</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;white&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">6.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">opt</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>

<span class="c1">### Séptimo gráfico: BAC por comuna</span>
<span class="n">graph7</span> <span class="o">=</span> <span class="n">graphBar</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;BAC&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">4</span><span class="p">:]],</span>\
                   <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;BAC &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">positividad_comuna</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]],</span> \
                   <span class="n">color</span><span class="o">=</span><span class="n">resultado_colores</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> \
                   <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="s1">7.png&#39;</span><span class="p">,</span> <span class="n">uni</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">opt</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>

<span class="c1">### ¿Todo ok?</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> Gráficos del indicador de fase guardados de forma exitosa.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1_thisistheway_26_0.png" src="../../_images/1_thisistheway_26_0.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_26_2.png" src="../../_images/1_thisistheway_26_2.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_26_4.png" src="../../_images/1_thisistheway_26_4.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_26_6.png" src="../../_images/1_thisistheway_26_6.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_26_8.png" src="../../_images/1_thisistheway_26_8.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_26_10.png" src="../../_images/1_thisistheway_26_10.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_26_12.png" src="../../_images/1_thisistheway_26_12.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Gráfico guardado.

 
 Gráficos del indicador de fase guardados de forma exitosa.
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="generando-reportes">
<h2>Generando reportes<a class="headerlink" href="#generando-reportes" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>Teniendo la información recopilada, nos basaremos en el <a href="https://automatetheboringstuff.com/chapter17/">capítulo 17 de manipular imágenes con Python, de &#64;AlSweigart</a> <a class="footnote-reference brackets" href="#alsweigart" id="id11">3</a> para generar las infografías.</p>
<p>El procedimiento manual implicaba exportar archivos .JSON, y a partir de ellos, rellenar manualmente los datos y gráficos en Photoshop, lo que es un proceso tedioso, y altamente susceptible a equivocaciones.</p>
<p>Debido al párrafo anterior, se intentará automatizar el mismo procedimiento, pero a través de Python, dado que son pasos mecánicos gracias a <span id="id12">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id23">AlS15</a>]</span>.</p>
<p>Lo que tenemos que realizar consistirá en los siguientes pasos:</p>
<ul class="simple">
<li><p>Rellenar con datos las infografías prediseñadas en Photoshop.</p></li>
<li><p>Colocar imágenes de gráficos según corresponda en las mismas infografías.</p></li>
<li><p>Exportar.</p></li>
</ul>
<div class="section" id="id13">
<h3>Reporte diario<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Generando reporte diario ###</span>

<span class="c1">### Abriendo gráficos guardados</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;../../in/diario/grafico/</span><span class="si">{}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;graph</span><span class="si">{}</span><span class="s1"> = Image.open(image_path)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>

<span class="c1">### Cargando imagenes</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;../../in/diario/</span><span class="si">{}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;diario_</span><span class="si">{}</span><span class="s1"> = Image.open(image_path)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;diario</span><span class="si">{}</span><span class="s1"> = diario_</span><span class="si">{}</span><span class="s1">.copy()&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>
    
<span class="c1">### Cargando texto (gracias a Google Fonts y shoes)</span>
<span class="n">roboto</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://github.com/googlefonts/roboto/raw/main/src/hinted/Roboto-Regular.ttf&quot;</span><span class="p">)</span>
<span class="n">coolvetica</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://github.com/shoes/brown_shoes/blob/main/fonts/Coolvetica.ttf?raw=true&quot;</span><span class="p">)</span>
<span class="n">roboto_ed</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">roboto</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">roboto_data0</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">roboto</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">roboto_data1</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">roboto</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">28</span><span class="p">)</span>
<span class="n">roboto_data2</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">roboto</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">roboto_data3</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">roboto</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">coolvetica_data0</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">coolvetica</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">43</span><span class="p">)</span>
<span class="n">coolvetica_data1</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">coolvetica</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">75</span><span class="p">)</span>
<span class="n">coolvetica_data2</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">coolvetica</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">135</span><span class="p">)</span>
<span class="n">coolvetica_data3</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">coolvetica</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">coolvetica_data4</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">coolvetica</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="mi">180</span><span class="p">)</span>

<span class="c1">### Manipulando primera imagen</span>
<span class="n">txt</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">diario1</span><span class="p">)</span>

<span class="c1">### Textos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">860</span><span class="p">,</span> <span class="mi">35</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">° ed.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ed_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#b9b9b9&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_ed</span><span class="p">)</span> <span class="c1"># edicion</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">380</span><span class="p">,</span> <span class="mi">357</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y&#39;</span><span class="p">)),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#fff&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">)</span> <span class="c1"># fecha</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">650</span><span class="p">,</span> <span class="mi">435</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">casos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># casos nuevos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">820</span><span class="p">,</span> <span class="mi">510</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">recuperados_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># recuperados nuevos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">745</span><span class="p">,</span> <span class="mi">585</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fallecidosnuevos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># fallecidos nuevos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">825</span><span class="p">,</span> <span class="mi">660</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">activos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># activos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">760</span><span class="p">,</span> <span class="mi">735</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">activosprobables_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># activos probables</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">700</span><span class="p">,</span> <span class="mi">810</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pcrnuevos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># pcr nuevos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">695</span><span class="p">,</span> <span class="mi">890</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">positividad_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># positividad diaria</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">750</span><span class="p">,</span> <span class="mi">965</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">residenciasusuarios_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># residencias sanitarias</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">725</span><span class="p">,</span> <span class="mi">1035</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ucidiaria_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data1</span><span class="p">)</span> <span class="c1"># uci diaria</span>

<span class="c1">### Guardamos</span>
<span class="n">diario1</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;../../out/diario/1.png&#39;</span><span class="p">)</span>

<span class="c1">### Manipulando segunda imagen</span>
<span class="n">txt</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">diario2</span><span class="p">)</span>

<span class="c1">### Textos (a diferencia de los textos anteriores, debemos centrar a medida se añaden carácteres con &#39;anchor&#39;)</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">consintomas_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">consintomas_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sinsintomas_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sinsintomas_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">porlaboratorio_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos por laboratorio</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">porlaboratorio_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos por laboratorio</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">350</span><span class="p">,</span> <span class="mi">910</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> casos nuevos confirmados por antígeno.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">antigeno_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#b9b9b9&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">)</span> <span class="c1"># nuevos antigeno</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">350</span><span class="p">,</span> <span class="mi">960</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> casos del total están con sospecha de reinfección.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">reinfeccion_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#b9b9b9&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">)</span> <span class="c1"># reinfeccion</span>
 
<span class="c1">### Gráficos</span>
<span class="n">diario2</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">graph1</span><span class="p">,</span> <span class="p">(</span><span class="mi">570</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">graph1</span><span class="p">)</span>

<span class="c1">### Guardamos</span>
<span class="n">diario2</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;../../out/diario/2.png&#39;</span><span class="p">)</span>

<span class="c1">### Manipulando tercera imagen</span>
<span class="n">txt</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">diario3</span><span class="p">)</span>

<span class="c1">### Textos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">casos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">casos_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">recuperados_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">recuperados_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fallecidosnuevos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos por laboratorio</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fallecidosnuevos_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos por laboratorio</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">860</span><span class="p">),</span> <span class="s1">&#39;Acumulado: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">casosacumulados_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># nuevos antigeno</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">860</span><span class="p">),</span> <span class="s1">&#39;Acumulado: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">recuperadosacumulados_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># reinfeccion</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">860</span><span class="p">),</span> <span class="s1">&#39;Acumulado: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fallecidosacumulados_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># reinfeccion</span>

<span class="c1">### Gráficos</span>
<span class="n">diario3</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">graph2</span><span class="p">,</span> <span class="p">(</span><span class="mi">570</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">graph2</span><span class="p">)</span>

<span class="c1">### Guardamos</span>
<span class="n">diario3</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;../../out/diario/3.png&#39;</span><span class="p">)</span>

<span class="c1">### Manipulando cuarta imagen</span>
<span class="n">txt</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">diario4</span><span class="p">)</span>

<span class="c1">### Textos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">780</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">reregional_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">)</span> <span class="c1"># casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pcrnuevos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pcrnuevos_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">residenciasusuarios_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">residenciasusuarios_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">activos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos por laboratorio</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">activos_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos por laboratorio</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">860</span><span class="p">),</span> <span class="s1">&#39;Acumulado: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pcracumulados_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># nuevos antigeno</span>

<span class="c1">### Guardamos</span>
<span class="n">diario4</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;../../out/diario/4.png&#39;</span><span class="p">)</span>

<span class="c1">### Manipulando quinta imagen</span>
<span class="n">txt</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">diario5</span><span class="p">)</span>

<span class="c1">### Textos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">780</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">positividadmovil_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">)</span> <span class="c1"># casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">positividad_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">190</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">positividad_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">procesovacunacion_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">procesovacunacion_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">me_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos por laboratorio</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">890</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">me_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos por laboratorio</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">540</span><span class="p">,</span> <span class="mi">860</span><span class="p">),</span> <span class="s1">&#39;Acum. 2° dosis: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">procesovacunaciontotales_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># nuevos antigeno</span>

<span class="c1">### Guardamos</span>
<span class="n">diario5</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;../../out/diario/5.png&#39;</span><span class="p">)</span>

<span class="c1">### Manipulando sexta imagen</span>
<span class="n">txt</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">diario6</span><span class="p">)</span>

<span class="c1">### Textos</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">780</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tasanuevos_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">)</span> <span class="c1"># casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">280</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">activosprobables_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">280</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Ayer: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">activosprobables_ayer</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos con sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">800</span><span class="p">,</span> <span class="mi">680</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uciaprox_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#dfdede&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data2</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># casos sin sintomas</span>
<span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">800</span><span class="p">,</span> <span class="mi">750</span><span class="p">),</span> <span class="s1">&#39;Error aprox.: ±</span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">errorabs_hoy</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#989898&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="c1"># ayer, casos sin sintomas</span>

<span class="c1">### Guardamos</span>
<span class="n">diario6</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;../../out/diario/6.png&#39;</span><span class="p">)</span>

<span class="c1">### Manipulando séptima, octava, novena y décima imagen</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="c1">### Gráficos</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;diario</span><span class="si">{}</span><span class="s1">.paste(graph</span><span class="si">{}</span><span class="s1">, (-55, 155), graph</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">4</span><span class="p">))</span>
    <span class="c1">### Guardamos</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;diario</span><span class="si">{}</span><span class="s1">.save(&quot;../../out/diario/</span><span class="si">{}</span><span class="s1">.png&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>
    
<span class="c1">### ¿Todo ok?</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&gt; Todas las imágenes del reporte diario han sido correctamente exportadas.&#39;</span><span class="p">))</span>

<span class="c1">### Guardamos a PDF</span>
<span class="n">pdfs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;pdfs += [diario</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="c1">### Histórico</span>
<span class="n">diario1</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;../../out/diario/pdf</span><span class="se">\\</span><span class="si">{}</span><span class="s1">.pdf&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y.%m.</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">),</span>
                                                 <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y.%m.</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                                             <span class="p">),</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="p">[</span><span class="n">pdf</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">pdf</span> <span class="ow">in</span> <span class="n">pdfs</span><span class="p">])</span>

<span class="c1">### Última actualización</span>
<span class="n">diario1</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;../../out/diario/pdf/ult/ult.pdf&#39;</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="p">[</span><span class="n">pdf</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">pdf</span> <span class="ow">in</span> <span class="n">pdfs</span><span class="p">])</span>

<span class="c1">### ¿Todo ok?</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&gt; El PDF del reporte diario ha sido exportado.&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<blockquote>
<div><p>Todas las imágenes del reporte diario han sido correctamente exportadas.</p>
</div></blockquote>
<blockquote>
<div><p>El PDF del reporte diario ha sido exportado.</p>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="id14">
<h3>Balance de vacunas<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Generando balance de vacunas ###</span>

<span class="c1">### Abriendo gráficos guardados</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="si">{}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;graph</span><span class="si">{}</span><span class="s1"> = Image.open(image_path)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>

<span class="c1">### Cargando imagenes</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="si">{}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;vacuna</span><span class="si">{}</span><span class="s1"> = Image.open(image_path)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;vacuna</span><span class="si">{}</span><span class="s1"> = vacuna</span><span class="si">{}</span><span class="s1">.copy()&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>

<span class="c1">### Manipulando primera, segunda, tercera y cuarta imagen</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="c1">### Gráficos</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">vacuna1</span><span class="p">)</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">860</span><span class="p">,</span> <span class="mi">35</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">° ed.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ed_vacuna</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#b9b9b9&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_ed</span><span class="p">)</span> <span class="c1"># edicion</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">380</span><span class="p">,</span> <span class="mi">357</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">weekend_data</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y&#39;</span><span class="p">)),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#fff&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">)</span> <span class="c1"># fecha</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">610</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">procesovacunacion_hoy</span><span class="p">)),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#9ad5ff&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data4</span><span class="p">)</span> <span class="c1"># avance</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">420</span><span class="p">,</span> <span class="mi">670</span><span class="p">),</span> <span class="s1">&#39;Se ha vacunado con 2° dosis&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">)</span> <span class="c1"># texto1</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">420</span><span class="p">,</span> <span class="mi">710</span><span class="p">),</span> <span class="s1">&#39;de la población objetivo&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">)</span> <span class="c1"># texto2</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">380</span><span class="p">,</span> <span class="mi">800</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">vacunacion_pct</span><span class="p">[</span><span class="s1">&#39;Población objetivo&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s1">&#39;,d&#39;</span><span class="p">)),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">coolvetica_data4</span><span class="p">)</span> <span class="c1">#restante</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">420</span><span class="p">,</span> <span class="mi">990</span><span class="p">),</span> <span class="s1">&#39;Personas deben iniciar o&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">)</span> <span class="c1">#texto3</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">420</span><span class="p">,</span> <span class="mi">1030</span><span class="p">),</span> <span class="s1">&#39;completar su vacunación&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">)</span> <span class="c1">#texto4</span>
        <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;vacuna</span><span class="si">{}</span><span class="s1">.paste(graph</span><span class="si">{}</span><span class="s1">, (100, 410), graph</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;vacuna</span><span class="si">{}</span><span class="s1">.paste(graph</span><span class="si">{}</span><span class="s1">, (50, 250), graph</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;vacuna</span><span class="si">{}</span><span class="s1">.paste(graph</span><span class="si">{}</span><span class="s1">, (60, 240), graph</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="c1">### Guardamos</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;vacuna</span><span class="si">{}</span><span class="s1">.save(&quot;..</span><span class="se">\\\\</span><span class="s1">..</span><span class="se">\\\\</span><span class="s1">out</span><span class="se">\\\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">\</span><span class="si">{}</span><span class="s1">.png&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>

<span class="c1">### ¿Todo ok?</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&gt; Todas las imágenes del balance de vacunas han sido correctamente exportadas.&#39;</span><span class="p">))</span>

<span class="c1">### Guardamos a PDF</span>
<span class="n">pdfs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;pdfs += [vacuna</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="c1">### Histórico    </span>
<span class="n">vacuna1</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">out</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">pdf</span><span class="se">\\</span><span class="si">{}</span><span class="s1">.pdf&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 1° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y.%m.</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">),</span>
                                                 <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Vacunados acumulados 1° dosis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y.%m.</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                                             <span class="p">),</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="p">[</span><span class="n">pdf</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">pdf</span> <span class="ow">in</span> <span class="n">pdfs</span><span class="p">])</span>

<span class="c1">### Última actualización</span>
<span class="n">vacuna1</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">out</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">pdf</span><span class="se">\\</span><span class="s1">ult</span><span class="se">\\</span><span class="s1">ult.pdf&#39;</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="p">[</span><span class="n">pdf</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">pdf</span> <span class="ow">in</span> <span class="n">pdfs</span><span class="p">])</span>

<span class="c1">### ¿Todo ok?</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&gt; El PDF del balance de vacunas ha sido exportado.&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">65</span><span class="n">d0a663b3c9</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span>     <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="si">{}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">13</span>     <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;vacuna</span><span class="si">{}</span><span class="s1"> = Image.open(image_path)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span>     <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;vacuna</span><span class="si">{}</span><span class="s1"> = vacuna</span><span class="si">{}</span><span class="s1">.copy()&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span>     <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>

<span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.10/x64/lib/python3.7/site-packages/PIL/Image.py</span> in <span class="ni">open</span><span class="nt">(fp, mode, formats)</span>
<span class="g g-Whitespace">   </span><span class="mi">2910</span> 
<span class="g g-Whitespace">   </span><span class="mi">2911</span>     <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">2912</span>         <span class="n">fp</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2913</span>         <span class="n">exclusive_fp</span> <span class="o">=</span> <span class="kc">True</span>
<span class="g g-Whitespace">   </span><span class="mi">2914</span> 

<span class="ne">FileNotFoundError</span>: [Errno 2] No existe el archivo o el directorio: &#39;..\\..\\in\\vacuna\\1.png&#39;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id15">
<h3>Indicador de fase<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Indicador de fase ###</span>

<span class="c1">### Abriendo gráficos guardados</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">grafico</span><span class="se">\\</span><span class="si">{}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;graph</span><span class="si">{}</span><span class="s1"> = Image.open(image_path)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>

<span class="c1">### Cargando imagenes</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">in</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="si">{}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;indicadorfase</span><span class="si">{}</span><span class="s1"> = Image.open(image_path)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;indicadorfase</span><span class="si">{}</span><span class="s1"> = indicadorfase</span><span class="si">{}</span><span class="s1">.copy()&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>

<span class="c1">### Manipulando primera, segunda, tercera y cuarta imagen</span>

<span class="c1">### Para ir arreglando alto</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">### Para tener índice de vector de colores</span>
<span class="n">co</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="c1">### Gráficos</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">indicadorfase1</span><span class="p">)</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">860</span><span class="p">,</span> <span class="mi">35</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">° ed.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ed_indicador</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#b9b9b9&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_ed</span><span class="p">)</span> <span class="c1"># edicion</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">360</span><span class="p">,</span> <span class="mi">380</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos acumulados en Iquique&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y&#39;</span><span class="p">)),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#fff&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data1</span><span class="p">)</span> <span class="c1"># fecha</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">resultado_prediccion</span><span class="p">:</span>
            <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">490</span><span class="p">,</span> <span class="mi">512</span> <span class="o">+</span> <span class="n">b</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">resultado_prob</span><span class="p">[</span><span class="n">co</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#fff&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">)</span> <span class="c1"># fecha</span>
            <span class="n">txt</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="mi">670</span><span class="p">,</span> <span class="mi">512</span> <span class="o">+</span> <span class="n">b</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="n">resultado_colores</span><span class="p">[</span><span class="n">co</span><span class="p">],</span> <span class="n">font</span><span class="o">=</span><span class="n">roboto_data3</span><span class="p">)</span> <span class="c1"># fecha</span>
            <span class="n">b</span> <span class="o">+=</span> <span class="mi">72</span>
            <span class="n">co</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;indicadorfase</span><span class="si">{}</span><span class="s1">.paste(graph</span><span class="si">{}</span><span class="s1">, (60, 250), graph</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
    <span class="c1">### Guardamos</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;indicadorfase</span><span class="si">{}</span><span class="s1">.save(&quot;..</span><span class="se">\\\\</span><span class="s1">..</span><span class="se">\\\\</span><span class="s1">out</span><span class="se">\\\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">\</span><span class="si">{}</span><span class="s1">.png&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="n">i</span>

<span class="c1">### ¿Todo ok?</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&gt; Todas las imágenes del indicador de fase han sido correctamente exportadas.&#39;</span><span class="p">))</span>

<span class="c1">### Guardamos a PDF</span>
<span class="n">pdfs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;pdfs += [indicadorfase</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    
<span class="c1">### Histórico</span>
<span class="n">indicadorfase1</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">out</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">pdf</span><span class="se">\\</span><span class="si">{}</span><span class="s1">.pdf&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos acumulados en Alto Hospicio&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y.%m.</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                                             <span class="p">),</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="p">[</span><span class="n">pdf</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">pdf</span> <span class="ow">in</span> <span class="n">pdfs</span><span class="p">])</span>

<span class="c1">### Última actualización</span>
<span class="n">indicadorfase1</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">out</span><span class="se">\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">pdf</span><span class="se">\\</span><span class="s1">ult</span><span class="se">\\</span><span class="s1">ult.pdf&#39;</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="p">[</span><span class="n">pdf</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">pdf</span> <span class="ow">in</span> <span class="n">pdfs</span><span class="p">])</span>

<span class="c1">### ¿Todo ok?</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&gt; El PDF del indicador de fase ha sido exportado.&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<blockquote>
<div><p>Todas las imágenes del indicador de fase han sido correctamente exportadas.</p>
</div></blockquote>
<blockquote>
<div><p>El PDF del indicador de fase ha sido exportado.</p>
</div></blockquote>
</div>
</div>
</div>
</div>
<div class="section" id="resultado">
<h2>Resultado<a class="headerlink" href="#resultado" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<div class="section" id="id16">
<h3>Reporte diario<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Mostramos las imágenes del reporte diario</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;diario</span><span class="si">{}</span><span class="s1"> = Image.open(&quot;..</span><span class="se">\\</span><span class="s1">..</span><span class="se">\\</span><span class="s1">out</span><span class="se">\\</span><span class="s1">diario</span><span class="se">\\</span><span class="s1">\</span><span class="si">{}</span><span class="s1">.png&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;display(diario</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1_thisistheway_36_0.png" src="../../_images/1_thisistheway_36_0.png" />
<img alt="../../_images/1_thisistheway_36_1.png" src="../../_images/1_thisistheway_36_1.png" />
<img alt="../../_images/1_thisistheway_36_2.png" src="../../_images/1_thisistheway_36_2.png" />
<img alt="../../_images/1_thisistheway_36_3.png" src="../../_images/1_thisistheway_36_3.png" />
<img alt="../../_images/1_thisistheway_36_4.png" src="../../_images/1_thisistheway_36_4.png" />
<img alt="../../_images/1_thisistheway_36_5.png" src="../../_images/1_thisistheway_36_5.png" />
<img alt="../../_images/1_thisistheway_36_6.png" src="../../_images/1_thisistheway_36_6.png" />
<img alt="../../_images/1_thisistheway_36_7.png" src="../../_images/1_thisistheway_36_7.png" />
<img alt="../../_images/1_thisistheway_36_8.png" src="../../_images/1_thisistheway_36_8.png" />
<img alt="../../_images/1_thisistheway_36_9.png" src="../../_images/1_thisistheway_36_9.png" />
</div>
</div>
</div>
<div class="section" id="balance-vacunas">
<h3>Balance vacunas<a class="headerlink" href="#balance-vacunas" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Mostramos las imágenes del balance de vacunas</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;diario</span><span class="si">{}</span><span class="s1"> = Image.open(&quot;..</span><span class="se">\\\\</span><span class="s1">..</span><span class="se">\\\\</span><span class="s1">out</span><span class="se">\\\\</span><span class="s1">vacuna</span><span class="se">\\</span><span class="s1">\</span><span class="si">{}</span><span class="s1">.png&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;display(vacuna</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1_thisistheway_38_0.png" src="../../_images/1_thisistheway_38_0.png" />
<img alt="../../_images/1_thisistheway_38_1.png" src="../../_images/1_thisistheway_38_1.png" />
<img alt="../../_images/1_thisistheway_38_2.png" src="../../_images/1_thisistheway_38_2.png" />
<img alt="../../_images/1_thisistheway_38_3.png" src="../../_images/1_thisistheway_38_3.png" />
<img alt="../../_images/1_thisistheway_38_4.png" src="../../_images/1_thisistheway_38_4.png" />
</div>
</div>
</div>
<div class="section" id="id17">
<h3>Indicador de fase<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Mostramos las imágenes del indicador de fase</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;diario</span><span class="si">{}</span><span class="s1"> = Image.open(&quot;..</span><span class="se">\\\\</span><span class="s1">..</span><span class="se">\\\\</span><span class="s1">out</span><span class="se">\\\\</span><span class="s1">indicadorfase</span><span class="se">\\</span><span class="s1">\</span><span class="si">{}</span><span class="s1">.png&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;display(indicadorfase</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1_thisistheway_40_0.png" src="../../_images/1_thisistheway_40_0.png" />
<img alt="../../_images/1_thisistheway_40_1.png" src="../../_images/1_thisistheway_40_1.png" />
<img alt="../../_images/1_thisistheway_40_2.png" src="../../_images/1_thisistheway_40_2.png" />
<img alt="../../_images/1_thisistheway_40_3.png" src="../../_images/1_thisistheway_40_3.png" />
<img alt="../../_images/1_thisistheway_40_4.png" src="../../_images/1_thisistheway_40_4.png" />
<img alt="../../_images/1_thisistheway_40_5.png" src="../../_images/1_thisistheway_40_5.png" />
<img alt="../../_images/1_thisistheway_40_6.png" src="../../_images/1_thisistheway_40_6.png" />
<img alt="../../_images/1_thisistheway_40_7.png" src="../../_images/1_thisistheway_40_7.png" />
<img alt="../../_images/1_thisistheway_40_8.png" src="../../_images/1_thisistheway_40_8.png" />
</div>
</div>
</div>
</div>
<div class="section" id="ejemplos">
<h2>Ejemplos<a class="headerlink" href="#ejemplos" title="Permalink to this headline">¶</a></h2>
<p>La presente sección recopila los ejemplos mencionados en el notebook. Están recopilados a fin de fácil entendimiento (o al menos, en intento de).</p>
<div class="section" id="ejemplo-1">
<span id="ejemplo1"></span><h3>Ejemplo (1)<a class="headerlink" href="#ejemplo-1" title="Permalink to this headline">¶</a></h3>
<p>¿Cómo se ve un archivo .CSV?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Ejemplo 1 ###</span>

<span class="n">csv</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>

<span class="s2">Nombre,Apellido,Universidad</span>
<span class="s2">Juan,Ponce,uchile</span>
<span class="s2">Ermógenes,Pérez,usch</span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="c1">### Lo leemos con Pandas</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">csv</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Universidad</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Juan</td>
      <td>Ponce</td>
      <td>uchile</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Ermógenes</td>
      <td>Pérez</td>
      <td>usch</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="ejemplo-2">
<span id="ejemplo2"></span><h3>Ejemplo (2)<a class="headerlink" href="#ejemplo-2" title="Permalink to this headline">¶</a></h3>
<p>¿Cuál es la media de error de la aproximación UCI?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Ejemplo 2 ###</span>
<span class="c1">### Para media móvil semanal, solo seleccionamos el último dato</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;La media móvil del error de la última semana es de: &#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI error abs *&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI error abs *&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> <span class="s1">&#39;%&#39;</span><span class="p">)</span>
<span class="c1">### Para la media general, promediamos todos los datos</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;La media general del error es de: &#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI error abs *&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;%&#39;</span><span class="p">)</span>

<span class="c1">### ¿En qué se traduce el error? En las distancias entre ambas curvas</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil aprox *&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> \
         <span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil aprox *&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil aprox *&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;aproximación&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil real&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> \
         <span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil real&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;UCI ocupacion media movil real&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;real&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>La media móvil del error de la última semana es de:  0.47 %
La media general del error es de:  0.85 %
</pre></div>
</div>
<img alt="../../_images/1_thisistheway_45_1.png" src="../../_images/1_thisistheway_45_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="aclaraciones">
<h2>Aclaraciones<a class="headerlink" href="#aclaraciones" title="Permalink to this headline">¶</a></h2>
<div class="section" id="con-relacion-a-conceptos-del-ministerio-de-salud">
<h3>Con relación a conceptos del Ministerio de Salud<a class="headerlink" href="#con-relacion-a-conceptos-del-ministerio-de-salud" title="Permalink to this headline">¶</a></h3>
<div class="section" id="casos-activos-confirmados">
<span id="aclaracion"></span><h4>Casos activos confirmados<a class="headerlink" href="#casos-activos-confirmados" title="Permalink to this headline">¶</a></h4>
<p><strong>¿Por qué los casos activos confirmados del reporte diario del Minsal no calzan con los del reporte epidemiológico?</strong> Ésto se debe a que, el reporte diario del Minsal:</p>
<ul class="simple">
<li><p>No contempla en la suma de activos confirmados, a los activos probables <a class="footnote-reference brackets" href="#b51-536" id="id18">4</a>, en el reporte diario del Ministerio de Salud.</p></li>
</ul>
</div>
<div class="section" id="casos-confirmados-acumulados">
<span id="id19"></span><h4>Casos confirmados acumulados<a class="headerlink" href="#casos-confirmados-acumulados" title="Permalink to this headline">¶</a></h4>
<p><strong>¿Por qué los casos confirmados acumulados del reporte diario del Minsal no calzan con el total del reporte epidemiológico?</strong> Ésto se debe a dos situaciones con respecto al reporte diario del Minsal:</p>
<ul class="simple">
<li><p>No se contemplan casos probables <a class="footnote-reference brackets" href="#b51-536" id="id20">4</a>, en la suma de casos totales, en el reporte diario del Ministerio de Salud.</p></li>
</ul>
<br>
<ul class="simple">
<li><p>No se contemplan casos notificados por laboratorio <a class="footnote-reference brackets" href="#epi-04-06-2021" id="id21">5</a>, en la suma total, en el reporte diario del Ministerio de Salud.</p></li>
</ul>
<p>Ésto implica que:</p>
<div class="math notranslate nohighlight" id="equation-casos-epidemiologico">
<span class="eqno">(7)<a class="headerlink" href="#equation-casos-epidemiologico" title="Permalink to this equation">¶</a></span>\[ 
\begin{align}
\Large TOTAL = casos_{confirmados \ notificados} + casos_{probables} + casos_{notificados \ laboratorio}
\end{align}
\]</div>
</div>
<div class="section" id="definiciones">
<h4>Definiciones<a class="headerlink" href="#definiciones" title="Permalink to this headline">¶</a></h4>
<p>Respecto a las definiciones de la nomenclatura:</p>
<ul class="simple">
<li><p>Los casos probables, por definición <a class="footnote-reference brackets" href="#b51-536" id="id22">4</a>, “<i>Persona que cumple con la definición de caso sospechoso y tiene un resultado indeterminado o no concluyente de la RT-PCR, o persona asintomática o con un síntoma no cardinal, que tiene un resultado positivo para una prueba de detección rápida de antígenos para SARS-CoV-2, o bien, persona que cumple con la definición de caso sospechoso en el cual el resultado de la RT-PCR es negativo o indeterminado o no concluyente, pero que tiene una tomografía computarizada de tórax con imágenes sugerentes de COVID-19</i>” según <span id="id23">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id8">dSP21</a>]</span>.</p></li>
</ul>
<br>
<ul class="simple">
<li><p>Los casos notificados por laboratorio, por definición <a class="footnote-reference brackets" href="#epi-04-06-2021" id="id24">5</a>, “<i>Persona que tiene un resultado de RT-PCR positivo para SARS-CoV-2 pero que no está registrada en la plataforma EPIVIGILA</i>” según <span id="id25">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id9">dE21</a>]</span>.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="requerimientos">
<h2>Requerimientos<a class="headerlink" href="#requerimientos" title="Permalink to this headline">¶</a></h2>
<p>Obviar esta celda. Está hecha para que el action <a class="reference external" href="https://github.com/pandemiaventana/pandemiaventana/actions/workflows/book.yml">actualiza_libro</a> funcione correctamente según librerías utilizadas en el Notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Gracias a Alex P. Miller (https://stackoverflow.com/a/49199019/13746427) ###</span>
<span class="k">def</span> <span class="nf">get_imports</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">):</span>
            <span class="c1"># Split ensures you get root package, </span>
            <span class="c1"># not just imported function</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Some packages are weird and have different</span>
        <span class="c1"># imported names vs. system/pip names. Unfortunately,</span>
        <span class="c1"># there is no systematic way to get pip names from</span>
        <span class="c1"># a package&#39;s imported name. You&#39;ll have to add</span>
        <span class="c1"># exceptions to this list manually!</span>
        <span class="n">poorly_named_packages</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;PIL&quot;</span><span class="p">:</span> <span class="s2">&quot;Pillow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;sklearn&quot;</span><span class="p">:</span> <span class="s2">&quot;scikit-learn&quot;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">poorly_named_packages</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">poorly_named_packages</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

        <span class="k">yield</span> <span class="n">name</span>
<span class="n">imports</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">get_imports</span><span class="p">()))</span>

<span class="c1"># The only way I found to get the version of the root package</span>
<span class="c1"># from only the name of the package is to cross-check the names </span>
<span class="c1"># of installed packages vs. imported packages</span>
<span class="n">requirements</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">req</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">working_set</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">project_name</span> <span class="ow">in</span> <span class="n">imports</span> <span class="ow">and</span> <span class="n">m</span><span class="o">.</span><span class="n">project_name</span><span class="o">!=</span><span class="s2">&quot;pip&quot;</span><span class="p">:</span>
        <span class="n">requirements</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">m</span><span class="o">.</span><span class="n">project_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">version</span><span class="p">))</span>
        

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">requirements</span><span class="p">:</span>
    <span class="n">req</span> <span class="o">+=</span> <span class="s2">&quot;&quot;&quot;</span><span class="si">{}</span><span class="s2">==</span><span class="si">{}</span><span class="s2"></span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">)</span>
<span class="n">req</span> <span class="o">+=</span> <span class="s2">&quot;&quot;&quot;jupyter-book</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">+</span> <span class="s1">&#39;session_info&#39;</span>

<span class="c1">### Abrimos y modificamos requirements.txt</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../../requirements.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="informacion-de-sesion">
<h2>Información de sesión<a class="headerlink" href="#informacion-de-sesion" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">session_info</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">cpu</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">jupyter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">std_lib</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">write_req_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">req_file_name</span><span class="o">=</span><span class="s1">&#39;1_requeriments.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><details>
<summary>Click to view session information</summary>
<pre>
-----
PIL                 8.2.0
bs4                 4.9.3
datetime            NA
json                2.0.9
locale              NA
math                NA
matplotlib          3.3.4
numpy               1.19.2
os                  NA
pandas              1.2.3
pkg_resources       NA
plotly              4.8.1
pybtex              0.24.0
requests            2.25.1
scipy               1.6.2
seaborn             0.11.1
session_info        1.0.0
sklearn             0.24.1
time                NA
types               NA
-----
</pre>
<details>
<summary>Click to view modules imported as dependencies</summary>
<pre>
abc                 NA
argparse            1.1
array               NA
ast                 NA
asyncio             NA
atexit              NA
attr                20.3.0
backcall            0.2.0
base64              NA
bdb                 NA
binascii            NA
bisect              NA
brotli              NA
bz2                 NA
cProfile            NA
calendar            NA
certifi             2020.12.05
cffi                1.14.5
chardet             4.0.0
cmath               NA
cmd                 NA
code                NA
codecs              NA
codeop              NA
collections         NA
colorama            0.4.3
colorsys            NA
concurrent          NA
contextlib          NA
contextvars         NA
copy                NA
copyreg             NA
csv                 1.0
ctypes              1.1.0
cycler              0.10.0
cython_runtime      NA
dataclasses         NA
dateutil            2.8.1
decimal             1.70
decorator           5.0.6
difflib             NA
dis                 NA
distutils           3.7.0
email               NA
encodings           NA
enum                NA
errno               NA
faulthandler        NA
filecmp             NA
fnmatch             NA
fractions           NA
functools           NA
gc                  NA
genericpath         NA
getopt              NA
getpass             NA
gettext             NA
glob                NA
google              NA
gzip                NA
hashlib             NA
heapq               NA
hmac                NA
html                NA
http                NA
idna                2.10
imp                 NA
importlib           NA
importlib_metadata  NA
inspect             NA
io                  NA
ipykernel           5.3.4
ipyparallel         6.3.0
ipython_genutils    0.2.0
ipywidgets          7.6.3
itertools           NA
jedi                0.18.0
joblib              1.0.1
jsonschema          3.2.0
keyword             NA
kiwisolver          1.3.1
linecache           NA
logging             0.5.1.2
lxml                4.6.3
lzma                NA
marshal             4
matplotlib_inline   NA
mimetypes           NA
mkl                 2.3.0
mmap                NA
mpl_toolkits        NA
msvcrt              NA
multiprocessing     NA
nbformat            5.1.3
netrc               NA
nt                  NA
ntpath              NA
ntsecuritycon       NA
nturl2path          NA
numbers             NA
numexpr             2.7.3
olefile             0.46
opcode              NA
operator            NA
packaging           20.9
parso               0.8.2
pathlib             NA
pdb                 NA
pickle              NA
pickleshare         0.7.5
pkgutil             NA
platform            1.0.8
plistlib            NA
posixpath           NA
pprint              NA
profile             NA
prompt_toolkit      3.0.17
pstats              NA
psutil              5.8.0
pvectorc            NA
pydoc               NA
pydoc_data          NA
pyexpat             NA
pygments            2.8.1
pyparsing           2.4.7
pyrsistent          NA
pythoncom           NA
pytz                2021.1
pywintypes          NA
queue               NA
quopri              NA
random              NA
re                  2.2.1
reprlib             NA
retrying            NA
ruamel              NA
runpy               NA
secrets             NA
select              NA
selectors           NA
shlex               NA
shutil              NA
signal              NA
site                NA
six                 1.15.0
socket              NA
socketserver        0.4
socks               1.7.1
soupsieve           2.2.1
sphinxcontrib       NA
sqlite3             2.6.0
sre_compile         NA
sre_constants       NA
sre_parse           NA
ssl                 NA
stat                NA
storemagic          NA
string              NA
stringprep          NA
struct              NA
subprocess          NA
sys                 3.7.0 (default, Jun 28 2018, 08:04:48) [MSC v.1912 64 bit (AMD64)]
sysconfig           NA
tarfile             0.9.0
tempfile            NA
textwrap            NA
threading           NA
timeit              NA
token               NA
tokenize            NA
tornado             6.1
traceback           NA
traitlets           5.0.5
typing              NA
typing_extensions   NA
unicodedata         NA
unittest            NA
urllib              NA
urllib3             1.26.4
uu                  NA
uuid                NA
warnings            NA
wcwidth             0.2.5
weakref             NA
webbrowser          NA
win32api            NA
win32com            NA
win32security       NA
winreg              NA
xml                 NA
zipfile             NA
zipimport           NA
zipp                NA
zlib                1.0
zmq                 20.0.0
</pre>
</details> <!-- seems like this ends pre, so might as well be explicit -->
<pre>
-----
IPython             7.23.1
jupyter_client      6.1.12
jupyter_core        4.7.1
notebook            6.3.0
-----
Python 3.7.0 (default, Jun 28 2018, 08:04:48) [MSC v.1912 64 bit (AMD64)]
Windows-10-10.0.19041-SP0
12 logical CPU cores, Intel64 Family 6 Model 158 Stepping 10, GenuineIntel
-----
Session information updated at 2021-06-27 17:35
</pre>
</details></div></div>
</div>
</div>
<div class="section" id="bibliografia-de-esta-pagina">
<h2>Bibliografía de esta página<a class="headerlink" href="#bibliografia-de-esta-pagina" title="Permalink to this headline">¶</a></h2>
<p><dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id4">1</a></span></dt>
<dd><p>Ministerio de Ciencia, Tecnología e Innovación. Base de datos COVID-19. 2020, 2021. URL: <a class="reference external" href="https://github.com/MinCiencia/Datos-COVID19">https://github.com/MinCiencia/Datos-COVID19</a>.</p>
</dd>
<dt class="label" id="numeralab-indicadorfase"><span class="brackets"><a class="fn-backref" href="#id7">2</a></span></dt>
<dd><p>Alejandro Dinamarca. Indicador de fase, ed. 36°. 2021. URL: <a class="reference external" href="https://www.instagram.com/p/COyZiUcLUqu/">https://www.instagram.com/p/COyZiUcLUqu/</a>.</p>
</dd>
<dt class="label" id="alsweigart"><span class="brackets"><a class="fn-backref" href="#id11">3</a></span></dt>
<dd><p>AlSweigart. Automate The Boring Stuff With Python. 2015. URL: <a class="reference external" href="https://automatetheboringstuff.com/chapter17/">https://automatetheboringstuff.com/chapter17/</a>.</p>
</dd>
<dt class="label" id="b51-536"><span class="brackets">4</span><span class="fn-backref">(<a href="#id18">1</a>,<a href="#id20">2</a>,<a href="#id22">3</a>)</span></dt>
<dd><p>Subsecretaria de Salud Pública. Ordinario B51-536. 2021. URL: <a class="reference external" href="https://www.minsal.cl/wp-content/uploads/2021/02/ORD-536-04-02-2021.pdf">https://www.minsal.cl/wp-content/uploads/2021/02/ORD-536-04-02-2021.pdf</a>.</p>
</dd>
<dt class="label" id="epi-04-06-2021"><span class="brackets">5</span><span class="fn-backref">(<a href="#id21">1</a>,<a href="#id24">2</a>)</span></dt>
<dd><p>Departamento de Epidemiología. Informe epidemiológico N° 126. Enfermedad por SARS-CoV-2 (COVID-19). Chile 04-06-2021. 2021. URL: <a class="reference external" href="https://www.minsal.cl/wp-content/uploads/2021/06/Informe-Epidemiolo%CC%81gico-126.pdf">https://www.minsal.cl/wp-content/uploads/2021/06/Informe-Epidemiolo%CC%81gico-126.pdf</a>.</p>
</dd>
</dl>
</p>
<hr class="footnotes docutils" />
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./page/2_programacion"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="0_programacion.html" title="previous page">Programación 👨‍💻</a>
    <a class='right-next' id="next-link" href="2_thisistheway.html" title="next page">Aprendizaje</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Alejandro Dinamarca Cáceres<br/>
        
            &copy; Copyright 2021. Numeral.lab.<br/>
          <div class="extra_footer">
            Por Alejandro Dinamarca, <a href="https://www.linkedin.com/in/alejandrodinamarca/">Linkedin</a>
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-169901790-2', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </body>
</html>