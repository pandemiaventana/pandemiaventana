
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aprendizaje &#8212; La pandemia por la ventana</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="canonical" href="https://pandemiaventana.github.io/pandemiaventana/page/2_programacion/2_thisistheway.html" />
    <link rel="shortcut icon" href="../../_static/0_favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Salida" href="3_thisistheway.html" />
    <link rel="prev" title="Génesis" href="1_thisistheway.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      <img src="../../_static/1_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">La pandemia por la ventana</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../0_intro/0_introduccion.html">
   Bienvenido 📉
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../1_experiencia/0_experiencia.html">
   Experiencia 💭
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_experiencia/1_experiencia.html">
     El saber sin saber
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_experiencia/2_experiencia.html">
     Del desorden a el orden
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1_experiencia/3_experiencia.html">
     Autor
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="0_programacion.html">
   Programación 👨‍💻
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="1_programacion.html">
     Funcionamiento
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_programacion.html">
     Estado
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="1_thisistheway.html">
     Génesis
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Aprendizaje
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="3_thisistheway.html">
     Salida
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../3_reconocimiento/0_reconocimiento.html">
   Reconocimiento 🌊
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../3_reconocimiento/1_reconocimiento.html">
     Instituciones públicas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../3_reconocimiento/2_reconocimiento.html">
     Instituciones privadas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../3_reconocimiento/3_reconocimiento.html">
     Prensa
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../4_legado/0_legado.html">
   Legado 🔀
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_legado/1_legado.html">
     Lo nuevo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_legado/2_legado.html">
     Lo que aún vive
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../5_reportes/0_reportes.html">
   Reportes 😷
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_reportes/1_reportes.html">
     Reporte diario
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_reportes/2_reportes.html">
     Balance de vacunas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_reportes/3_reportes.html">
     Indicador de fase
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../6_bibliografia/0_bibliografia.html">
   Bibliografía 📰
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Realizado con <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/page/2_programacion/2_thisistheway.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/pandemiaventana/pandemiaventana"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/pandemiaventana/pandemiaventana/issues/new?title=Issue%20on%20page%20%2Fpage/2_programacion/2_thisistheway.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/pandemiaventana/pandemiaventana/edit/main/page/2_programacion/2_thisistheway.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/pandemiaventana/pandemiaventana/main?urlpath=tree/page/2_programacion/2_thisistheway.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conceptos-previos">
   Conceptos previos
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#percepcion">
     Percepción
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     Aprendizaje
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#imitacion-aprendizaje">
       Imitación (aprendizaje)
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importando-paquetes">
   Importando paquetes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importando-datos">
   Importando datos
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problema-y-machine-learning">
   Problema y Machine Learning
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#el-problema">
     El problema
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#seleccionando-el-modelo">
   Seleccionando el modelo
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#metodologia">
     Metodología
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#el-camino">
     El camino
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#no-tan-pronto-statistics-intensifies">
     No tan pronto (statistics intensifies)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#por-que-partir-por-el-kde">
       ¿Por qué partir por el KDE?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#inferencia-estadistica">
       Inferencia estadística
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#hipotesis-no-estadistica">
       Hipótesis no estadística
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#maquinas">
   Máquinas
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#la-academia">
     La academia
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#que-son-los-clasificadores-como-se-entrenan">
     ¿Qué son los clasificadores? ¿Cómo se entrenan?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#que-es-el-aprendizaje-estadistico">
     ¿Qué es el aprendizaje estadístico?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#regresion-logistica">
     Regresión logística
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#grafica">
       Gráfica
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#el-limite-de-decision-resumido">
       El límite de decisión resumido
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#descenso-del-gradiente-resumido">
       Descenso del gradiente resumido
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#la-deuda-de-kernel">
     La deuda de Kernel
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cimientos">
       Cimientos
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#kde-kernel-density-estimation">
       KDE (kernel density estimation)
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#a-fondo">
         A fondo
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#los-histogramas">
         Los histogramas
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#grafico-de-densidad-de-kernel">
         Gráfico de densidad de Kernel
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#idea-intuitiva">
       Idea intuitiva
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#la-clasificacion-kde">
       La clasificación KDE
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#svc">
     SVC
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#funcionamiento">
       Funcionamiento
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#la-analogia-de-la-esfera">
         La analogía de la esfera
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#definicion-de-svm">
         Definición de SVM
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#la-perorata">
     La perorata
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#seleccionando-variables">
   Seleccionando variables
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#costos-y-otras-cosas">
     Costos y otras cosas
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lo-estadisticamente-correcto-y-una-analogia">
     Lo estadísticamente correcto y una analogía
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datos-comunales">
     Datos comunales
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datos-regionales">
     Datos regionales
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#graficos-de-dispersion-por-comuna">
     Gráficos de dispersión por comuna
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#entrenamiento">
   Entrenamiento
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id63">
     Metodología
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sesgo">
     Sesgo
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#eleccion">
     Elección
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#codigo">
     Código
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#validacion">
   Validación
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ruido">
     Ruido
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#otras-cosas-por-mejorar">
     Otras cosas por mejorar
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#automatizando-salida-para-asistenciacovid19">
   Automatizando salida para asistenciacovid19
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#informacion-de-sesion">
   Información de sesión
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bibliografia-de-esta-pagina">
   Bibliografía de esta página
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="aprendizaje">
<h1>Aprendizaje<a class="headerlink" href="#aprendizaje" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<div class="figure align-default" id="markdown-fig">
<img alt="../../_images/2_cover.png" src="../../_images/2_cover.png" />
<p class="caption"><span class="caption-number">Fig. 16 </span><span class="caption-text"><strong>Ilustración realizada por Bernardo Dinamarca</strong>.</span><a class="headerlink" href="#markdown-fig" title="Permalink to this image">¶</a></p>
</div>
<p>¡Hola de nuevo! Este notebook estará basado en la aplicación de un modelo de Machine Learning a intentar predecir el plan Paso a Paso por las comunas de la Región de Tarapacá.</p>
<div class="section" id="conceptos-previos">
<h2>Conceptos previos<a class="headerlink" href="#conceptos-previos" title="Permalink to this headline">¶</a></h2>
<p>Para este inciso, nos basaremos en el trabajo de <em>Sergio Montoro</em> <a class="footnote-reference brackets" href="#sergio-montoro" id="id1">1</a>.</p>
<div class="section" id="percepcion">
<h3>Percepción<a class="headerlink" href="#percepcion" title="Permalink to this headline">¶</a></h3>
<p>Según <span id="id2">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id19">Mon15</a>]</span>, “<em>La percepción es la organización, identificación e interpretación de información sensorial con el propósito de representar y entender el entorno</em>”.</p>
<div class="figure align-default" id="id3">
<img alt="https://research.fb.com/wp-content/uploads/2016/11/post00013_image0005.jpg" src="https://research.fb.com/wp-content/uploads/2016/11/post00013_image0005.jpg" />
<p class="caption"><span class="caption-number">Fig. 17 </span><span class="caption-text"><strong>Fuente: Facebook. <a href="https://research.fb.com/blog/2016/08/learning-to-segment/">Learning to Segment</a></strong>.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>En Facebook Research <a class="footnote-reference brackets" href="#learning-to-segment-facebook" id="id4">2</a>, se realizan la pregunta: “<em>Can a computer distinguish between the many objects in a photograph as effortlessly as the human eye?</em>” <span id="id5">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id20">Dol16</a>]</span>, que en Español, significa “<strong>¿Puede un computador distinguir, entre los muchos objetos de una fotografía, sin esfuerzo, tal como el ojo humano?</strong>”. Esa pregunta es capaz de responderla el <a href="https://en.wikipedia.org/wiki/Machine_learning">Machine Learning</a> (Aprendizaje Automático), en concreto, desde el <a href="https://en.wikipedia.org/wiki/Computer_vision">Computer Vision</a> (Visión por Computador).</p>
<p>Tal como en la figura, el reconocimiento de imágenes, y visto de forma muy general, es que, a partir de un conjunto de píxeles, se clasifica en tipos de objetos (lo que se determina como una <strong>clase</strong>). Ésto es, lo básico que debe realizar un <a href="https://aprendeia.com/diferencia-entre-algoritmos-de-clasificacion-y-regresion/#:~:text=Los%20algoritmos%20de%20clasificaci%C3%B3n%20se,conjunto%20finito%20de%20resultados%20posibles."><strong>Algoritmo de Clasificación</strong></a>. Éste tipo de algoritmos son parte del <a href="https://es.wikipedia.org/wiki/Aprendizaje_supervisado">Aprendizaje Supervisado</a>.</p>
<p>Así entonces, tenemos algoritmos que, a partir de un conjunto de datos de entrada, como los píxeles de una imagen, es capaz de reconocer los distintos tipos de objetos (<strong>clases</strong>). Por ejemplo, reconocer el cielo, personas, vehículos, animales, etc. Pero, ¿cómo lo hace? Pues, a través del <strong>aprendizaje</strong>.</p>
</div>
<div class="section" id="id6">
<h3>Aprendizaje<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Imagina lo siguiente. Cuando estudias, ¿qué haces?</p>
<div class="figure align-default" id="id7">
<img alt="https://images.pexels.com/photos/3059691/pexels-photo-3059691.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" src="https://images.pexels.com/photos/3059691/pexels-photo-3059691.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" />
<p class="caption"><span class="caption-number">Fig. 18 </span><span class="caption-text"><strong>Fotografía de Pexels. <a href="https://www.pexels.com/es-es/foto/foto-de-mujer-escribiendo-en-el-portatil-3059691/">Enlace aquí</a></strong>.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>Pues, te aprendes la teoría, y una vez te sientes preparado, practicas esa teoría en ejercicios a partir de problemas (para cualquier tipo de asignatura). ¿Te equivocas al principio? ¡Sí! ¡Muchas veces! Es necesario equivocarse, dado de esa forma aprendes. <strong>¡Ese mismo proceso realizan los algoritmos!</strong> Solo que, de una forma más lógica y menos abstracta en cómo lo realiza el cerebro humano, al menos, desde el conocimiento que tenemos sobre nuestro cerebro hasta ahora… Existe la teoría de que nuestro cerebro tiene un algoritmo perfecto (<a href="https://www.simonsfoundation.org/2020/04/09/deciphering-the-brains-algorithms/"><strong>no es broma</strong></a>).</p>
<p>A partir de allí, se contemplan distintos conceptos, como por ejemplo, el cómo medimos el error en los algoritmos, siendo nuestro objetivo minimizarlo. Y así, surgen y surgen los conceptos en el Machine Learning. Sin embargo, esa es la teoría básica.</p>
<div class="figure align-default" id="id8">
<img alt="https://raw.githubusercontent.com/arvention/linear-regression/master/animation.gif" src="https://raw.githubusercontent.com/arvention/linear-regression/master/animation.gif" />
<p class="caption"><span class="caption-number">Fig. 19 </span><span class="caption-text"><strong>GIF de arvention. El enlace en<a href="https://github.com/arvention/linear-regression"> GitHub</a></strong>.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>En el GIF que adjunté (créditos a <a href="https://github.com/arvention">Arren Matthew C. Antioquia</a>), se puede apreciar cómo la recta, por cada iteración, se ajusta al conjunto de datos. De esa forma, será capaz de predecir datos futuros. Por ejemplo, puede servir para predecir una relación lineal: Dado una entrada de años de experiencia laboral, ¿cuál es el sueldo que debería corresponder? Entonces, sabemos que, <strong>a más experiencia laboral, mayor sueldo</strong>, por lo que generamos un algoritmo de regresión lineal con un buen conjunto de datos, los procesamos, hacemos el análisis, entrenamos el modelo, y finalmente, con el modelo ya entrenado, seremos capaces de predecir la respuesta. ¿Genial, no?</p>
<p>Procedimientos similares, pero con mayores dimensiones, se pueden extrapolar para preguntas más complejas, como lo que mencionábamos en torno al cáncer en secciones anteriores: ¿Cómo dado un conjunto de entrada de píxeles (una imagen) somos capaces de predecir que una persona tiene riesgo de tener cáncer? Evidentemente, allí ya no tratamos con datos continuos, sino discretos. La salida deberá ser si el paciente tiene o no tiene cáncer, por lo que bajo cierto umbral de la predicción, se podrá tener certeza del resultado. Asimismo, se trataría de un problema de clasificación.</p>
<p>¡Son múltiples las opciones! De esta forma, ¡creamos <strong>Inteligencia Artificial</strong>! Imitamos el funcionamiento de nuestro cerebro… Pero, ¿cómo lo imitamos? Con funciones matemáticas (<em>sí, esas que viste en el colegio, pero con mayor complejidad</em>). Además, nos apoyamos en el Cálculo, Estadística y Ciencias de la Computación.</p>
<p>Dicho ésto, ¡proseguimos a la siguiente sección! Por cierto, <em>si quieres arrancar, es el momento</em>.</p>
<div class="section" id="imitacion-aprendizaje">
<h4>Imitación (aprendizaje)<a class="headerlink" href="#imitacion-aprendizaje" title="Permalink to this headline">¶</a></h4>
<p>Entonces, ya lo sabemos. La imitación surge a partir de una función matemática. Esta función, se explicará desde el punto de vista del <strong>aprendizaje</strong> (según el contexto que nos ocupa). En este sentido, <span id="id9">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id19">Mon15</a>]</span> declara “<em>El aprendizaje es el hallazgo de una función <span class="math notranslate nohighlight">\(h(x)\)</span> —llamada frecuentemente hipótesis— que dado un vector de entrada <span class="math notranslate nohighlight">\(x\)</span> proporcione una estimación lo bastante buena de otra cantidad relacionada con <span class="math notranslate nohighlight">\(x\)</span></em>”.</p>
<p>Para comprender el punto anterior, <strong>¿recuerdas nuestra relación lineal en torno a los años de experiencia laboral y el salario?</strong> Definamos:</p>
<div class="math notranslate nohighlight" id="equation-experiencia-laboral">
<span class="eqno">(11)<a class="headerlink" href="#equation-experiencia-laboral" title="Permalink to this equation">¶</a></span>\[
\begin{align}
\Large h_{(X)} = Y
\end{align}
\]</div>
<p>Donde <span class="math notranslate nohighlight">\(h_{x}\)</span> representa nuestra hipótesis. Esta hipótesis <strong>recibirá una entrada <span class="math notranslate nohighlight">\(X\)</span> (años de experiencia laboral)</strong> a la cual se le asignará cierto <strong>peso</strong> (o nivel de relevancia), y deberá predecir, con cierto error (idealmente mínimo), <strong>la salida <span class="math notranslate nohighlight">\(Y\)</span> (salario)</strong>.</p>
<p>Evidentemente, tendremos que alimentar este modelo con datos (de otra forma, no podríamos hacer absolutamente nada). De esta forma, contamos con los datos de entrada <span class="math notranslate nohighlight">\(X\)</span>, y sus respectivas salidas <span class="math notranslate nohighlight">\(Y\)</span>. Entonces, nuestra hipótesis debe ser capaz de predecir, aproximadamente, y para cada <span class="math notranslate nohighlight">\(X_{i}\)</span>, el salario <span class="math notranslate nohighlight">\(Y_{i}\)</span>. En otras palabras, es lo que llamamos <strong>Aprendizaje Supervisado</strong>, puesto que, el modelo se ve constantemente supervisado por los datos reales. ¿Cómo? <strong>El contraste se realiza entre la salida real y la salida hipotética</strong>, donde, aproximadamente, <span class="math notranslate nohighlight">\(Y_{real} = Y_{hipotetica}\)</span> (<em>falta el tilde, sin embargo, este entorno de LATEX no permite acentuar</em>).</p>
<p>Entonces, supongamos nuestra función <span class="math notranslate nohighlight">\(h_{x}\)</span> no es capaz de predecir de forma correcta, <strong>a partir de los años de experiencia laboral <span class="math notranslate nohighlight">\(X\)</span></strong>, <strong>el salario <span class="math notranslate nohighlight">\(Y\)</span> que debería recibir una persona</strong>.</p>
<p>¡Nuestro modelo se está equivocando! ¿Cómo medimos ese error? Para ello, introducimos un nuevo concepto, <strong>la función de costo</strong> (recuerda el <strong>contraste</strong> que mencionamos), que en estricto rigor, nos cuantifica el error que tiene la hipótesis en torno a la salida real.</p>
<p>Un ejemplo de una función de costo podría ser el <a href="https://es.wikipedia.org/wiki/Error_cuadr%C3%A1tico_medio">error cuadrático medio</a> (por cierto, tengo un <a href="https://github.com/adinamarca/notebooks/blob/main/PY/ML/1_regresion_lineal/notebook.ipynb">Notebook</a> basado, exclusivamente, en este tema, por si lo deseas profundizar). Con ella, y hablando de forma macro, estamos utilizando la <strong>Estadística</strong>.</p>
<p>Ahora bien, consideremos que nuestro modelo, inicia su entrenamiento desde una asignación aleatoria de pesos. <strong>Por el azar, el modelo se equivoca, y debe enmendar ese error</strong>. ¡Para ello utilizamos la función de costo! Con ella, seremos capaces de minimizar el error. ¿Cómo? Recurrimos al <strong>Cálculo</strong>, en concreto, a la derivada. ¿Espera? ¿Por qué la derivada? La derivada mide el cambio, ¿no es así? Y si nuestro modelo se está equivocando por la asignación aleatoria de pesos, ¿no deberíamos regularlos? Efectivamente. Los pesos son como una consola de sonido, donde puedes subir o bajar los niveles, sintetizar, etc. Por lo que, sencillamente, cambiamos el peso del parámetro. Lo contrastamos con la función de costo, y nos preguntamos, ¿Disminuyó el error? Si es así, dirección es correcta, de otra forma, debemos tomar la dirección contraria. Suponiendo que, tenemos la dirección correcta, debemos seguir modificando el peso del parámetro en esa dirección, y contrastando con la derivada de la función de costo, hasta que el error se minimice. Ésto es lo que se conoce como <strong>descenso del gradiente</strong>, pero, aún nos falta un análisis más.</p>
<p>El proceso anterior, ¿te lo imaginas realizado de forma manual? Digamos, ¿realizar mil o millones de iteraciones? Imposible. <strong>Sería ineficiente</strong>. Incluso, <strong>¡repetir el mismo proceso cien, doscientas o trescientas veces de por sí es tedioso!</strong> Aquí es donde entran las <strong>Ciencias de la Computación</strong> y su alta capacidad de realizar múltiples cálculos por segundo. Con ella, podremos iterar, hasta llegar a la <strong>minimización del error</strong>.</p>
<p>¿Ves el por qué del uso de los tres grandes campos de la Ciencia de Datos? Ahora bien, el proceso anterior es una forma. ¡Sin embargo! El mismo problema, <strong>¡se puede resolver igualando la derivada a cero!</strong> Aunque, si la dimensionalidad del problema es alta, será un cálculo complejo, y que por ende, puede llevar un alto costo de procesamiento computacional.</p>
<p>A partir de ese resumen, nacen muchos de los conceptos del Machine Learning.</p>
</div>
</div>
</div>
<div class="section" id="importando-paquetes">
<h2>Importando paquetes<a class="headerlink" href="#importando-paquetes" title="Permalink to this headline">¶</a></h2>
<p>Introducidos los conceptos previos, llega el momento de trabajar con un poco de código y algoritmos. No quise entrar en detalle matemático con respecto a los conceptos previos, puesto que se alargaría mucho el Notebook.</p>
<p>Por cierto, además de las librerías del notebook anterior, deberemos trabajar con otras, de las que, hasta el momento, no tengo experiencia. Sin embargo, sí conozco los conceptos fundamentales detrás de la regresión lineal, logística, la estimación del error (función de costos), descenso del gradiente, entre otros.</p>
<p>La librería que me interesa destacar es Scikit-learn:</p>
<ul class="simple">
<li><p>Scikit-learn. Librería de Machine Learning que nos permitirá implementar algoritmos de Machine Learning sin necesidad de escribirlos desde cero (lo que es un ahorro de dolor de cabeza, a ser sincero).</p></li>
</ul>
<div class="figure align-default" id="id10">
<img alt="https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Scikit_learn_logo_small.svg/1200px-Scikit_learn_logo_small.svg.png" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Scikit_learn_logo_small.svg/1200px-Scikit_learn_logo_small.svg.png" />
<p class="caption"><span class="caption-number">Fig. 20 </span><span class="caption-text"><strong>Logo de la librería <a href="https://scikit-learn.org/stable/">Scikit-learn</a></strong>.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importando paquetes</span>

<span class="c1">### Librería de machine learning</span>
<span class="kn">import</span> <span class="nn">sklearn</span>
<span class="c1">## Para ver % de error del modelo</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">plot_confusion_matrix</span><span class="p">,</span> <span class="n">classification_report</span>
<span class="c1">## Para separar conjunto de entrenamiento y de prueba</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">TimeSeriesSplit</span>
<span class="c1">## Para modelo de aproximación por kernel</span>
<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">make_pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="c1">### Librería de manipulación de datos </span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>

<span class="c1">### Librería de álgebra</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1">### Librerías para graficar</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mpimg</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="c1">### Customizamos para tener fondos transparentes con alta resolución</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.dpi&#39;</span><span class="p">]</span><span class="o">=</span> <span class="mi">300</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;savefig&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

<span class="c1">### Para formato local</span>
<span class="kn">import</span> <span class="nn">locale</span>
<span class="c1">### Según Windows o Ubuntu</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1">### Windows</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;esp&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="c1">### Ubuntu (action)</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;es_CL.UTF-8&#39;</span><span class="p">)</span>

<span class="c1">### Otros paquetes</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span> <span class="k">as</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Markdown</span><span class="p">,</span> <span class="n">Javascript</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="c1">### Gracias a joelostblom (https://gitlab.com/joelostblom/session_info)</span>
<span class="kn">import</span> <span class="nn">session_info</span>

<span class="c1">### Librería BeautifulSoup para manipular HTML (más detalle en el siguiente Notebook)</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="importando-datos">
<h2>Importando datos<a class="headerlink" href="#importando-datos" title="Permalink to this headline">¶</a></h2>
<p>Del notebook anterior, logramos procesar la información recopilada a partir del Ministerio de Ciencia, Tecnología, Conocimiento e Innovación.</p>
<p>A continuación, lo que haremos será cargar esa información en el ambiente local del notebook con Pandas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Cargamos el .csv (convertimos la columna &#39;Fecha&#39; a objeto datetime y lo pasamos al índice)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../../out/site/csv/numeralab.csv&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Fecha&#39;</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Fecha&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="problema-y-machine-learning">
<h2>Problema y Machine Learning<a class="headerlink" href="#problema-y-machine-learning" title="Permalink to this headline">¶</a></h2>
<p>El Machine Learning (abreviado ML, o Aprendizaje Automático en español) es la vía mediante la cual las computadoras aprenden de forma automática a través de observaciones (datos) dado un número de características (variables).</p>
<p>En este sentido, la computadora aprende de los datos y eventualmente, construye un sistema o algoritmo capaz de predecir, con un cierto error, un determinado suceso, siendo el error el valor a minimizar, de forma constante, en el desarrollo del algoritmo. Éste fin se debe conseguir a partir de la secuencia lógica de actores:</p>
<ul class="simple">
<li><p>Una persona detrás, utilizando Estadística con apoyo en las Ciencias de la Computación (utilizando distintos Software para estos fines). Es a partir del trabajo conjunto de estas áreas de estudio, el como se desarrolla el análisis exploratorio de los datos de interés, corroborando formatos, falencias, etc.</p></li>
<li><p>A partir del análisis exploratorio previamente realizado, se desarrolla un algoritmo a partir del cual se obtiene una solución hipotética: Esta solución hipotética deberá ser contrastada con la solución real, obteniendo el error. De esta forma, las acciones automáticas como la iteración (gracias a la rapidez de los cálculos de los computadores modernos) permiten la minimización de dicho error, y a partir de ello, se desarrollan algoritmos altamente dependientes de la teoría de las ramas de la Estadística y Ciencias de la Computación, como las funciones de costo, el error cuadrático medio, o el descenso del gradiente, entre otros.</p></li>
</ul>
<p>Respecto a la persona detrás (yo), podré jugar con estas herramientas. Si bien no soy un experto en ML,  tengo cierto conocimiento - <i>que creo apropiado</i> - para desarrollar el presente notebook. Nada se consigue sin equivocar, el error es natural.</p>
<p>Con la introducción anterior, podemos ahondar con detalle en otros aspectos.</p>
<div class="section" id="el-problema">
<h3>El problema<a class="headerlink" href="#el-problema" title="Permalink to this headline">¶</a></h3>
<p>En el ML existen diversas formas de predecir distintas salidas, las que pueden ser continuas, discretas o categóricas (<a href="https://support.minitab.com/es-mx/minitab/18/help-and-how-to/modeling-statistics/regression/supporting-topics/basics/what-are-categorical-discrete-and-continuous-variables/">aquí un enlace de minitab acerca del tipo de variables en Estadística</a>).</p>
<p>En este caso particular, estamos tratando de predecir variables categóricas, por lo que <b>se trata de un problema de clasificación</b>. Respecto al plan Paso a Paso, se definen distintas etapas de confinamiento (en orden de menor a mayor libertades):</p>
<ul class="simple">
<li><p><b>Cuarentena (fase 1)</b></p></li>
<li><p><b>Transición (fase 2)</b></p></li>
<li><p><b>Preparación (fase 3)</b></p></li>
<li><p><b>Apertura Inicial (fase 4)</b></p></li>
<li><p><b>Apertura Avanzada (fase 5)</b></p></li>
</ul>
<p>De esta forma, deberemos categorizar un determinado conjunto de observaciones de un día, y predecir si dicho día, de acuerdo a valores epidemiológicos o temporales, una determinada comuna debería encontrarse en alguna de las etapas de confinamiento del plan Paso a Paso:</p>
<ul class="simple">
<li><p><b>Valores epidemiológicos como número de contagios, testeo, etc.</b></p></li>
<li><p><b>Valores temporales (tiempo en confinamiento por comuna de acuerdo a límites del plan Paso a Paso)</b></p></li>
</ul>
<p>Así entonces, <b>se categorizará por alguna de las fases del plan Paso a Paso</b>. ¡Sin embargo! De acuerdo al plan <a class="footnote-reference brackets" href="#estrategiagradual-pasopaso" id="id11">3</a>, una comuna deberá permanecer, mínimamente, dos semanas en una determinada fase <span id="id12">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id6">dSdC21</a>]</span> (al menos, es lo que está especificado para la fase 1, en la edición del plan del <a href="https://s3.amazonaws.com/gobcl-prod/public_files/Campa%C3%B1as/Corona-Virus/documentos/paso-a-paso/210429_Plan_Paso_a_Paso.pdf">29 de abril de 2021 | Pg. 4</a>). Respecto a la fase 1 (Cuarentena), se menciona:</p>
<ul class="simple">
<li><p>“<b><i>Tendrá una duración acotada: máximo 4 semanas. A la semana 2 se evaluará si se avanza o no, y si sigue en Cuarentena se evaluará el avance semana a semana.</i></b>”</p></li>
</ul>
<p>Asimismo, respecto a la fase 2 (Transición), se menciona:</p>
<ul class="simple">
<li><p>“<b><i>Duración mínima de dos semanas, con el objetivo de que una comuna no vuelva inmediatamente a Cuarentena.</i></b>”</p></li>
</ul>
<p>Éstos anunciados son, propiamente tal, <strong>restricciones</strong>, las cuales deberíamos considerar en el modelo a desarrollar. El inconveniente es que, como tal, Scikit-learn no permite añadir restricciones, y en cierta manera, es innecesario de hacer. De por sí, el algoritmo debería aprender de los datos.</p>
<p>Por otro lado, el Ministerio de Salud se ha mostrado flexible en torno a estas medidas en razón de las condiciones epidemiológicas, las que en caso de ser críticas, y suponiendo, una comuna en cuarentena, no implicará, en definitiva, un avance a transición por el único hecho de cumplir un mes en confinamiento. Situación similar fue lo que sucedió en las comunas de Iquique y Alto Hospicio, donde ambas, estuvieron 58 días en confinamiento (<em>desde el 20 de marzo de 2021 al 16 de marzo del mismo año</em>). Ésto se puede apreciar en las columnas de la base de datos, <code class="docutils literal notranslate"><span class="pre">Paso</span> <span class="pre">a</span> <span class="pre">Paso</span> <span class="pre">Iquique</span></code> y <code class="docutils literal notranslate"><span class="pre">Paso</span> <span class="pre">a</span> <span class="pre">Paso</span> <span class="pre">Alto</span> <span class="pre">Hospicio</span></code>.</p>
<p>En este caso, el algoritmo debería contemplar estas restricciones en la función objetivo, a partir de los pesos de los parámetros.</p>
</div>
</div>
<div class="section" id="seleccionando-el-modelo">
<h2>Seleccionando el modelo<a class="headerlink" href="#seleccionando-el-modelo" title="Permalink to this headline">¶</a></h2>
<p>Visto lo que es la regresión logística, y en concreto, lo que son los problemas de clasificación, ya sabemos con lo que estamos lidiando. El inconveniente es el siguiente: Sé mucho sobre la teoría y poco de la práctica. Por ello, deberemos utilizar una planilla de Scikit-learn. ¡Sin embargo! Recordemos que tratamos con un <strong>problema de clasificación</strong>.</p>
<div class="figure align-default" id="id14">
<img alt="https://scikit-learn.org/stable/_static/ml_map.png" src="https://scikit-learn.org/stable/_static/ml_map.png" />
<p class="caption"><span class="caption-number">Fig. 21 </span><span class="caption-text"><strong>Guía para seleccionar un algoritmo</strong>. Imagen de Scikit-learn <span id="id13">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id12">Sl</a>]</span>.</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="metodologia">
<h3>Metodología<a class="headerlink" href="#metodologia" title="Permalink to this headline">¶</a></h3>
<p>Con la imagen, seguiremos el trayecto, realizando la pregunta y la corrobaremos.</p>
</div>
<div class="section" id="el-camino">
<h3>El camino<a class="headerlink" href="#el-camino" title="Permalink to this headline">¶</a></h3>
<p>Tenemos los algoritmos de clasificación en la sección superior izquierda. Sin embargo, comencemos desde el “<strong>START</strong>” o inicio.</p>
<blockquote>
<div><p>¿Tenemos menos de 50 observaciones o datos?</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;Contamos con **</span><span class="si">{}</span><span class="s1">** filas de observaciones o datos.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>Contamos con <strong>484</strong> filas de observaciones o datos.</p>
</div>
</div>
<blockquote>
<div><p>¿Tenemos que predecir una categoría?</p>
</div></blockquote>
<p>¡Sí! En concreto, si una comuna debe estar en Cuarentena, Transición, Preparación, Apertura Inicial o Apertura Avanzada.</p>
<blockquote>
<div><p>¿Tienes datos etiquetados?</p>
</div></blockquote>
<p>Aún no, pero fácilmente los podremos etiquetar más adelante, por lo que la respuesta final es sí.</p>
<blockquote>
<div><p>¿Tienes menos de cien mil observaciones o datos?</p>
</div></blockquote>
<p>Sí. Contamos con <strong>463</strong> observaciones.</p>
<blockquote>
<div><p>Utiliza el clasificador SVC, y en caso de no funcionar, ¿tienes información de texto?</p>
</div></blockquote>
<p>No. Tenemos la salida categorizada, pero nuestra entrada se basa en datos numéricos.</p>
<blockquote>
<div><p>Utiliza el clasificador por vecindad (<em>supongo el nombre es similar</em>). Si no funciona, utiliza SVC o clasificador de ensamblaje.</p>
</div></blockquote>
</div>
<div class="section" id="no-tan-pronto-statistics-intensifies">
<h3>No tan pronto (statistics intensifies)<a class="headerlink" href="#no-tan-pronto-statistics-intensifies" title="Permalink to this headline">¶</a></h3>
<p>La planilla que obtuvimos de Scikit-learn (crédito a <a href="https://peekaboo-vision.blogspot.com/2013/01/machine-learning-cheat-sheet-for-scikit.html">Andreas Müller</a> y el equipo de Scikit-learn) nos indica que deberíamos utilizar un modelo lineal SVC.</p>
<p>Vale. ¡Tenemos una idea! Pero… <strong>¿Cómo llegamos a este resultado? ¿Qué es lo que se oculta?</strong></p>
<p><strong>Todo tiene que tener un sentido</strong>, y no podemos realizar las cosas sin saber el fundamento teórico. Es algo mínimo que toda persona apasionada debería hacer. Por ello, profundizaremos.</p>
<blockquote>
<div><p>El fundamento teórico estará basado en distintos autores que recopilaron o aplicaron modelos basados en <strong>KDE y SVC</strong>.</p>
</div></blockquote>
<div class="section" id="por-que-partir-por-el-kde">
<h4>¿Por qué partir por el KDE?<a class="headerlink" href="#por-que-partir-por-el-kde" title="Permalink to this headline">¶</a></h4>
<p>Encontré que, la aproximación por Kernel, <em>es un algoritmo denso</em>. De esta forma, consideré que, si era capaz de dar a entender, a partir de la bibliografía, cómo funciona el algoritmo <strong>KDE</strong> (<em>al menos, visto de una forma macro</em>), lograría entonces explicar el <strong>SVC</strong>.</p>
<p>Dicho ésto, ¡comenzamos!</p>
</div>
<div class="section" id="inferencia-estadistica">
<h4>Inferencia estadística<a class="headerlink" href="#inferencia-estadistica" title="Permalink to this headline">¶</a></h4>
<p>Según Economipedia, la inferencia estadística <a class="footnote-reference brackets" href="#economipedia-inferenciaestadistica" id="id15">4</a>, <em>es el conjunto de métodos que permiten inducir, a través de una muestra estadística, el comportamiento de una determinada población. La inferencia estadística, estudia entonces cómo, a través de la aplicación de dichos métodos sobre los datos de una muestra, se pueden extraer conclusiones sobre los parámetros de la población de datos. De la misma manera estudia también el grado de fiabilidad de los resultados extraídos del estudio</em> <span id="id16">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id13">Lop</a>]</span>.</p>
<p>Con respecto a la definición, la inferencia estadística utiliza dos métodos posibles de acuerdo a ciertos criterios que tienen relación con la certeza, cantidad de datos, etc. que son la <strong>estadística paramétrica y la no paramétrica</strong>.</p>
<p>En palabras simples, la estadística paramétrica asume que la distribución de los datos es conocida, lo que refiere a que, los estadísticos (media, mediana, etc.) describen correctamente los datos.</p>
<p><strong>Nuestra labor es reconocer si nos es útil la estadística parámetrica o no paramétrica</strong> en este caso puntual.</p>
<blockquote>
<div><p>Cabe recalcar que, tanto la estadística paramétrica como no paramétrica son complementarias. De hecho, la utilización de la no paramétrica depara, eventualmente, en métodos de la estadística paramétrica.</p>
</div></blockquote>
</div>
<div class="section" id="hipotesis-no-estadistica">
<h4>Hipótesis no estadística<a class="headerlink" href="#hipotesis-no-estadistica" title="Permalink to this headline">¶</a></h4>
<p>La pregunta es, <strong>¿conocemos la distribución de los datos?</strong> <em>La respuesta es, posiblemente, no</em>. La pandemia se caracteriza por cifras que, lejos de ser regulares, dependen de múltiples factores y tienden a la variabilidad. Por dicha razón, la distribución se ve afectada, constantemente, por los confinamientos, por la movilidad, por el muestreo, entre otros.</p>
<p>Ahora bien, lo anterior es, netamente, una hipótesis. Debemos corroborarla, y para ello, simplificaremos un poco nuestro trabajo. Nos basaremos en “<em>El blog de Minitab</em>” <a class="footnote-reference brackets" href="#blogminitab-pruebaestadistica" id="id17">5</a>, en específico, “<em>¿Cómo elegir entre una prueba no paramétrica y una prueba paramétrica?</em>”. En estricto rigor, la elección del tipo de prueba estadística (metodología para evaluar la evidencia que proporcionan los datos, probando una hipótesis), nos brindará si <strong>deberemos utilizar un método paramétrico o no paramétrico</strong>. Notar que, justamente, los clasificadores <strong>SGD y KDE</strong>, tal como la <strong>regresión logística</strong> y el estimador <strong>SVC</strong> son clasificadores no paramétricos.</p>
<p>En <span id="id18">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id14">Edi19</a>]</span>, se expone que, una de las razones para utilizar las pruebas no paramétricas refiere a “<em>el área de estudio se representa mejor con la mediana</em>”. Según el editor del blog, aclara “<em>Por ejemplo, el centro de una distribución asimétrica, como los ingresos, puede medirse mejor con la mediana, donde el 50% está por encima de la mediana y el 50% está por debajo. Si usted agrega varios multimillonarios a una muestra, la media matemática aumenta enormemente aunque el ingreso de la persona típica no cambia. Cuando la distribución es lo suficientemente asimétrica, la media se ve afectada fuertemente por cambios que ocurren lejos, en la cola de la distribución, mientras que la mediana sigue reflejando con mayor precisión el centro de la distribución. Para estas dos distribuciones, una muestra aleatoria de 100 proveniente de cada distribución produce medias que son significativamente diferentes, pero medianas que no son significativamente diferentes</em>”.</p>
<p>Considerando el punto anterior, le daremos un vistazo a la distribución de los datos y su asimetría. Buscaremos todas aquellas columnas de datos que, como máximo, tengan una curtosis igual a <strong>0.05 como valor absoluto</strong> (<em>aproximadamente normal</em>). También podríamos utilizar <span class="math notranslate nohighlight">\( media = mediana \)</span> como en toda distribución normal, pero para ser un poco flexibles, utilizamos una leve aproximación a una distribución normal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">skew</span><span class="p">()[</span><span class="nb">abs</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">skew</span><span class="p">())</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">][</span><span class="n">df</span><span class="o">.</span><span class="n">skew</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39; &lt;h3&gt; Para la columna </span><span class="si">{}</span><span class="s1"> &lt;/h3&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">column</span><span class="p">)))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">column</span><span class="p">)],</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&gt; El valor de la curtosis es de **</span><span class="si">{}</span><span class="s1">**&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">column</span><span class="p">)]</span><span class="o">.</span><span class="n">skew</span><span class="p">())))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
 <h3> Para la columna Antigenos informados acumulados </h3><blockquote>
<div><p>El valor de la curtosis es de <strong>0.04572182480337589</strong></p>
</div></blockquote>
<img alt="../../_images/2_thisistheway_19_2.png" src="../../_images/2_thisistheway_19_2.png" />
 <h3> Para la columna Numero de residencias </h3><blockquote>
<div><p>El valor de la curtosis es de <strong>-0.04329768311950426</strong></p>
</div></blockquote>
<img alt="../../_images/2_thisistheway_19_5.png" src="../../_images/2_thisistheway_19_5.png" />
 <h3> Para la columna Vacunados acumulados 1° dosis </h3><blockquote>
<div><p>El valor de la curtosis es de <strong>0.03758352307220687</strong></p>
</div></blockquote>
<img alt="../../_images/2_thisistheway_19_8.png" src="../../_images/2_thisistheway_19_8.png" />
 <h3> Para la columna Casos acumulados en Pica </h3><blockquote>
<div><p>El valor de la curtosis es de <strong>0.025589718370190535</strong></p>
</div></blockquote>
<img alt="../../_images/2_thisistheway_19_11.png" src="../../_images/2_thisistheway_19_11.png" />
 <h3> Para la columna Movilidad Alto Hospicio </h3><blockquote>
<div><p>El valor de la curtosis es de <strong>0.02350059892232712</strong></p>
</div></blockquote>
<img alt="../../_images/2_thisistheway_19_14.png" src="../../_images/2_thisistheway_19_14.png" />
</div>
</div>
<p>Prácticamente, no existe normalidad, y las pocas columnas que son, <em>aproximadamente normales</em>, se deben a datos de comunas con baja población, o que contienen bajo número de observaciones (a raíz de ser añadidas hace poco tiempo al <a href="https://github.com/MinCiencia/Datos-COVID19">repositorio del Min. Ciencia</a>). <strong>Estas columnas las descartamos al asignar que la curtosis sea distinta de cero</strong>.</p>
<p>Antes de introducir el funcionamiento de la Aproximación por Kernel, indagaremos, de forma breve, el funcionamento de los modelos de Machine Learning (<strong>basándonos en la bibliografía recopilada para el funcionamiento del clasificador KDE</strong>).</p>
</div>
</div>
</div>
<div class="section" id="maquinas">
<h2>Máquinas<a class="headerlink" href="#maquinas" title="Permalink to this headline">¶</a></h2>
<p>Para estas dos próximas secciones, nos basaramos en dos fuentes, en la primera parte de S. Van Vaerenbergh, I. Santamaría <a class="footnote-reference brackets" href="#kernel-vaerenbergh" id="id19">6</a>, “<i>Métodos Kernel para clasificación</i>” y en la de Joaquín Amat Rodrigo, “<i>Ajuste de distribuciones con kernel density estimation y Python</i>”. Sin embargo, complementaremos ambas fuentes con algunas analogías y ejemplos explicativos realizados al mejor de mis posibilidades.</p>
<p>Cabe recalcar que, referente a la estadística paramétrica y no paramétrica, el <strong>clasificador KDE se sustenta en la estadística no paramétrica</strong> (considerando las suposiciones que ello implica).</p>
<div class="section" id="la-academia">
<h3>La academia<a class="headerlink" href="#la-academia" title="Permalink to this headline">¶</a></h3>
<p>Recuerdo, cuando estudiaba Teoría de Sistemas, revisaba la Antigua Grecia, y en concreto, el cómo se fundó la Academia, y el cómo el conocimiento de los filósofos se limitó a unos pocos, conllevando a que, personas que escuchaban los diálogos en público, perdieran esa oportunidad de acceder, levemente, al conocimiento. En ese sentido, siempre me ha gustado rebajar los tecnicismos para que sea comprendido por todos y todas. El no rebajar el contenido es una gran falencia en el mundo de las exposiciones modernas.</p>
<p>Por lo anterior, son enormes las contribuciones de S. Van Vaerenbergh, I. Santamaría y Joaquín Amat Rodrigo. Les agradezco, ya que sin Uds. me sería imposible lograr comprensión en estos campos profundos.</p>
</div>
<div class="section" id="que-son-los-clasificadores-como-se-entrenan">
<h3>¿Qué son los clasificadores? ¿Cómo se entrenan?<a class="headerlink" href="#que-son-los-clasificadores-como-se-entrenan" title="Permalink to this headline">¶</a></h3>
<p>Un clasificador es, básicamente, un algoritmo capaz de, a partir de un conjunto de entrada, generar una salida etiquetada o clasificada (que ya es conocida).</p>
<p>En nuestro caso, sabemos que las comunas deben estar en Cuarentena, Transición, …, etc. por lo que, lo que realizaremos, será, desarrollar un clasificador o algoritmo capaz de, a partir de las variables de entrada (que por ejemplo, pueden ser los casos acumulados o activos por comuna), clasificar en variables discretas categóricas. ¿Por qué variables discretas?  Porque nuestro conjunto de salida debe ser finito, ya que tenemos solo cinco posibles salidas que son las fases del Paso a Paso.</p>
<div class="figure align-default" id="id20">
<img alt="https://images.pexels.com/photos/5063561/pexels-photo-5063561.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" src="https://images.pexels.com/photos/5063561/pexels-photo-5063561.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" />
<p class="caption"><span class="caption-number">Fig. 22 </span><span class="caption-text"><strong>Aprender</strong>. Fotografía de Monstera en Pexels.</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
<p>Respecto al entrenamiento, y visto de una forma muy básica, ¿cómo aprendes cosas? Estudiando, practicando, escuchando, etc. dependiendo de la forma en que te sea cómoda aprender, ¿no es así? Elegida la forma cómoda, repites hasta eventualmente aprender. Si te equivocas, <strong>vuelves a repetir la forma cómoda</strong>, ¡hasta que luego no te equivocas! <strong>A partir del error, y la iteración (repetición) de tu forma cómoda, aprendes</strong>.</p>
<p>Nuevamente, obviamos todo el proceso complejo que realiza el cerebro, y <strong>solo nos centramos en esa forma básica de aprendizaje. Ese aprendizaje es el que realizan los algoritmos al simular una lógica a través de la matemática</strong>.</p>
<p>Explicados brevemente los conceptos anteriores, seguimos con la siguiente sección.</p>
</div>
<div class="section" id="que-es-el-aprendizaje-estadistico">
<h3>¿Qué es el aprendizaje estadístico?<a class="headerlink" href="#que-es-el-aprendizaje-estadistico" title="Permalink to this headline">¶</a></h3>
<p>Supongamos tres clasificadores entrenados sobre el conjunto de entrenamiento de la figura.</p>
<div class="figure align-default" id="id21">
<img alt="../../_images/3_boundary.png" src="../../_images/3_boundary.png" />
<p class="caption"><span class="caption-number">Fig. 23 </span><span class="caption-text"><strong>Límite de decisión</strong>. Elaboración propia (perdón lo cutre).</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
<p>¿Qué clasificador funcionará mejor sobre el conjunto de prueba? ¡Espera! Algo se me olvidaba. En la imagen, puedes apreciar dos figuras, ¿no es así? <strong>Pues, en el caso de las circunferencias azules pueden significar, supongamos, fotografías de perros, y en el caso de las cruces rojas, pueden referirse a fotografías de gatos</strong>.</p>
<div class="figure align-default" id="id22">
<img alt="https://images.pexels.com/photos/1909802/pexels-photo-1909802.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" src="https://images.pexels.com/photos/1909802/pexels-photo-1909802.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" />
<p class="caption"><span class="caption-number">Fig. 24 </span><span class="caption-text"><strong>Un perro y un gato</strong>. Fotografía de Sharon McCutcheon en Pexels.</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</div>
<p>Supongamos nosotros deseamos entrenar un algoritmo capaz de diferenciar entre imágenes de perros y gatos. En este caso, el límite de decisión verde, lo que realiza es separar ambos conjuntos de perros y gatos, y dependiendo de qué variable de entrada le brindes, te la clasificará de acuerdo al clasificador.</p>
<p>Si le pasas una imagen borrosa de un gato, a un algoritmo entrenado con un <strong>conjunto mediano de imágenes nítidas y borrosas de perros y gatos</strong>:</p>
<ul class="simple">
<li><p>Te clasificará un gato <strong>si está bien entrenado</strong> (appropiate-fitting, o bien ajustado a los datos).</p></li>
</ul>
<p>Si le pasas una imagen borrosa de un gato, a un algoritmo entrenado con un <strong>conjunto pequeño de imágenes borrosas de perros y gatos</strong>:</p>
<ul class="simple">
<li><p>Te podrá clasificar un perro <strong>si no está bien entrenado</strong> (under-fitting, o con un mal ajuste a los datos).</p></li>
</ul>
<p>Si le pasas una imagen borrosa de un gato, a un algoritmo entrenado con un <strong>conjunto muy grande de imágenes nítidas de perros y gatos</strong>:</p>
<ul class="simple">
<li><p>Te podrá clasificar un perro <strong>si intenta, en exceso, ajustarse a los datos</strong> (over-fitting, o un sobreajuste a los datos).</p></li>
</ul>
<p><strong>¿Por qué te podría brindar un perro?</strong> Pues, en base a las dos situaciones anteriores en que brindaba un perro:</p>
<ul class="simple">
<li><p>En la segunda situación, el under-fitting se caracteriza por un límite de decisión, o un clasificador, que no se ajusta a los datos, o dicho de otra forma, <strong>tiene un amplio sesgo</strong>.</p></li>
<li><p>En la tercera situación, el over-fitting se caracteriza por un clasificador que se sobreajusta a los datos, o dicho de otro modo, intenta, de sobremanera, ajustarse a la entrada que le brindes. Ésto implica que, al pasarle una imagen borrosa de un gato, puede pensar que es un perro, ya que, al ser borrosa, el algoritmo no estará entrenado para clasificar imágenes borrosas. ¿Por qué? <strong>El clasificador se especializó en aprender a partir de imágenes nítidas, y el único hecho que le brindes una imagen borrosa implicará que no sabrá cómo actuar ante esa entrada</strong>.</p></li>
</ul>
<div class="figure align-default" id="id23">
<img alt="https://miro.medium.com/proxy/1*oB3S5yHHhvougJkPXuc8og.gif" src="https://miro.medium.com/proxy/1*oB3S5yHHhvougJkPXuc8og.gif" />
<p class="caption"><span class="caption-number">Fig. 25 </span><span class="caption-text"><strong>Clasificación a través de una red neuronal</strong>. GIF de <a href="https://purnasaigudikandula.medium.com/recurrent-neural-networks-and-lstm-explained-7f51c7f6bbb9">purnasai gudikandula en Medium</a>.</span><a class="headerlink" href="#id23" title="Permalink to this image">¶</a></p>
</div>
<p>Recomiendo el siguiente vídeo del divulgador de Inteligencia Artificial, <a href="https://www.youtube.com/channel/UCy5znSnfMsDwaLlROnZ7Qbg">DOT.CSV</a>:</p>
<center><iframe src="https://www.youtube.com/embed/7-6X3DTt3R8?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe></center>
<p>A modo de resumen del vídeo <span id="id24">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id18">Veg19</a>]</span>, se entiende que:</p>
<div class="figure align-default" id="id25">
<img alt="https://images.pexels.com/photos/7092609/pexels-photo-7092609.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" src="https://images.pexels.com/photos/7092609/pexels-photo-7092609.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" />
<p class="caption"><span class="caption-number">Fig. 26 </span><span class="caption-text"><strong>Un estudiante copiando</strong>. Fotografía de <a href="https://www.pexels.com/es-es/foto/hombre-escritura-colegio-libro-7092609/">RODNAE Productions en Pexels</a>.</span><a class="headerlink" href="#id25" title="Permalink to this image">¶</a></p>
</div>
<ul class="simple">
<li><p>El <strong>under-fitting</strong> (ajuste bajo, o <strong>un algoritmo que no explica los datos</strong>) es áquel estudiante que no estudia, y no logra buenas calificaciones. ¿Por qué? Posiblemente, por <strong>falta de entrenamiento</strong>, <strong>falta de material de estudio</strong>, etc.</p></li>
<li><p>El <strong>appropiate-fitting</strong> (buen ajuste, o <strong>un algoritmo que explica los datos</strong>) es áquel estudiante que estudia, y que logra buenas calificaciones sin, necesariamente, lograr la nota máxima. ¿Por qué? <strong>No memorizó el material de estudio</strong>, <strong>tampoco le faltó material de estudio</strong>. Sencillamente, estudio para aprender, <strong>no para la evaluación</strong>.</p></li>
<li><p>El <strong>over-fitting</strong> (excesivo ajuste, o <strong>un algoritmo que intenta, de sobre manera, explicar los datos</strong>) es áquel estudiante que estudia memorizando el contenido, logrando excelentes calificaciones. ¿Por qué? <strong>Memoriza el material de estudio</strong>, tiene <strong>demasiado material de estudio, pero que únicamente entrará en la evaluación</strong>. Es decir, estudia solo los contenidos para la evaluación, y por ende, si en la prueba se añade un problema de aplicación, distinto a lo que estudió, no sabrá responder correctamente, porque solo estudió un determinado tipo de problemas.</p></li>
</ul>
<p>¿Quién de estos estudiantes es el más propicio para desarrollar un problema? Es evidente. Esa es la mejor explicación que he escuchado y visto en base al aprendizaje de los algoritmos. Enorme el aporte de <strong>Carlos Santana Vega</strong> <a class="footnote-reference brackets" href="#dotcsv" id="id26">7</a>. Recomiendo, plentamente, <a href="https://www.youtube.com/channel/UCy5znSnfMsDwaLlROnZ7Qbg">su canal para los apasionados sobre IA y ML</a>.</p>
<p>¡Sigamos! Nuevamente, ¿qué clasificador funcionará sobre el conjunto de prueba? Puedes realizar una analogía con el ejemplo anterior.</p>
<p>Es evidente que, existe un compromiso entre:</p>
<ul class="simple">
<li><p>Error en el entrenamiento o error de generalización.</p></li>
<li><p>Sesgo o varianza del modelo entrenado.</p></li>
</ul>
<p>¿Qué hace el aprendizaje estadístico? Según <span id="id27">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id10">SVV18</a>]</span>, el aprendizaje estadístico formaliza estas ideas, caracterizando propiedades matemáticas de las máquinas de aprendizaje.</p>
<p>En relación a una “máquina de aprendizaje”, hace referencia a modelos de predicción, que nuevamente, son algoritmos o clasificadores.</p>
<p>Antes de avanzar hacia la comprensión del modelo KDE, introduciremos, brevemente, la regresión logística.</p>
</div>
<div class="section" id="regresion-logistica">
<h3>Regresión logística<a class="headerlink" href="#regresion-logistica" title="Permalink to this headline">¶</a></h3>
<p>Introduciré, brevemente, el concepto de regresión logística. Te recomiendo los notebooks que he recopilado sobre:</p>
<ul class="simple">
<li><p><a href="https://github.com/adinamarca/notebooks/blob/main/PY/ML/1_regresion_lineal/notebook.ipynb">Regresión lineal</a>.</p></li>
<li><p><a href="https://github.com/adinamarca/notebooks/blob/main/PY/ML/2_descenso_gradiente/notebook.ipynb">Descenso del gradiente</a>.</p></li>
<li><p><a href="https://github.com/adinamarca/notebooks/blob/main/PY/ML/3_regresion_logistica/notebook.ipynb">Regresión logística</a>.</p></li>
</ul>
<p>O bien, puedes encontrar otros en el <a href="https://github.com/adinamarca/notebooks/tree/main/PY/ML">siguiente enlace</a>. Es sumamente relevante tener ese conocimiento previo para comprender lo que realizaremos a continuación.</p>
<div class="figure align-default" id="id28">
<img alt="https://github.com/adinamarca/notebooks/raw/33bccc581718dcabf5ab1fb1dcdcad8820c105fd/PY/ML/3_regresion_logistica/1.png" src="https://github.com/adinamarca/notebooks/raw/33bccc581718dcabf5ab1fb1dcdcad8820c105fd/PY/ML/3_regresion_logistica/1.png" />
<p class="caption"><span class="caption-number">Fig. 27 </span><span class="caption-text"><strong>Para la fuente, visitar el notebook que realicé. <a href="https://github.com/adinamarca/notebooks/blob/main/PY/ML/3_regresion_logistica/notebook.ipynb">Enlace aquí</a></strong>.</span><a class="headerlink" href="#id28" title="Permalink to this image">¶</a></p>
</div>
<center><a href=""><img src="" style="width:400px; margin:20px"></img></a></center>
<p>Lo que sucede aquí es lo siguiente. ¡Debemos clasificar! Para ello, introduciré una idea de un algoritmo de clasificación.</p>
<p>¿Son valores discretos? Sí. ¿Por qué? No tenemos una infinidad de valores como predecir, por ejemplo, el precio de una casa, que puede ser un valor desde <span class="math notranslate nohighlight">\(\$ 10.000 \)</span>, <span class="math notranslate nohighlight">\(\$ 10.500 \)</span>, <span class="math notranslate nohighlight">\(\$ 14.403 \)</span> o <span class="math notranslate nohighlight">\(\$ 15.600,50 \)</span> si calculamos en dólares. ¡Tenemos infinitas posibilidades! En cambio, aquí solo tenemos las etapas del plan Paso a Paso, las que definiremos:</p>
<ul class="simple">
<li><p>Fase 1 (Cuarentena), como <b>1</b>.</p></li>
<li><p>Fase 2 (Transición), como <b>2</b>.</p></li>
<li><p>Fase 3 (Preparación), como <b>3</b>.</p></li>
<li><p>Fase 4 (Apertura Inicial), como <b>4</b>.</p></li>
<li><p>Fase 5 (Apertura Avanzada), como <b>5</b>.</p></li>
</ul>
<p>Es decir, para una determinada comuna, tendremos una salida que puede ser solo un valor del siguiente vector:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( \Large [1, 2, 3, 4, 5]\)</span></p></li>
</ul>
<p>Así entonces, la regresión logística nos brindará la probabilidad de que una determinada comuna esté en alguna de las cinco fases. ¿Cuál es la fórmula de la regresión logística? Se constituye a partir de la regresión lineal, y de hecho, la involucra.</p>
<p>Siendo <span class="math notranslate nohighlight">\( h_ \theta (X) = g( \theta ^{T}X) \)</span>, definimos <span class="math notranslate nohighlight">\( Z =  \theta ^{T}X \)</span>, de forma que, <span class="math notranslate nohighlight">\( h_ \theta (X) = g(Z) \)</span>.</p>
<p>Lo que representa <span class="math notranslate nohighlight">\( h_ \theta (X) \)</span> es la regresión lineal, mientras <span class="math notranslate nohighlight">\( g( \theta ^{T}X) \)</span> representa la regresión logística. Es similar a lo que decíamos antes, que la salida de X puede ser la entrada de Y (lo que es una composición de funciones).</p>
<p>Ahora, ¿cómo representamos al regresión logística? La definimos:</p>
<p><span class="math notranslate nohighlight">\( \Large h_ \theta (X) = g(Z) \)</span>, donde <span class="math notranslate nohighlight">\( \Large g(Z) = \frac{1}{1+e^{-z}} \)</span> y <span class="math notranslate nohighlight">\( \Large Z = \theta ^{T}X \)</span>, por tanto,</p>
<p><span class="math notranslate nohighlight">\( \Large g( \theta ^{T}X) = \frac{1}{1+e^{- \theta ^{T}X}} \)</span></p>
<div class="section" id="grafica">
<h4>Gráfica<a class="headerlink" href="#grafica" title="Permalink to this headline">¶</a></h4>
<p>La gráfica de la sigmoide y su derivada:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sigm</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">e</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">)),</span>
        <span class="c1">### Derivada de la función sigmoide</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">x</span><span class="p">))</span>

<span class="c1">### Variable generada de forma lineal, que va de -5 a 5 con 100 valores</span>
<span class="n">_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1">### Ahora si deseamos acceder a la derivada de la función sigmoide</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">_x</span><span class="p">,</span> <span class="n">sigm</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">_x</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;sigmoide&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">_x</span><span class="p">,</span> <span class="n">sigm</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="n">_x</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#1f77b4&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;derivada de la sigmoide&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#1f77b4&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2_thisistheway_23_0.png" src="../../_images/2_thisistheway_23_0.png" />
</div>
</div>
<p>Donde:</p>
<ul class="simple">
<li><p>La regresión logística tendrá una salida tal que <span class="math notranslate nohighlight">\( 0 &lt; \ h_\theta (X) \leq 1 \)</span> (representa la probabilidad de que la salida, Y, es <span class="math notranslate nohighlight">\(Y = 0\)</span> o <span class="math notranslate nohighlight">\(Y = 1\)</span>, o que es una clase 0 u otra clase 1).</p></li>
<li><p><span class="math notranslate nohighlight">\( \theta ^{T}X \)</span>: Suma ponderada de características. ¿Qué representa <span class="math notranslate nohighlight">\( \theta \)</span>? Representa las ponderaciones de cada una de las características <span class="math notranslate nohighlight">\(X\)</span> de acuerdo a su importancia en el modelo.</p></li>
<li><p>La función sigmoidea tiene dos asíntotas. Mientras <span class="math notranslate nohighlight">\( Z \)</span> va hacia menos infinito, <span class="math notranslate nohighlight">\( g(Z) \)</span> se aproxima a cero y mientras <span class="math notranslate nohighlight">\( g(Z) \)</span> tiende a infinito <span class="math notranslate nohighlight">\( Z \)</span> se aproxima a uno. Es decir, <span class="math notranslate nohighlight">\( g(Z) \)</span> ofrece valores que están entre 0 y 1 pero también tenemos que <span class="math notranslate nohighlight">\( h_ \theta (X) \)</span> debe estar entre 0 y 1.</p></li>
<li><p>Lo que debemos hacer es ajustar los parámetros <span class="math notranslate nohighlight">\( \theta \)</span> a nuestros datos. Así que dado un conjunto de entrenamiento, necesitamos elegir un valor para los parámetros <span class="math notranslate nohighlight">\( \theta \)</span> y esta hipótesis nos permitirá hacer predicciones.</p></li>
<li><p>La interpretación de la salida de la hipótesis se entiende a partir de <span class="math notranslate nohighlight">\( h_ \theta (X) = probabilidad \)</span>, donde la <span class="math notranslate nohighlight">\( probabilidad \)</span> es la prob. estimada que <span class="math notranslate nohighlight">\( y = 1 \)</span> en el ejemplo de entrada de <span class="math notranslate nohighlight">\( X \)</span>.</p></li>
</ul>
<p>Hay varias cosas que se nos quedan en el tintero, como el límite de decisión, el descenso del gradiente, entre otros. Nuevamente, recomiendo recurrir a los notebooks adjuntos (los que no están exentos de errores). Aunque, nuevamente, explicaremos brevemente estos conceptos en referencia a la regresión logística.</p>
</div>
<div class="section" id="el-limite-de-decision-resumido">
<h4>El límite de decisión resumido<a class="headerlink" href="#el-limite-de-decision-resumido" title="Permalink to this headline">¶</a></h4>
<p>El límite de decisión es el límite que nos explicará lo que hacen las regresiones logística, y en particular, de lo que son capaces de computar. En resumen, Suponemos <span class="math notranslate nohighlight">\( Y = 1 \)</span> cuando <span class="math notranslate nohighlight">\( 0.5 \leq g(Z) \)</span>. Suponemos <span class="math notranslate nohighlight">\( Y = 0 \)</span> cuando <span class="math notranslate nohighlight">\( 0.5 &gt; g(Z) \)</span>. El eje aquí es considerar el cómo está contemplado <span class="math notranslate nohighlight">\( \theta_{T}X \)</span>, donde está como exponente negativo de una exponencial, por lo que:</p>
<ul class="simple">
<li><p>Si <span class="math notranslate nohighlight">\( \theta_{T}X \)</span> es negativo, implicará un valor positivo del exponencial, y dado <span class="math notranslate nohighlight">\( \theta_{T}X = Z \)</span>, entonces, siempre que <span class="math notranslate nohighlight">\(0 &gt; Z\)</span>, <span class="math notranslate nohighlight">\(Y\)</span> tenderá a 0.</p></li>
<li><p>Si <span class="math notranslate nohighlight">\( \theta_{T}X \)</span> es positivo, implicará un valor negativo del exponencial, y dado <span class="math notranslate nohighlight">\( \theta_{T}X = Z \)</span>, entonces, siempre que <span class="math notranslate nohighlight">\(0 \leq Z\)</span>, <span class="math notranslate nohighlight">\(Y\)</span> tenderá a 1.</p></li>
</ul>
<p>En consideración con lo anterior, y de acuerdo a los valores que asignemos a los parámetros <span class="math notranslate nohighlight">\(\theta\)</span>, podremos obtener los límites de decisión a partir de la inecuación entre <span class="math notranslate nohighlight">\(0 \leq Z\)</span> para el área positiva o <span class="math notranslate nohighlight">\(0 &gt; Z\)</span> para el área negativa <span id="id29">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id4">NG11</a>]</span>. Ésto se puede apreciar en una imagen que capturé del curso de Andrew NG en Coursera, de la Universidad de Stanford. <a class="footnote-reference brackets" href="#mlandrewng" id="id30">8</a></p>
<center><a href="https://github.com/adinamarca/notebooks/blob/main/PY/ML/3_regresion_logistica/notebook.ipynb"><img src="https://github.com/adinamarca/notebooks/raw/33bccc581718dcabf5ab1fb1dcdcad8820c105fd/PY/ML/3_regresion_logistica/12.png" style="margin-bottom:20px"></img></a></center>
</div>
<div class="section" id="descenso-del-gradiente-resumido">
<h4>Descenso del gradiente resumido<a class="headerlink" href="#descenso-del-gradiente-resumido" title="Permalink to this headline">¶</a></h4>
<p>Respecto al descenso del gradiente, es el algoritmo mediante el cual se minimiza el error del modelo. Nos cuantificará el error a partir del valor hipotético, que deberá ser contrastado con el valor real. Este error se minimiza a partir del proceso iterativo de reducir, a partir de la <strong>convergencia</strong>. En otras palabras, que tiende a un límite, que en este caso, es al mínimo error (<strong>0</strong>), a través de la aplicación del gradiente (concepto de cálculo III).</p>
<p>Por tiempo, los conceptos matemáticos, como también, de programación, quedan fuera del alcance del Notebook. Pero como analogía, es similar al estar en una pendiente o en un cerro, ¿hacia dónde se desciende más prontamente sin caernos estrepitosamente o sin demorarnos demasiado en el transcurso? En esa pregunta formulada, está el gradiente y el parámetro de aprendizaje involucrado, que son conceptos que se pueden revisar en el notebook que dejaré en <a href="https://github.com/adinamarca/notebooks/blob/main/PY/ML/2_descenso_gradiente/notebook.ipynb">este enlace</a>.</p>
<p>Lo que quiero que comprendas es la finalidad del descenso del gradiente, <strong>que es minimizar el error de nuestro modelo de Machine Learning</strong>.</p>
<div class="figure align-default" id="id31">
<img alt="https://ichi.pro/assets/images/max/724/1*laN3aseisIU3T9QTIlob4Q.gif" src="https://ichi.pro/assets/images/max/724/1*laN3aseisIU3T9QTIlob4Q.gif" />
<p class="caption"><span class="caption-number">Fig. 28 </span><span class="caption-text"><strong>Algoritmo del descenso del gradiente. Ilustración de <a href="https://ichi.pro/es/gradient-descent-parte-2-las-matematicas-213513035934227">ICHIPRO</a></strong>.</span><a class="headerlink" href="#id31" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="la-deuda-de-kernel">
<h3>La deuda de Kernel<a class="headerlink" href="#la-deuda-de-kernel" title="Permalink to this headline">¶</a></h3>
<p>Definido entonces, lo que es el aprendizaje, la regresión logística, y otros conceptos, <strong>tenemos un dominio relativo</strong>. Sin embargo, <strong>la deuda sigue siendo vigente en torno a qué son las aproximaciones por Kernel</strong>, de lo cual, y a ser sincero, no manejo.</p>
<p>Me dediqué a buscar, sin éxito, <strong>algún texto explicativo</strong>, <strong>fácil de comprender</strong>, <strong>acerca de lo que es la aproximación por Kernel</strong>, hasta que encontré uno que me pareció muy bueno, <strong>y el cual aborda desde la Estadística su introducción</strong>. Este texto, fue realizado por <strong>Joaquín Amat Rodrigo</strong> <a class="footnote-reference brackets" href="#kernel-amat" id="id32">9</a>.</p>
<p>Sin más preámbulo, seguiremos en la siguiente sección con Joaquín Amat Rodrigo <span id="id33">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id11">Rod21</a>]</span>.</p>
<div class="section" id="cimientos">
<h4>Cimientos<a class="headerlink" href="#cimientos" title="Permalink to this headline">¶</a></h4>
<p>De acuerdo con <span id="id34">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id11">Rod21</a>]</span>, “<em>el identificar el tipo de distribución que tiene una variable es un paso fundamental en prácticamente todos los estudios que implican datos, desde los contrastes de hipótesis hasta la creación de modelos por aprendizaje estadístico y machine learning</em>” <a class="footnote-reference brackets" href="#kernel-amat" id="id35">9</a>.</p>
<div class="figure align-default" id="id36">
<img alt="https://images.pexels.com/photos/186461/pexels-photo-186461.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" src="https://images.pexels.com/photos/186461/pexels-photo-186461.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" />
<p class="caption"><span class="caption-number">Fig. 29 </span><span class="caption-text">Fotografía de Burak Kepapci en Pexels.</span><a class="headerlink" href="#id36" title="Permalink to this image">¶</a></p>
</div>
<p>“<em>Son muchas las ventajas que tiene disponer de una función que describa aproximadamente los datos. Por ejemplo, se puede calcular la probabilidad (o densidad en el caso de variables aleatorias continuas) de que una observación tome un determinado valor. También es posible simular nuevos valores</em>” <a class="footnote-reference brackets" href="#kernel-amat" id="id37">9</a>.</p>
<p>Lo anterior, nos afirma una solución a nuestra problemática. <strong>Si deseamos predecir el Paso a Paso</strong>, podemos utilizar la ya definida estadística no paramétrica.</p>
<p>“<em>En términos generales, ajustar una distribución consiste en encontrar una función matemática capaz de describir un conjunto de datos. De entre todas las posibles funciones candidatas, lo interesante es encontrar aquella que, con mayor probabilidad, puede haber generado los datos observados</em>.</p>
<p><em>Una de las aproximaciones más prácticas es utilizar como candidatas distribuciones parámetras, estas son distribuciones conocidas cuyo comportamiento está determinado usando un número finito de parámetros. Por ejemplo, la distribución normal está parametrizada por la media y la desviación típica</em>.</p>
<p><em>Cuando ninguna de las distribuciones paramétricas disponibles describe correctamente los datos, es necesario recurrir a lo que se conoce como métodos de ajuste no parámetricos, cuyo objetivo es encontrar funciones que describan distribuciones cualesquiera, entendiendo a que no se limitan a distribuciones paramétricas conocidas. Uno de los métodos más empleados es kernel density estimation (KDE)</em>” <a class="footnote-reference brackets" href="#kernel-amat" id="id38">9</a>.</p>
<p>Así entonces, están sentadas las bases. Debo declarar que <strong>Joaquín Amat Rodrigo</strong> resumió y explicó en gloria y majestad lo que intenté exponer en las secciones anteriores.</p>
</div>
<div class="section" id="kde-kernel-density-estimation">
<h4>KDE (kernel density estimation)<a class="headerlink" href="#kde-kernel-density-estimation" title="Permalink to this headline">¶</a></h4>
<p>“<em>En estadística, kernel density estimation (KDE), es un método no paramétrico que permite estimar la función de densidad de probabilidad de una variable aleatoria a partir de un número finito de observaciones (muestra). Fue propuesto por Fix y Hodges (1951) y Rosenblatt (1956)</em>.</p>
<p><em>Dado un valor  <span class="math notranslate nohighlight">\(x_{i}\)</span>  la función aprendida por el kernel density estimator devuelve la densidad de la distribución en el punto  <span class="math notranslate nohighlight">\(x_{i}\)</span>. Esta densidad, cuyo valor está acotado al rango <span class="math notranslate nohighlight">\([0, + \infty]\)</span>, es una medida relativa de verosimilitud (likelihood). Si la densidad para el punto A es mayor que la de B, significa que la probabilidad de que A pertenezca a la distribución es mayor que la de B. Con frecuencia, para facilitar los cálculos, en lugar de utilizar el valor de densidad se utiliza el su logaritmo, aun así, la interpretación es la misma, cuanto mayor su valor, mayor la evidencia de que la observación pertenece a la distribución</em>” <a class="footnote-reference brackets" href="#kernel-amat" id="id39">9</a>.</p>
<p>Es decir, lo que realizaremos con el KDE será estimar la densidad de la distribución (el Paso a Paso por comuna), a partir de los datos de entrada que deberemos seleccionar en la próxima sección. <em>O al menos, esa es la idea parcial hasta el momento</em>.</p>
<div class="section" id="a-fondo">
<h5>A fondo<a class="headerlink" href="#a-fondo" title="Permalink to this headline">¶</a></h5>
<p>Joaquín utiliza los histogramas para entender el cómo funciona un kernel density estimation (KDE), y a partir de su trabajo, explicaremos el cómo funciona el KDE.</p>
<p>Antes, un pequeño repaso en torno a los histogramas.</p>
</div>
<div class="section" id="los-histogramas">
<h5>Los histogramas<a class="headerlink" href="#los-histogramas" title="Permalink to this headline">¶</a></h5>
<p>Los histogramas son una representación gráfica capaz de cuantificar la frecuencia con que se presentan, determinados valores, en una población (conjunto de datos). A fin de comprensión, graficaremos el histograma de los casos nuevos:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2_thisistheway_27_0.png" src="../../_images/2_thisistheway_27_0.png" />
</div>
</div>
<p>Del gráfico, podemos obtener la siguiente información:</p>
<ul class="simple">
<li><p>Con mayor frecuencia, suele haber un poco menos de y entre, 25 y 50 casos nuevos a nivel regional.</p></li>
<li><p>La menor frecuencia se encuentra sobre los 250 casos nuevos a nivel regional.</p></li>
<li><p>Podemos apreciar una distribución asimétrica hacia la izquierda (se presenta mayor frecuencia de datos en el sector derecho que en el izquierdo).</p></li>
</ul>
<p>Como se observa, no existe una línea temporal, puesto que, lo que se registra es, <strong>en un determinado intervalo de casos nuevos, la frecuencia de dicho intervalo</strong> en torno al resto de la población. <strong>La superficie de la barra es proporcional a la frecuencia</strong>, y por eso, a simple vista, podemos apreciar que la barra más alta es aquella en la que se registra la mayor frecuencia.</p>
</div>
<div class="section" id="grafico-de-densidad-de-kernel">
<h5>Gráfico de densidad de Kernel<a class="headerlink" href="#grafico-de-densidad-de-kernel" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>¡Vamos hallando cada vez más referencias!</p>
</div></blockquote>
<p>Según <span id="id40">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id15">dat</a>]</span>, “<em>Un gráfico de densidad visualiza la distribución de datos en un intervalo o período de tiempo continuo. Este gráfico es una variación de un histograma que usa el suavizado de cerner para trazar valores, permitiendo distribuciones más suaves al suavizar el ruido. Los picos de un gráfico de densidad ayudan a mostrar dónde los valores se concentran en el intervalo</em>”.</p>
<p>Pues, al igual que los histogramas, cuantifican la frecuencia de un determinado intervalo de la población, con la diferencia de <strong>presentar un suavizado a partir de promedios ponderados por datos vecinos</strong>.</p>
<p>Visualicemos la misma distribución anterior (casos nuevos regionales), esta vez utilizando un gráfico de densidad de Kernel.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;kde&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2_thisistheway_29_0.png" src="../../_images/2_thisistheway_29_0.png" />
</div>
</div>
<p>Así entonces, tenemos definidos los conceptos para proseguir con la explicación de <span id="id41">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id11">Rod21</a>]</span>.</p>
</div>
</div>
<div class="section" id="idea-intuitiva">
<h4>Idea intuitiva<a class="headerlink" href="#idea-intuitiva" title="Permalink to this headline">¶</a></h4>
<p>Según <span id="id42">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id11">Rod21</a>]</span>, “<em>kernel density estimation (KDE) expande la idea del histograma</em>”, donde, “*cada observación aumenta la densidad de probabilidad en la zona donde se encuentra, pero lo hace de forma que las contribuciones se agrupen creando una curva continua y suave (smooth)”.</p>
<blockquote>
<div><p>Nos basaremos en el código que adjunta <span id="id43">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id11">Rod21</a>]</span> en su <a href="https://www.cienciadedatos.net/documentos/pystats02-kernel-density-estimation-kde-python.html">notebook</a>. Se basa en la sección de “<em>Idea intuitiva</em>”: <strong><a href="https://www.cienciadedatos.net/documentos/pystats02-kernel-density-estimation-kde-python.html#Idea-intuitiva">Para el enlace de referencia, click aquí</a></strong>.</p>
</div></blockquote>
<p>Supongamos un conjunto de observaciones <span class="math notranslate nohighlight">\(X\)</span>:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( \Large [2, 3, 4, 7]\)</span></p></li>
</ul>
<p>Los cuales, se grafican en un plano cartesiano, a través de Matplotlib.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Conjunto de observaciones X</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>

<span class="c1">### Definimos ejes y figura de Matplotlib, con tamaño de 6 de ancho y 3 de alto</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>

<span class="c1">### Graficamos con formato de coordenada</span>
<span class="c1">### (np.full_like es una función de Numpy que devuelve un vector de la misma dimensión de la entrada, en este caso, con 0s) ###</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">full_like</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;|k&#39;</span><span class="p">,</span> <span class="n">markeredgewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1">### Límite de Y</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">### Título</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Posición de las observaciones&#39;</span><span class="p">)</span>

<span class="c1">### Ejes</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1">### Mostramos el gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2_thisistheway_31_0.png" src="../../_images/2_thisistheway_31_0.png" />
</div>
</div>
<p>Luego, “<em>sobre cada observación se centra una distribución normal, con media igual al valor de la observación y desviación típica de 1</em>” según <span id="id44">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id11">Rod21</a>]</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Definimos ejes y figura de Matplotlib y graficamos con coordenadas</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">full_like</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;|k&#39;</span><span class="p">,</span> <span class="n">markeredgewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1">### Definimos 500 valores continuos a partir del máximo y mínimo del conjunto de observaciones X</span>
<span class="n">Xgrid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="c1">### Con Scipy, devolvemos como densidad una distribución de probabilidad, con media del valor x del conjunto de obs. X</span>
<span class="c1">### (con axvline centramos una recta paralela a Y en el valor x del conjunto de observaciones X) ###</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>
    <span class="n">densidad</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">Xgrid</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Xgrid</span><span class="p">,</span> <span class="n">densidad</span><span class="p">)</span>

<span class="c1">### Ejes y título</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Distribuciones normales (una por cada observación)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Densidad&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2_thisistheway_33_0.png" src="../../_images/2_thisistheway_33_0.png" />
</div>
</div>
<p>“<em>De esta forma se consigue que cada observación contribuya justo en la posición que ocupa pero también, de forma gradual, en las regiones cercanas</em>” según <span id="id45">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id11">Rod21</a>]</span>.</p>
<p>Respecto a cómo se logra la predicción a partir de estas distribuciones de probabilidad, Joaquín aclara, “<em>si se suman las contribuciones individuales y se dividen por el total de curvas (observaciones), se consigue una curva final que describe la distribución de las observaciones</em>”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Definimos ejes y figura de Matplotlib y graficamos con coordenadas</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">full_like</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;|k&#39;</span><span class="p">,</span> <span class="n">markeredgewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">Xgrid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="c1">### Código para realizar la suma de las contribuciones individuales, dividido por el total de curvas</span>
<span class="n">suma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full_like</span><span class="p">(</span><span class="n">Xgrid</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>
    <span class="n">densidad</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">Xgrid</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">suma</span> <span class="o">=</span> <span class="n">suma</span> <span class="o">+</span> <span class="n">densidad</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Xgrid</span><span class="p">,</span> <span class="n">densidad</span><span class="p">)</span>
    
<span class="n">suma</span> <span class="o">=</span> <span class="n">suma</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Xgrid</span><span class="p">,</span> <span class="n">suma</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">Xgrid</span><span class="p">,</span> <span class="n">suma</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">);</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Suma de las distribuciones&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Densidad&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2_thisistheway_35_0.png" src="../../_images/2_thisistheway_35_0.png" />
</div>
</div>
<p>“<em>Esta idea tan sencilla pero a la vez tan potente es en la que se fundamenta el método kernel density estimation (KDE): aproximar una función de densidad como la suma de funciones (kernel) de cada observación.</em>” según <span id="id46">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id11">Rod21</a>]</span>.</p>
</div>
<div class="section" id="la-clasificacion-kde">
<h4>La clasificación KDE<a class="headerlink" href="#la-clasificacion-kde" title="Permalink to this headline">¶</a></h4>
<p>Bien. Hemos explicado el funcionamiento de KDE, pero, el acercamiento de Joaquín Amat, según lo que aprecio, es para la predicción de una variable continua.</p>
<p>Para entender la clasificación del estimador KDE, nos basaremos en el trabajo de <em>Dennis Wittich</em>.</p>
<p>Según <span id="id47">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id17">Wit19</a>]</span> el clasificador estima un determinado volumen <span class="math notranslate nohighlight">\(V\)</span> <a class="footnote-reference brackets" href="#dennis-wittich" id="id48">10</a> (<strong>el volumen</strong>, <em>lo entiendo como la distribución de probabilidad</em>). Así entonces, se considera <span class="math notranslate nohighlight">\(V\)</span> es la distribución de una clase <span class="math notranslate nohighlight">\(X\)</span>. <em>En nuestro caso, y a modo de ejemplo, puede ser la distribución para cada una de las etapas del Paso a Paso (<span class="math notranslate nohighlight">\(V_{0}\)</span>: Cuarentena, <span class="math notranslate nohighlight">\(V_{1}\)</span>: Transición, etc.)</em>; entonces, según el número de muestras que “caigan” en ese volumen, se determinará la distribución de la clase <span class="math notranslate nohighlight">\(X\)</span>:</p>
<ul class="simple">
<li><p>Si una muestra <span class="math notranslate nohighlight">\(X_{i}\)</span> es cercana a la distribución <span class="math notranslate nohighlight">\(V_{i}\)</span> de la clase <span class="math notranslate nohighlight">\(X\)</span>, se clasificará en ella.</p></li>
</ul>
<p>Finalmente, <strong>de acuerdo a la cercanía, se estimará una probabilidad</strong> de que la muestra <span class="math notranslate nohighlight">\(X_{i}\)</span> pertenece a la distribución <span class="math notranslate nohighlight">\(V_{i}\)</span> de la clase <span class="math notranslate nohighlight">\(X\)</span>.</p>
<p>Así entonces, tenemos las bases para saber cómo funciona el método a través de la aproximación por Kernel.</p>
<p>Para mayor detalle matemático, el cual se obvia, visitar el trabajo de <em>Joaquín Amat</em>, <em>Dennis Wittich</em> o de <em>S. Van Vaerenbergh, I. Santamaría</em>. <strong>Los enlaces se pueden encontrar en la bibliografía</strong>.</p>
</div>
</div>
<div class="section" id="svc">
<h3>SVC<a class="headerlink" href="#svc" title="Permalink to this headline">¶</a></h3>
<p>SVC hace referencia a <strong>Support Vector Classification</strong>, lo que en español significa <strong>Clasificación por Vectores de Soporte</strong>. Este tipo de algoritmo se basa en <strong>solucionar problemas de clasificación</strong>, lo que es separar entre dos o más clases (<strong>tal como vimos en los conceptos previos</strong>).</p>
<div class="figure align-default" id="id49">
<img alt="https://www.mdpi.com/sustainability/sustainability-11-01919/article_deploy/html/images/sustainability-11-01919-g004.png" src="https://www.mdpi.com/sustainability/sustainability-11-01919/article_deploy/html/images/sustainability-11-01919-g004.png" />
<p class="caption"><span class="caption-number">Fig. 30 </span><span class="caption-text"><strong>Ilustración extraída del artículo “<em>Support Vector Machine Algorithm for Automatically Identifying Depositional Microfacies Using Well Logs</em>”. El enlace en<a href="https://www.mdpi.com/2071-1050/11/7/1919"> MDPI</a></strong>.</span><a class="headerlink" href="#id49" title="Permalink to this image">¶</a></p>
</div>
<p>La piedra angular del <strong>SVC</strong>, son los <strong>SVM</strong>, que es el acrónimo de <strong>Support Vector Machine</strong>, lo que significa “<strong>Máquinas de Vectores de Soporte</strong>”. En concreto, esta familia de algoritmos, y según <span id="id50">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id21">Her19</a>]</span>, se llaman “<strong>máquina</strong>” por parte del nombre del Aprendizaje de “<strong>Máquinas</strong>”, que es otro sinónimo de <strong>Aprendizaje Automático</strong> (en inglés, “<strong>Machine” Learning</strong>).</p>
<div class="section" id="funcionamiento">
<h4>Funcionamiento<a class="headerlink" href="#funcionamiento" title="Permalink to this headline">¶</a></h4>
<p>Antes, al realizar la clasificación (en la regresión logística), intentábamos dar con una función que explicase la distribución de los datos, la cual denominamos <strong>hipótesis</strong>. Esta función se encargaba de separar, según las <strong>fronteras de decisión</strong>, dos o más clases de datos.</p>
<p>La definición anterior, es similar para las Máquinas de Vectores de Soporte, con la diferencia que hace uso de hiperplanos para separar dos o más clases.</p>
<p>Un hiperplano se define como la extensión del plano. Es una definición geométrica que no puede ser graficada en su totalidad, dado que, su dimensión, se encuentra en la cuarta o en alguna mayor. Ésto no es graficable en el espacio (o al menos, no por completo), y dado nuestra limitada comprensión de dimensiones superiores a la tercera, solo nos podemos imaginar, levemente, cómo se pueden visualizar los hiperplanos en dimensiones inferiores.</p>
<div class="section" id="la-analogia-de-la-esfera">
<h5>La analogía de la esfera<a class="headerlink" href="#la-analogia-de-la-esfera" title="Permalink to this headline">¶</a></h5>
<p>Recuerdo haber leído, en algún artículo, una analogía para comprender cómo funcionan las dimensiones (en los tiempos en los que estudiaba <strong>Cálculo III</strong>). Para introducirte a este mundo de las matemáticas, del hallar sentido lógico a todas las cosas, intentaré rebajar los tecnicismos, tal como ya lo hemos hecho.</p>
<p>Supone, <strong>dos seres vivos, Alejandro y María</strong>. <strong>Alejandro y María son dos esferas que viven en la tercera dimensión</strong>, y son amantes. Por esas casualidades de la vida, <strong>Alejandro es vílmente hechizado por una entidad, y se convierte en un ser vivo del plano XY</strong> (cartesiano), en la segunda dimensión. Alejandro, desesperado, llama a su enamorada, la cual se encuentra a una distancia mayor que la del diámetro de la esfera. María, lo escucha, y recurre a su llamado, por lo que, se acerca al plano XY en el que vive Alejandro. <strong>María, puede observar, sin inconvenientes, a Alejandro, convertido en un plano, y comprende plenamente qué es, dado que ella vive en la tercera dimensión</strong>.</p>
<div class="figure align-default" id="id51">
<a class="reference internal image-reference" href="../../_images/4_alejandromaria.png"><img alt="../../_images/4_alejandromaria.png" src="../../_images/4_alejandromaria.png" style="width: 60%;" /></a>
<p class="caption"><span class="caption-number">Fig. 31 </span><span class="caption-text">Ilustración realizada en <strong><a href="https://www.geogebra.com">Geogebra</a></strong>.</span><a class="headerlink" href="#id51" title="Permalink to this image">¶</a></p>
</div>
<p>Por otro lado, Alejandro no puede ver a María en su totalidad, dado es una esfera, y solo puede observar las <strong>intersecciones</strong> de la esfera con el plano, las que a su vez, dividen su hogar, por lo que solo aprecia las circunferencias de María, y no comprende cómo puede observar una parte de María, sin ver a María en su totalidad.</p>
<div class="figure align-default" id="id52">
<img alt="../../_images/5_alejandromaria.png" src="../../_images/5_alejandromaria.png" />
<p class="caption"><span class="caption-number">Fig. 32 </span><span class="caption-text">Ilustración realizada en <strong><a href="https://www.geogebra.com">Geogebra</a></strong>.</span><a class="headerlink" href="#id52" title="Permalink to this image">¶</a></p>
</div>
<p>¿Qué aprendimos? Pues, nosotros, somos seres tridimensionales. Como tal, jamás podremos comprender figuras de la cuarta dimensión, o de mayores dimensiones, puesto que, estamos acostumbrados a las leyes que rigen la tercera dimensión. La única idea, que nos podemos hacer de dimensiones mayores, es a partir de la intuición, o bien, <strong>¡reducir la complejidad!</strong> Tal es el caso de un hiperplano. <strong>Un hiperplano es la extensión del plano en dimensiones mayores a la tercera, y por ende, una forma de entenderlo, es a partir del cuento de María y Alejandro. Justamente, nosotros jamás podríamos visualizar, en totalidad, un hiperplano, pero sí partes de él. Por ello, es común encontrar la definición de que, un hiperplano, en la primera dimensión es un punto que divide la recta 1D, en la segunda dimensión es una recta que divide el plano 2D, en la tercera dimensión es un plano que divide al espacio, ¿y en la cuarta? Pues, hasta ahí llegamos. ¡Tenemos el mismo inconveniente de Alejandro! Aunque quisiéramos comprender qué existe en dimensiones mayores, no podríamos</strong>.</p>
<p>Demos cuenta de cómo, análogamente, y al observar figuras de dimensiones mayores en inferiores, se disminuye el nivel de complejidad de la figura al “acomodarse” en la dimensión inferior en la que se está observando. Propiamente tal, Alejandro es una figura de la segunda dimensión, y aprecia a María, una figura de la tercera dimensión, convertida (según él) en una figura de la segunda dimensión, siendo “rebajada” la dimensión de la figura de María (desde el punto de vista de Juan), desde una esfera a una familia de circunferencias según se movilice en el eje Z. De forma similar, sucede con la dimensionalidad de los hiperplanos.</p>
</div>
<div class="section" id="definicion-de-svm">
<h5>Definición de SVM<a class="headerlink" href="#definicion-de-svm" title="Permalink to this headline">¶</a></h5>
<p>Bien, nuevamente, contamos con un <strong>dominio relativo</strong> de lo que sería un hiperplano. Ésto nos facilitará mucho el comprender cómo funcionan las Máquinas de Vectores de Soporte.</p>
<p>“<em>Los vectores de soporte son los puntos que definen el margen máximo de separación del hiperplano que separa las clases. Se llaman vectores, en lugar de puntos, porque estos «puntos» tienen tantos elementos como dimensiones tenga nuestro espacio de entrada. Es decir, estos puntos multi-dimensionales se representan con un vector de n dimensiones</em>” <a class="footnote-reference brackets" href="#maquinas-soporte-jose" id="id53">11</a>.</p>
<p>¡Muy bien! El hiperplano se encarga de realizar la separación. Pero en verdad, ¿cómo lo hace? Debemos recurrir nuevamente a <span id="id54">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id21">Her19</a>]</span>, en concreto, “<em>En el caso de que las clases sean linealmente separables, para hallar el hiperplano que las separa se toman un conjunto de casos, llamados vectores de soporte, y se elige el hiperplano que proporcione los mayores márgenes de distancia desde el hiperplano a los vectores de soporte más próximos. En el ejemplo, tanto el plano <span class="math notranslate nohighlight">\(Z_{1}\)</span> como <span class="math notranslate nohighlight">\(Z_{2}\)</span> podrían servir para distinguir las clases, pero <span class="math notranslate nohighlight">\(Z_{2}\)</span> es mejor porque el margen es más amplio</em>” <a class="footnote-reference brackets" href="#maquinas-soporte-jose" id="id55">11</a>.</p>
<div class="figure align-default" id="id56">
<img alt="https://lapastillaroja.net/wp-content/uploads/2015/02/SVMMargins.gif" src="https://lapastillaroja.net/wp-content/uploads/2015/02/SVMMargins.gif" />
<p class="caption"><span class="caption-number">Fig. 33 </span><span class="caption-text">Ilustración extraída desde <strong><a href="https://lapastillaroja.net/2015/02/ml-algols/">lapastillaroja</a></strong>.</span><a class="headerlink" href="#id56" title="Permalink to this image">¶</a></p>
</div>
<p>Entre tanto, “<em>En el caso de que las clases no sean linealmente separables lo que se intenta hacer es proyectar los casos a un espacio de dimensión superior donde sí sean linealmente separables</em>” <a class="footnote-reference brackets" href="#maquinas-soporte-jose" id="id57">11</a>.</p>
<div class="figure align-default" id="id58">
<img alt="https://lapastillaroja.net/wp-content/uploads/2015/02/InputAndfeatureSpaceSVM.png" src="https://lapastillaroja.net/wp-content/uploads/2015/02/InputAndfeatureSpaceSVM.png" />
<p class="caption"><span class="caption-number">Fig. 34 </span><span class="caption-text">Ilustración extraída desde <strong><a href="https://lapastillaroja.net/2015/02/ml-algols/">lapastillaroja</a></strong>.</span><a class="headerlink" href="#id58" title="Permalink to this image">¶</a></p>
</div>
<p>¡Claro como el agua! ¿No es así? Bueno, al menos, visto de forma macro, dado que, si entramos en el detalle matemático, pues, las cosas se complican un poco. Sin embargo, en ese desarrollo está lo bonito de las matemáticas.</p>
<p>Con ésto, finalizamos nuestro recorrido de algoritmos. ¡Seguimos!</p>
</div>
</div>
</div>
<div class="section" id="la-perorata">
<h3>La perorata<a class="headerlink" href="#la-perorata" title="Permalink to this headline">¶</a></h3>
<p>Cabe recalcar que, estos conceptos, son parte teórica del Aprendizaje Automático. Es fácil programar con librerías que nos simplifican la vida, sin embargo, <strong>es relevante saber su fundamento matemático y el cómo se respalda en la tecnología actual gracias a la enorme cantidad de cálculos que puede realizar un ordenador moderno</strong>.</p>
<p>Nuevamente, el implementar un modelo con una librería es simple, pero implementarlo desde cero puede llegar a ser tedioso y confuso (y a la vez, bello si funciona).</p>
<p>Si no se conoce sobre Cálculo de universidad, Estadística y Ciencias de la Computación (en concreto, <strong>saber programar</strong>), será difícil implementar un algoritmo desde cero. En lo personal, una vez intenté hacerlo, sin mucho éxito, por lo que me tuve que apoyar en bibliografía y otros tutoriales.</p>
<p>Por las razones expuestas, se debe agradecer, a muchas otras personas que, por sus arduas horas de trabajo, lograron compilar librerías capaces de permitir, desarrollar, con poco código, y en poco tiempo, algoritmos de predicción, y tal es el caso de Scikit-learn, que es la librería que utilizaremos.</p>
</div>
</div>
<div class="section" id="seleccionando-variables">
<h2>Seleccionando variables<a class="headerlink" href="#seleccionando-variables" title="Permalink to this headline">¶</a></h2>
<p>Retomaremos algunos conceptos, además de introducir otros nuevos.</p>
<div class="section" id="costos-y-otras-cosas">
<h3>Costos y otras cosas<a class="headerlink" href="#costos-y-otras-cosas" title="Permalink to this headline">¶</a></h3>
<p>En todo modelo computacional, es relevante la eficiencia. Por ello, siempre debemos ser minuciosos al elegir las variables con las que el modelo estimará los cálculos. En esta línea, nos basaramos en la fuente de <a href="https://machinelearningmastery.com/feature-selection-with-real-and-categorical-data/">machinelearningmastery</a> para explicar, a mayor detalle, el por qué de la selección de variables <a class="footnote-reference brackets" href="#machine-learning-mastery" id="id59">12</a>.</p>
<p>Según la fuente, “<em>la selección de características es el proceso mediante el cual se reduce el número de variables de entrada cuando se desarrolla un modelo predictivo</em>”. De hecho, aclara que es recomendable reducir el número de variables en orden para:</p>
<ul class="simple">
<li><p><em>Reducir el costo computacional</em></p></li>
</ul>
<p>Respecto a el costo computacional - <i>en este caso</i> - es despreciable, dado que no trabajamos con un gran número de datos. Otra importancia tendría si estuviéramos tratando con enormes volúmenes de información (como una empresa de retail con millones de clientes).</p>
<ul class="simple">
<li><p><em>En algunos casos, mejorar el rendimiento</em></p></li>
</ul>
<p>El rendimiento, en contraste, sí nos interesa, dado que el algoritmo debería tener el menor error posible para brindar una predicción “buena” en base a la información con la que contamos, la que por cierto, es poca (dado que la pandemia no lleva más dos años a la fecha - <i>30/05/2021</i> - en la que escribo).</p>
</div>
<div class="section" id="lo-estadisticamente-correcto-y-una-analogia">
<h3>Lo estadísticamente correcto y una analogía<a class="headerlink" href="#lo-estadisticamente-correcto-y-una-analogia" title="Permalink to this headline">¶</a></h3>
<p>Prosiguiendo con <a href="https://machinelearningmastery.com/feature-selection-with-real-and-categorical-data/">machinelearningmastery</a>, “<em>los métodos de selección de variables están destinados a reducir el número de variables de entrada (X), de forma de mantener aquellas más útiles para predecir la variable objetivo (Y)</em>” <a class="footnote-reference brackets" href="#machine-learning-mastery" id="id60">12</a>.</p>
<p>Bien. El método de selección de variables que se establece en la fuente es en base a los métodos estadísticos, a partir de los cuales es posible estimar la dependencia o independencia de las variables, sus relaciones, etc. A partir de ciertos estimadores, como Pearson, chi cuadrado, entre otros. Si bien, es lo <strong>estadísticamente correcto</strong>, nosotros tomaremos un breve atajo, dado que ya sabemos aquellas variables que nos serán relevantes, ¿o no? ¡Comprobémoslo!</p>
</div>
<div class="section" id="datos-comunales">
<h3>Datos comunales<a class="headerlink" href="#datos-comunales" title="Permalink to this headline">¶</a></h3>
<p>La intuición y experiencia dice lo siguiente: Filtremos.</p>
<p>Si trabajaremos con predicción de fases comunales… ¿Qué datos nos sirven? La respuesta es evidente. ¡No podemos generalizar a nivel regional! Debemos segregar por comuna, y para ello, disponemos de datos de los informes epidemiológicos del Ministerio de Salud, recopilados por el MICITEC (Ministerio de Ciencia, Tecnología, Conocimiento e Innovación).</p>
<p>De esta forma, utilizaremos esos datos. Por ejemplo, para la comuna de Iquique, filtramos el DataFrame de la siguiente forma.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Variables por la comuna de Iquique</span>

<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Iquique&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Re Iquique</th>
      <th>Casos acumulados en Iquique</th>
      <th>Casos activos en Iquique</th>
      <th>Paso a Paso Iquique</th>
      <th>Paso a Paso (dias) Iquique</th>
      <th>Movilidad Iquique</th>
      <th>Notificacion PCR Iquique</th>
      <th>BAC Iquique</th>
      <th>Positividad Iquique</th>
      <th>Cobertura de testeo Iquique</th>
      <th>Oportunidad en notificacion Iquique</th>
      <th>Fallecidos Iquique</th>
      <th>Fallecidos confirmados DEIS Iquique</th>
      <th>Fallecidos probables DEIS Iquique</th>
      <th>Mortalidad especifica comunal Iquique *</th>
    </tr>
    <tr>
      <th>Fecha</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-03-03</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-04</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-05</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-06</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-07</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.02</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2021-06-25</th>
      <td>NaN</td>
      <td>27,764.00</td>
      <td>376.00</td>
      <td>2.00</td>
      <td>39.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>499.00</td>
      <td>504.00</td>
      <td>68.00</td>
      <td>225.54</td>
    </tr>
    <tr>
      <th>2021-06-26</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.00</td>
      <td>40.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-27</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.00</td>
      <td>41.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-28</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.00</td>
      <td>42.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-29</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.00</td>
      <td>43.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>484 rows × 15 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Iquique&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Re Iquique</th>
      <th>Casos acumulados en Iquique</th>
      <th>Casos activos en Iquique</th>
      <th>Paso a Paso Iquique</th>
      <th>Paso a Paso (dias) Iquique</th>
      <th>Movilidad Iquique</th>
      <th>Notificacion PCR Iquique</th>
      <th>BAC Iquique</th>
      <th>Positividad Iquique</th>
      <th>Cobertura de testeo Iquique</th>
      <th>Oportunidad en notificacion Iquique</th>
      <th>Fallecidos Iquique</th>
      <th>Fallecidos confirmados DEIS Iquique</th>
      <th>Fallecidos probables DEIS Iquique</th>
      <th>Mortalidad especifica comunal Iquique *</th>
    </tr>
    <tr>
      <th>Fecha</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-03-03</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-04</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-05</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-06</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2020-03-07</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.02</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2021-06-25</th>
      <td>NaN</td>
      <td>27,764.00</td>
      <td>376.00</td>
      <td>2.00</td>
      <td>39.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>499.00</td>
      <td>504.00</td>
      <td>68.00</td>
      <td>225.54</td>
    </tr>
    <tr>
      <th>2021-06-26</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.00</td>
      <td>40.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-27</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.00</td>
      <td>41.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-28</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.00</td>
      <td>42.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2021-06-29</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.00</td>
      <td>43.00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>484 rows × 15 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Re Iquique&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Re Iquique&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Re Iquique&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1.02, Timestamp(&#39;2021-06-16 00:00:00&#39;))
</pre></div>
</div>
</div>
</div>
<p>Notar que:</p>
<p><code class="docutils literal notranslate"><span class="pre">df.loc[:,</span> <span class="pre">df.columns[df.columns.str.contains('{}'.format('Iquique'),</span> <span class="pre">na=False)]]</span></code></p>
<p>Es un código que se puede utilizar en una iteración, reemplazando <b><i>’Iquique’</i></b> por otros textos que contengan el nombre de las comunas (este tipo de variable se suele llamar <em>str</em>, de <em>string</em> o <em>variable de texto</em>).</p>
<p><strong>Python es sumamente flexible para ocupar variables de texto en objetos iterables</strong> (como listas, vectores, entre otros). Debemos utilizar esta flexibilidad.</p>
<p>Pero para ello, necesitamos los nombres de las comunas, ¿cómo obtenemos el nombre de las comunas en un vector sin hacerlo de forma manual? Pues, extraemos el nombre de una columna cualquiera que los contenga, y según el número de carácteres que exista antes del nombre de la comuna, extraemos. ¿No me expliqué? Vale, te lo explico.</p>
<p>Consideremos las siguientes columnas:</p>
<ul class="simple">
<li><p><strong>Columna X en Iquique</strong></p></li>
<li><p><strong>Columna X en Alto Hospicio</strong></p></li>
</ul>
<p>¿Qué tienen en común? Pues, que a partir de la posición 14 de la variable texto, siempre debería encontrarse el nombre de la comuna.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### La indexación en Python inicia desde el 0, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]</span>
<span class="c1">### Ello significa que, el 13 equivale a la posición 14</span>
<span class="s1">&#39;Columna X en Iquique&#39;</span><span class="p">[</span><span class="mi">13</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Iquique&#39;
</pre></div>
</div>
</div>
</div>
<p>Considerando el código anterior, ¡lo utilizamos!</p>
<p>Paralelamente, definiremos colores en un diccionario para cada una de las fases del plan Paso a Paso (<em>es para darle más belleza al Markdown que realizaremos después</em>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Extraemos nombres de comunas</span>
<span class="n">comunas</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Notificacion PCR&#39;</span><span class="p">)]]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">17</span><span class="p">:]</span>

<span class="c1">### Diccionario de etiquetas</span>
<span class="n">fases</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s1">&#39;Cuarentena&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;Transición&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s1">&#39;Preparación&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="s1">&#39;Apertura Inicial&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span><span class="s1">&#39;Apertura Avanzada&#39;</span><span class="p">}</span>
<span class="c1">### Asignamos la paleta de colores del Paso a Paso</span>
<span class="n">paleta</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Cuarentena&#39;</span><span class="p">:</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;Transición&#39;</span><span class="p">:</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;Preparación&#39;</span><span class="p">:</span><span class="s1">&#39;gold&#39;</span><span class="p">,</span> <span class="s1">&#39;Apertura Inicial&#39;</span><span class="p">:</span><span class="s1">&#39;dodgerblue&#39;</span><span class="p">,</span> <span class="s1">&#39;Apertura Avanzada&#39;</span><span class="p">:</span><span class="s1">&#39;cyan&#39;</span><span class="p">}</span>

<span class="c1">### Imprimimos</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Las comunas son: </span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">comunas</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">Las etiquetas del Paso a Paso:</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fases</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">Sus colores:</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">paleta</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Las comunas son: 

 Index([&#39;Alto Hospicio&#39;, &#39;Camiña&#39;, &#39;Colchane&#39;, &#39;Huara&#39;, &#39;Iquique&#39;, &#39;Pica&#39;,
       &#39;Pozo Almonte&#39;],
      dtype=&#39;object&#39;) 

Las etiquetas del Paso a Paso:

 {1: &#39;Cuarentena&#39;, 2: &#39;Transición&#39;, 3: &#39;Preparación&#39;, 4: &#39;Apertura Inicial&#39;, 5: &#39;Apertura Avanzada&#39;} 

Sus colores:

 {&#39;Cuarentena&#39;: &#39;red&#39;, &#39;Transición&#39;: &#39;orange&#39;, &#39;Preparación&#39;: &#39;gold&#39;, &#39;Apertura Inicial&#39;: &#39;dodgerblue&#39;, &#39;Apertura Avanzada&#39;: &#39;cyan&#39;}
</pre></div>
</div>
</div>
</div>
<p>Y listo. Tenemos nuestras comunas. Sin embargo, ¿y las variables regionales?</p>
</div>
<div class="section" id="datos-regionales">
<h3>Datos regionales<a class="headerlink" href="#datos-regionales" title="Permalink to this headline">¶</a></h3>
<p>Un par de interrogantes pueden ser:</p>
<ul class="simple">
<li><p><b>¿Por qué no ocupar variables regionales?</b></p></li>
<li><p><b>¿No es que el Ministerio de Salud tiene establecidos los criterios para estar en una determinada fase?</b></p></li>
</ul>
<p>Respecto a la segunda pregunta, pues, sí. Es verdad, pero, en la práctica, existe una constante contradicción entre lo que establece el Paso a Paso y la realidad de las decisiones del Minsal (<i>lo digo por experiencia, pero vamos, que lo comprobaremos</i>).</p>
<p>Por ejemplo, se establece que, la ocupación UCI regional, debería (y recalco, <b>debería</b>):</p>
<ul class="simple">
<li><p>Ser menor o igual al 85% para encontrarse en Transición o Preparación. <a class="footnote-reference brackets" href="#estrategiagradual-pasopaso" id="id61">3</a></p></li>
<li><p>Menor o igual al 80% para encontrarse en Apertura Inicial. <a class="footnote-reference brackets" href="#estrategiagradual-pasopaso" id="id62">3</a></p></li>
</ul>
<p>Comprobemos ésto con todas las comunas con gráficos de dispersión.</p>
</div>
<div class="section" id="graficos-de-dispersion-por-comuna">
<h3>Gráficos de dispersión por comuna<a class="headerlink" href="#graficos-de-dispersion-por-comuna" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">comuna</span> <span class="ow">in</span> <span class="n">comunas</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1">### Asignamos a los valores numéricos, las etiquetas correspondientes del Paso a Paso</span>
    <span class="n">etiqueta</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Paso a Paso </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">)][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Paso a Paso </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">)]</span>\
    <span class="o">.</span><span class="n">first_valid_index</span><span class="p">():</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Paso a Paso </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">)]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">fases</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;UCI ocupacion media movil aprox *&#39;</span><span class="p">,</span> \
    <span class="n">hue</span><span class="o">=</span><span class="n">etiqueta</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">paleta</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2_thisistheway_48_0.png" src="../../_images/2_thisistheway_48_0.png" />
<img alt="../../_images/2_thisistheway_48_1.png" src="../../_images/2_thisistheway_48_1.png" />
<img alt="../../_images/2_thisistheway_48_2.png" src="../../_images/2_thisistheway_48_2.png" />
<img alt="../../_images/2_thisistheway_48_3.png" src="../../_images/2_thisistheway_48_3.png" />
<img alt="../../_images/2_thisistheway_48_4.png" src="../../_images/2_thisistheway_48_4.png" />
<img alt="../../_images/2_thisistheway_48_5.png" src="../../_images/2_thisistheway_48_5.png" />
<img alt="../../_images/2_thisistheway_48_6.png" src="../../_images/2_thisistheway_48_6.png" />
</div>
</div>
<p>Se puede apreciar como el indicador - <em>prácticamente</em> - no tiene incidencia. Es innecesario considerar las variables regionales (o incluso nacionales como la ocupación UCI nacional). Está zanjada la respuesta a la primera pregunta.</p>
<p>Ojo, no estoy diciendo que no tengan relevancia, puesto sí lo tienen en materia sanitaria, pero, para la predicción del Paso a Paso, no tienen incidencia. De otra forma, veríamos otra tendencia en los gráficos anteriores, y de hecho, el stress del sistema hospitalario es una variable que sí debería incidir.</p>
<p>Pero bueno, posiblemente es una de las cuantas falencias del Paso a Paso en torno a no considerar la situación concreta de una región.</p>
</div>
</div>
<div class="section" id="entrenamiento">
<h2>Entrenamiento<a class="headerlink" href="#entrenamiento" title="Permalink to this headline">¶</a></h2>
<p>Con los códigos que expuse (en relación a cómo obtener los datos por comuna y los nombres), procedemos a desarrollar los modelos de predicción.</p>
<p>Algunos detalles que me gustaría explicar:</p>
<ul class="simple">
<li><p>El siguiente código, es el más desordenado de todos los Notebooks. Sin embargo, esconde una lógica, dentro de mis capacidades, dado que es la primera vez que intento ajustar un modelo de Machine Learning. Recuerdo haber escuchado mucho sobre la <em>reproducibilidad</em> en Data Science. Éste, definitivamente, no es el caso de un código reproducible.</p></li>
<li><p>Con el desarrollo de este modelo, me di cuenta que, conozco menos de lo que desearía conocer.</p></li>
<li><p>¿Falencias o errores en el código? Por favor, reportálo en la sección Issues de GitHub.</p></li>
</ul>
<div class="section" id="id63">
<h3>Metodología<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<p>Separé los algoritmos por comuna, dado que, entrenar, un solo modelo, introducirá excesiva inconsistencia en la decisión del algoritmo.</p>
<p>Consideremos que, existen comunas que <strong>no han entrado en cuarentena en todo el plan Paso a Paso</strong>, por lo que, la decisión del confinamiento dependerá, en mayor o menor proporción, de las condiciones demográficas de la comuna, las que, de manera implícita, <strong>están recogidas en la decisión histórica del Paso a Paso</strong> (en otras palabras, nuestra salida <span class="math notranslate nohighlight">\(Y\)</span>).</p>
</div>
<div class="section" id="sesgo">
<h3>Sesgo<a class="headerlink" href="#sesgo" title="Permalink to this headline">¶</a></h3>
<p>Como todo en la vida (persona u algoritmo), contamos con sesgos. Corroboré uno y tiene relación con el <strong>plan Paso a Paso histórico</strong> de la comuna:</p>
<ul class="simple">
<li><p>Si una comuna nunca se encontró en Cuarentena, esa comuna nunca será clasificada como comuna que <em>debiese</em> estar en Cuarentena.</p></li>
</ul>
<p>La anterior afirmación <strong>es equivalente para cualquier fase del plan Paso a Paso</strong>.</p>
</div>
<div class="section" id="eleccion">
<h3>Elección<a class="headerlink" href="#eleccion" title="Permalink to this headline">¶</a></h3>
<p>No utilizamos la regresión logística u otro algoritmo basándonos en la recomendación de <strong>Axum Labs</strong>, donde, de acuerdo a nuestro número de observaciones y variables <span id="id64">[<a class="reference internal" href="../6_bibliografia/0_bibliografia.html#id22">Bas19</a>]</span>:</p>
<blockquote>
<div><p>“<em>If n is small (1–10 00) and m is intermediate (10–10,000) : use SVM with (Gaussian, polynomial etc) kernel</em>”. <a class="footnote-reference brackets" href="#axum-labs" id="id65">13</a></p>
</div></blockquote>
</div>
<div class="section" id="codigo">
<h3>Código<a class="headerlink" href="#codigo" title="Permalink to this headline">¶</a></h3>
<p>¿Cómo funciona? ¡Vale! Acá vamos:</p>
<ul class="simple">
<li><p>Dependiendo de la comuna, toma de entrada las variables pertenecientes, además de la variable provincial (número de reproducción efectivo Re).</p></li>
<li><p>Escalamos las observaciones (tiene relación con la rapidez de convergencia del algoritmo).</p></li>
<li><p>Separamos observaciones en conjuntos de entrenamiento y prueba, considerando que trabajamos con series de tiempo.</p></li>
<li><p>Entrenamos el algoritmo, almacenándolo en una variable aparte, por comuna, y además, almacenamos los resultados como variables de texto, <em>str</em>, en un vector. Este vector, al ser iterable, será recorrido por cada uno de sus elementos, separando por comuna, los resultados, los cuales serán introducidos en Markdown.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">resultado_colores</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">resultado_prediccion</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">resultado_prob</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">report</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&lt;h2 style=&quot;font-size:60px&quot;&gt;INDICADOR DE FASE&lt;/h2&gt;&#39;</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&lt;h3 style=&quot;font-size:20px;&quot;&gt;Región de Tarapacá, </span><span class="si">{}</span><span class="s1">&lt;/h3&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Casos nuevos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> de %B de %Y&#39;</span><span class="p">))))</span>

<span class="k">for</span> <span class="n">comuna</span> <span class="ow">in</span> <span class="n">comunas</span><span class="p">:</span>
    
    <span class="c1">### Fase y días en dicha fase de la comuna</span>
    
    <span class="n">fase</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Paso a Paso </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">),</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]]</span>
    <span class="n">fase</span> <span class="o">=</span> <span class="n">fase</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fase</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span>
    <span class="n">dias</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Paso a Paso (dias) </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">),</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)]]</span>
    <span class="n">dias_</span> <span class="o">=</span> <span class="n">dias</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dias</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span>
    
    <span class="c1">### Manejo de variables (en X añadimos el Re dependiendo de la comuna y provincia)</span>
    
    <span class="k">if</span> <span class="n">comuna</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Alto Hospicio&#39;</span><span class="p">,</span> <span class="s1">&#39;Iquique&#39;</span><span class="p">]:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">),</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">&amp;</span>\
                            <span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Paso a Paso&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span> <span class="o">&amp;</span>\
                            <span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;DEIS&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span> <span class="o">&amp;</span>\
                            <span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;especifica&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span> <span class="o">&amp;</span>\
                                   <span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Re&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">))]]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>\
                            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Re Iquique&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>\
                            <span class="n">dias</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">),</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">&amp;</span>\
                            <span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;DEIS&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span> <span class="o">&amp;</span>\
                            <span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;especifica&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span> <span class="o">&amp;</span>\
                            <span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Paso a Paso&#39;</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">))]]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>\
                            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Re Tamarugal&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>\
                            <span class="n">dias</span><span class="p">)</span>
        
    <span class="c1">### Guardamos las columnas utilizadas</span>
    
    <span class="n">cols</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">columns</span>
    
    
    <span class="c1">### Escalamos y rellenamos valores faltantes</span>
    
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">/</span><span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;ffill&quot;</span><span class="p">)</span>
        <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;bfill&quot;</span><span class="p">)</span>
        <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        
    <span class="c1">### Primer índice válido</span>
    
    <span class="n">ind</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Paso a Paso </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">)]</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">()</span>
    
    <span class="c1">### Último índice válido</span>
    
    <span class="n">ind_</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Paso a Paso </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">)]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span>
        
    <span class="c1">### Variables a array de Numpy (X desde primer índice válido); formato necesario para Scikit-learn</span>
    
    <span class="n">x_</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">ind</span><span class="p">:]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
    
    <span class="c1">### Variables a array de Numpy (Y desde primer índice válido); formato necesario para Scikit-learn</span>
    
    <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Paso a Paso </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">)]</span>
    <span class="n">y</span><span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">():]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">ind</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">fases</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
    
    <span class="c1">### Separamos data aprox. 80% para entrenamiento y 20% para prueba</span>
    
    <span class="n">tscv</span> <span class="o">=</span> <span class="n">TimeSeriesSplit</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">train_index</span><span class="p">,</span> <span class="n">test_index</span> <span class="ow">in</span> <span class="n">tscv</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>

         <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">train_index</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="n">test_index</span><span class="p">]</span>
         <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;X_train_</span><span class="si">{}</span><span class="s1">, X_test_</span><span class="si">{}</span><span class="s1"> = X_train, X_test&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">]))</span>
         <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">train_index</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">test_index</span><span class="p">]</span>
         <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;y_train_</span><span class="si">{}</span><span class="s1">, y_test_</span><span class="si">{}</span><span class="s1"> = y_train, y_test&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">]))</span>
        
    <span class="c1">### Entrenamos</span>
    
    <span class="n">clf</span> <span class="o">=</span> <span class="n">make_pipeline</span><span class="p">(</span><span class="n">StandardScaler</span><span class="p">(),</span> <span class="n">SVC</span><span class="p">(</span><span class="n">gamma</span><span class="o">=</span><span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="s1">&#39;rbf&#39;</span><span class="p">))</span>
    <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    
    <span class="n">report</span> <span class="o">+=</span> <span class="p">[</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">))]</span>
    
    <span class="c1">### Para cada comuna</span>
    
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;clf_</span><span class="si">{}</span><span class="s1"> = clf&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">]))</span>
    
    <span class="c1">### Almacenamos los resultados</span>
    
    <span class="n">results</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;&#39;&#39;- De acuerdo al algoritmo, y con un **</span><span class="si">{}</span><span class="s1">%** de probabilidad, **</span><span class="si">{}</span><span class="s1">** debería estar en &lt;b style=&quot;color:</span><span class="si">{}</span><span class="s1">&quot;&gt;</span><span class="si">{}</span><span class="s1">&lt;/b&gt;.</span>
<span class="s1">    Actualmente, la comuna registra </span><span class="si">{}</span><span class="s1"> días en &lt;b style=&quot;color:</span><span class="si">{}</span><span class="s1">&quot;&gt;</span><span class="si">{}</span><span class="s1">&lt;/b&gt;.&#39;&#39;&#39;</span>\
            <span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="o">-</span><span class="n">clf</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">x_</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">comuna</span><span class="p">,</span>\
            <span class="p">[</span><span class="n">paleta</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x_</span><span class="p">)][</span><span class="mi">0</span><span class="p">],</span>\
            <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x_</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">dias_</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="p">[</span><span class="n">paleta</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">fase</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">fases</span><span class="p">[</span><span class="n">x</span><span class="p">])][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">fase</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">fases</span><span class="p">[</span><span class="n">x</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">)]</span>
    
    <span class="n">resultado_colores</span> <span class="o">+=</span> <span class="p">[[</span><span class="n">paleta</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">fase</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">fases</span><span class="p">[</span><span class="n">x</span><span class="p">])][</span><span class="mi">0</span><span class="p">]]</span>
    <span class="n">resultado_prediccion</span> <span class="o">+=</span> <span class="p">[</span><span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x_</span><span class="p">)[</span><span class="mi">0</span><span class="p">]]</span>
    <span class="n">resultado_prob</span> <span class="o">+=</span> <span class="p">[(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="o">-</span><span class="n">clf</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">x_</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
    
    <span class="c1">### Encabezado (Markdown)</span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Resultado para </span><span class="si">{}</span><span class="s1">&lt;/h3&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">)))</span>
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    
    <span class="c1">### Información sobre algoritmo (Markdown)</span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;Se utilizaron las siguientes columnas:&#39;</span><span class="p">))</span>
    
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;- </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">col</span><span class="p">)))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    
<span class="c1">### Consideraciones del algoritmo (Markdown)</span>

<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Consideraciones&lt;/h3&gt;&#39;</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&gt; Los datos históricos contemplan desde el **</span><span class="si">{}</span><span class="s1">** hasta el **</span><span class="si">{}</span><span class="s1">**.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ind</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> de %B de %Y&#39;</span><span class="p">),</span>\
            <span class="n">ind_</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> de %B de %Y&#39;</span><span class="p">))))</span>

<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&gt; El resultado del algoritmo **no implica un cambio de fase**. La evolución del Paso a Paso</span>
<span class="s1">es monitoreada por las autoridades del Ministerio de Salud&#39;&#39;&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<h2 style="font-size:60px">INDICADOR DE FASE</h2><h3 style="font-size:20px;">Región de Tarapacá, 29 de junio de 2021</h3><h3>Resultado para Alto Hospicio</h3><ul class="simple">
<li><p>De acuerdo al algoritmo, y con un <strong>98.316%</strong> de probabilidad, <strong>Alto Hospicio</strong> debería estar en <b style="color:orange">Transición</b>.
Actualmente, la comuna registra 43 días en <b style="color:orange">Transición</b>.</p></li>
</ul>
<p>Se utilizaron las siguientes columnas:</p>
<ul class="simple">
<li><p>Casos acumulados en Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>Casos activos en Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>Movilidad Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>Notificacion PCR Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>BAC Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>Positividad Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>Cobertura de testeo Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>Oportunidad en notificacion Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>Fallecidos Alto Hospicio</p></li>
</ul>
<ul class="simple">
<li><p>Re Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Paso a Paso (dias) Alto Hospicio</p></li>
</ul>
<h3>Resultado para Camiña</h3><ul class="simple">
<li><p>De acuerdo al algoritmo, y con un <strong>97.823%</strong> de probabilidad, <strong>Camiña</strong> debería estar en <b style="color:orange">Transición</b>.
Actualmente, la comuna registra 59 días en <b style="color:orange">Transición</b>.</p></li>
</ul>
<p>Se utilizaron las siguientes columnas:</p>
<ul class="simple">
<li><p>Casos acumulados en Camiña</p></li>
</ul>
<ul class="simple">
<li><p>Casos activos en Camiña</p></li>
</ul>
<ul class="simple">
<li><p>Notificacion PCR Camiña</p></li>
</ul>
<ul class="simple">
<li><p>BAC Camiña</p></li>
</ul>
<ul class="simple">
<li><p>Positividad Camiña</p></li>
</ul>
<ul class="simple">
<li><p>Cobertura de testeo Camiña</p></li>
</ul>
<ul class="simple">
<li><p>Oportunidad en notificacion Camiña</p></li>
</ul>
<ul class="simple">
<li><p>Fallecidos Camiña</p></li>
</ul>
<ul class="simple">
<li><p>Re Tamarugal</p></li>
</ul>
<ul class="simple">
<li><p>Paso a Paso (dias) Camiña</p></li>
</ul>
<h3>Resultado para Colchane</h3><ul class="simple">
<li><p>De acuerdo al algoritmo, y con un <strong>97.526%</strong> de probabilidad, <strong>Colchane</strong> debería estar en <b style="color:dodgerblue">Apertura Inicial</b>.
Actualmente, la comuna registra 43 días en <b style="color:dodgerblue">Apertura Inicial</b>.</p></li>
</ul>
<p>Se utilizaron las siguientes columnas:</p>
<ul class="simple">
<li><p>Casos acumulados en Colchane</p></li>
</ul>
<ul class="simple">
<li><p>Casos activos en Colchane</p></li>
</ul>
<ul class="simple">
<li><p>Notificacion PCR Colchane</p></li>
</ul>
<ul class="simple">
<li><p>BAC Colchane</p></li>
</ul>
<ul class="simple">
<li><p>Positividad Colchane</p></li>
</ul>
<ul class="simple">
<li><p>Cobertura de testeo Colchane</p></li>
</ul>
<ul class="simple">
<li><p>Oportunidad en notificacion Colchane</p></li>
</ul>
<ul class="simple">
<li><p>Fallecidos Colchane</p></li>
</ul>
<ul class="simple">
<li><p>Re Tamarugal</p></li>
</ul>
<ul class="simple">
<li><p>Paso a Paso (dias) Colchane</p></li>
</ul>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.7.10/x64/lib/python3.7/site-packages/sklearn/metrics/_classification.py:1245: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/opt/hostedtoolcache/Python/3.7.10/x64/lib/python3.7/site-packages/sklearn/metrics/_classification.py:1245: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/opt/hostedtoolcache/Python/3.7.10/x64/lib/python3.7/site-packages/sklearn/metrics/_classification.py:1245: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
</pre></div>
</div>
<h3>Resultado para Huara</h3><ul class="simple">
<li><p>De acuerdo al algoritmo, y con un <strong>99.452%</strong> de probabilidad, <strong>Huara</strong> debería estar en <b style="color:gold">Preparación</b>.
Actualmente, la comuna registra 54 días en <b style="color:gold">Preparación</b>.</p></li>
</ul>
<p>Se utilizaron las siguientes columnas:</p>
<ul class="simple">
<li><p>Casos acumulados en Huara</p></li>
</ul>
<ul class="simple">
<li><p>Casos activos en Huara</p></li>
</ul>
<ul class="simple">
<li><p>Movilidad Huara</p></li>
</ul>
<ul class="simple">
<li><p>Notificacion PCR Huara</p></li>
</ul>
<ul class="simple">
<li><p>BAC Huara</p></li>
</ul>
<ul class="simple">
<li><p>Positividad Huara</p></li>
</ul>
<ul class="simple">
<li><p>Cobertura de testeo Huara</p></li>
</ul>
<ul class="simple">
<li><p>Oportunidad en notificacion Huara</p></li>
</ul>
<ul class="simple">
<li><p>Fallecidos Huara</p></li>
</ul>
<ul class="simple">
<li><p>Re Tamarugal</p></li>
</ul>
<ul class="simple">
<li><p>Paso a Paso (dias) Huara</p></li>
</ul>
<h3>Resultado para Iquique</h3><ul class="simple">
<li><p>De acuerdo al algoritmo, y con un <strong>98.086%</strong> de probabilidad, <strong>Iquique</strong> debería estar en <b style="color:orange">Transición</b>.
Actualmente, la comuna registra 43 días en <b style="color:orange">Transición</b>.</p></li>
</ul>
<p>Se utilizaron las siguientes columnas:</p>
<ul class="simple">
<li><p>Casos acumulados en Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Casos activos en Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Movilidad Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Notificacion PCR Iquique</p></li>
</ul>
<ul class="simple">
<li><p>BAC Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Positividad Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Cobertura de testeo Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Oportunidad en notificacion Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Fallecidos Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Re Iquique</p></li>
</ul>
<ul class="simple">
<li><p>Paso a Paso (dias) Iquique</p></li>
</ul>
<h3>Resultado para Pica</h3><ul class="simple">
<li><p>De acuerdo al algoritmo, y con un <strong>98.564%</strong> de probabilidad, <strong>Pica</strong> debería estar en <b style="color:orange">Transición</b>.
Actualmente, la comuna registra 85 días en <b style="color:orange">Transición</b>.</p></li>
</ul>
<p>Se utilizaron las siguientes columnas:</p>
<ul class="simple">
<li><p>Casos acumulados en Pica</p></li>
</ul>
<ul class="simple">
<li><p>Casos activos en Pica</p></li>
</ul>
<ul class="simple">
<li><p>Movilidad Pica</p></li>
</ul>
<ul class="simple">
<li><p>Notificacion PCR Pica</p></li>
</ul>
<ul class="simple">
<li><p>BAC Pica</p></li>
</ul>
<ul class="simple">
<li><p>Positividad Pica</p></li>
</ul>
<ul class="simple">
<li><p>Cobertura de testeo Pica</p></li>
</ul>
<ul class="simple">
<li><p>Oportunidad en notificacion Pica</p></li>
</ul>
<ul class="simple">
<li><p>Fallecidos Pica</p></li>
</ul>
<ul class="simple">
<li><p>Re Tamarugal</p></li>
</ul>
<ul class="simple">
<li><p>Paso a Paso (dias) Pica</p></li>
</ul>
<h3>Resultado para Pozo Almonte</h3><ul class="simple">
<li><p>De acuerdo al algoritmo, y con un <strong>98.9%</strong> de probabilidad, <strong>Pozo Almonte</strong> debería estar en <b style="color:gold">Preparación</b>.
Actualmente, la comuna registra 40 días en <b style="color:gold">Preparación</b>.</p></li>
</ul>
<p>Se utilizaron las siguientes columnas:</p>
<ul class="simple">
<li><p>Casos acumulados en Pozo Almonte</p></li>
</ul>
<ul class="simple">
<li><p>Casos activos en Pozo Almonte</p></li>
</ul>
<ul class="simple">
<li><p>Notificacion PCR Pozo Almonte</p></li>
</ul>
<ul class="simple">
<li><p>BAC Pozo Almonte</p></li>
</ul>
<ul class="simple">
<li><p>Positividad Pozo Almonte</p></li>
</ul>
<ul class="simple">
<li><p>Cobertura de testeo Pozo Almonte</p></li>
</ul>
<ul class="simple">
<li><p>Oportunidad en notificacion Pozo Almonte</p></li>
</ul>
<ul class="simple">
<li><p>Fallecidos Pozo Almonte</p></li>
</ul>
<ul class="simple">
<li><p>Re Tamarugal</p></li>
</ul>
<ul class="simple">
<li><p>Paso a Paso (dias) Pozo Almonte</p></li>
</ul>
<h3>Consideraciones</h3><blockquote>
<div><p>Los datos históricos contemplan desde el <strong>28 de julio de 2020</strong> hasta el <strong>29 de junio de 2021</strong>.</p>
</div></blockquote>
<blockquote>
<div><p>El resultado del algoritmo <strong>no implica un cambio de fase</strong>. La evolución del Paso a Paso
es monitoreada por las autoridades del Ministerio de Salud</p>
</div></blockquote>
</div>
</div>
</div>
</div>
<div class="section" id="validacion">
<h2>Validación<a class="headerlink" href="#validacion" title="Permalink to this headline">¶</a></h2>
<p>Probaremos cada modelo, a partir de matrices de confusión, las que retratan el error de los algoritmos.</p>
<p>Los valores que se utilizarán no los ha “<strong>visto</strong>” el modelo, por lo que utilizará el <strong>aprendizaje adquirido</strong> a partir del entrenamiento para obtener la <strong>predicción</strong> a partir de estos datos “no conocidos”.</p>
<p>¿Cómo funcionará ante esta prueba? Por eso, estamos <strong>validando</strong> su entrenamiento.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Un poco de Markdown</span>

<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>

<span class="s1">&lt;h2&gt;Prueba de algoritmos&lt;/h3&gt;</span>

<span class="s1">&gt; Se utilizará, aproximadamente, un **</span><span class="si">{}% d</span><span class="s1">e los datos para prueba**, y el restante se utilizó para entrenamiento.</span>

<span class="s1">&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">y_test</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">y_train</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)))))</span>
<span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">comuna</span> <span class="ow">in</span> <span class="n">comunas</span><span class="p">:</span>
    
    <span class="c1">### Título</span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Resultado para </span><span class="si">{}</span><span class="s1">&lt;/h3&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">)))</span>
    
    <span class="c1">### Precisión</span>
    
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;display(Markdown(</span>
<span class="s1">    &quot;El algoritmo entrenado para la comuna de </span><span class="si">{}</span><span class="s1"> tiene una precisión del **&quot; +</span>
<span class="s1">    str(clf_</span><span class="si">{}</span><span class="s1">.score(X_test_</span><span class="si">{}</span><span class="s1">, y_test_</span><span class="si">{}</span><span class="s1">) * 100) + &quot;%**.&quot;))&#39;&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">,</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">]))</span>
    
    <span class="c1">### Generamos la matriz de confusión y reporte de precisión, recall, etc.</span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Reporte de clasificador&lt;/h3&gt;&#39;</span><span class="p">))</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="n">report</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Matriz de confusión&lt;/h3&gt;&#39;</span><span class="p">))</span>
    
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;cm = confusion_matrix(y_train_</span><span class="si">{}</span><span class="s1">, clf_</span><span class="si">{}</span><span class="s1">.predict(X_train_</span><span class="si">{}</span><span class="s1">))&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">]))</span>
    <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;plot_confusion_matrix(clf_</span><span class="si">{}</span><span class="s1">, X_test_</span><span class="si">{}</span><span class="s1">, y_test_</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">comuna</span><span class="p">[:</span><span class="mi">3</span><span class="p">]))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Verdadero&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Predicho&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Matriz de confusión para </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comuna</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<h2>Prueba de algoritmos</h3>
<blockquote>
<div><p>Se utilizará, aproximadamente, un <strong>20% de los datos para prueba</strong>, y el restante se utilizó para entrenamiento.</p>
</div></blockquote>
<h3>Resultado para Alto Hospicio</h3><p>El algoritmo entrenado para la comuna de Alto Hospicio tiene una precisión del <strong>100.0%</strong>.</p>
<h3>Reporte de clasificador</h3><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>              precision    recall  f1-score   support

  Cuarentena       1.00      1.00      1.00        12
  Transición       1.00      1.00      1.00        44

    accuracy                           1.00        56
   macro avg       1.00      1.00      1.00        56
weighted avg       1.00      1.00      1.00        56
</pre></div>
</div>
<h3>Matriz de confusión</h3><img alt="../../_images/2_thisistheway_52_6.png" src="../../_images/2_thisistheway_52_6.png" />
<h3>Resultado para Camiña</h3><p>El algoritmo entrenado para la comuna de Camiña tiene una precisión del <strong>100.0%</strong>.</p>
<h3>Reporte de clasificador</h3><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>              precision    recall  f1-score   support

  Transición       1.00      1.00      1.00        56

    accuracy                           1.00        56
   macro avg       1.00      1.00      1.00        56
weighted avg       1.00      1.00      1.00        56
</pre></div>
</div>
<h3>Matriz de confusión</h3><img alt="../../_images/2_thisistheway_52_12.png" src="../../_images/2_thisistheway_52_12.png" />
<h3>Resultado para Colchane</h3><p>El algoritmo entrenado para la comuna de Colchane tiene una precisión del <strong>100.0%</strong>.</p>
<h3>Reporte de clasificador</h3><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                  precision    recall  f1-score   support

Apertura Inicial       1.00      1.00      1.00        44
     Preparación       1.00      1.00      1.00        12

        accuracy                           1.00        56
       macro avg       1.00      1.00      1.00        56
    weighted avg       1.00      1.00      1.00        56
</pre></div>
</div>
<h3>Matriz de confusión</h3><img alt="../../_images/2_thisistheway_52_18.png" src="../../_images/2_thisistheway_52_18.png" />
<h3>Resultado para Huara</h3><p>El algoritmo entrenado para la comuna de Huara tiene una precisión del <strong>98.21428571428571%</strong>.</p>
<h3>Reporte de clasificador</h3><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>              precision    recall  f1-score   support

 Preparación       0.98      1.00      0.99        55
  Transición       0.00      0.00      0.00         1

    accuracy                           0.98        56
   macro avg       0.49      0.50      0.50        56
weighted avg       0.96      0.98      0.97        56
</pre></div>
</div>
<h3>Matriz de confusión</h3><img alt="../../_images/2_thisistheway_52_24.png" src="../../_images/2_thisistheway_52_24.png" />
<h3>Resultado para Iquique</h3><p>El algoritmo entrenado para la comuna de Iquique tiene una precisión del <strong>100.0%</strong>.</p>
<h3>Reporte de clasificador</h3><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>              precision    recall  f1-score   support

  Cuarentena       1.00      1.00      1.00        12
  Transición       1.00      1.00      1.00        44

    accuracy                           1.00        56
   macro avg       1.00      1.00      1.00        56
weighted avg       1.00      1.00      1.00        56
</pre></div>
</div>
<h3>Matriz de confusión</h3><img alt="../../_images/2_thisistheway_52_30.png" src="../../_images/2_thisistheway_52_30.png" />
<h3>Resultado para Pica</h3><p>El algoritmo entrenado para la comuna de Pica tiene una precisión del <strong>100.0%</strong>.</p>
<h3>Reporte de clasificador</h3><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>              precision    recall  f1-score   support

  Transición       1.00      1.00      1.00        56

    accuracy                           1.00        56
   macro avg       1.00      1.00      1.00        56
weighted avg       1.00      1.00      1.00        56
</pre></div>
</div>
<h3>Matriz de confusión</h3><img alt="../../_images/2_thisistheway_52_36.png" src="../../_images/2_thisistheway_52_36.png" />
<h3>Resultado para Pozo Almonte</h3><p>El algoritmo entrenado para la comuna de Pozo Almonte tiene una precisión del <strong>92.85714285714286%</strong>.</p>
<h3>Reporte de clasificador</h3><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>              precision    recall  f1-score   support

  Cuarentena       1.00      0.62      0.77         8
 Preparación       1.00      0.98      0.99        41
  Transición       0.64      1.00      0.78         7

    accuracy                           0.93        56
   macro avg       0.88      0.87      0.84        56
weighted avg       0.95      0.93      0.93        56
</pre></div>
</div>
<h3>Matriz de confusión</h3><img alt="../../_images/2_thisistheway_52_42.png" src="../../_images/2_thisistheway_52_42.png" />
</div>
</div>
<div class="section" id="ruido">
<h3>Ruido<a class="headerlink" href="#ruido" title="Permalink to this headline">¶</a></h3>
<p>Algo hace ruido, y es la suposición de que, en el caso de los valores de entrada, <strong>se está suponiendo se mantienen invariables desde el último dato disponible</strong>. ¿Por qué sucede ésto? Pues, los datos que estamos trabajando son actualizados según la publicación del informe epidemiológico, que si bien tiene actualización periódica, no es una actualización diaria como con las cifras regionales.</p>
<p>Es una falencia que siempre ha existido: <strong>No existen datos segregados por comuna que sean actualizados de forma diaria</strong>.</p>
<p>¿Podríamos arreglarlo? ¡Por supuesto! Algunas ideas:</p>
<ul class="simple">
<li><p>Utilizar proporciones estimadas por comuna, de acuerdo a los casos totales (o incluso, calcular una media móvil de proporción por comunas, de acuerdo a casos nuevos), y de allí estimar los casos nuevos a partir de esas proporciones.</p></li>
<li><p>Podría ser posible realizar una minería de datos en el Twitter del Gore de Tarapacá o del Seremi de Salud, y de esa forma, obtener los casos segregados por comuna. <i>Lamentablemente, aún no tomo un curso de minería de datos</i>.</p></li>
<li><p>Incluso, podría ser posible desarrollar un algoritmo que pueda predecir la cantidad de casos nuevos, segregados por comuna.</p></li>
</ul>
</div>
<div class="section" id="otras-cosas-por-mejorar">
<h3>Otras cosas por mejorar<a class="headerlink" href="#otras-cosas-por-mejorar" title="Permalink to this headline">¶</a></h3>
<p>Cualquier aporte o recomendación, por favor, hacerla llegar.</p>
</div>
</div>
<div class="section" id="automatizando-salida-para-asistenciacovid19">
<h2>Automatizando salida para asistenciacovid19<a class="headerlink" href="#automatizando-salida-para-asistenciacovid19" title="Permalink to this headline">¶</a></h2>
<p>Una sección adelantada. ¡Habrá mayor detalle en el siguiente notebook!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Gracias a BenVida (stackoverflow.com/a/64495269/13746427) ###</span>
<span class="n">Javascript</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;{</span>
<span class="s1">    let outputs=[...document.querySelectorAll(&quot;.cell&quot;)].map(</span>
<span class="s1">        cell=&gt; {</span>
<span class="s1">            let output=cell.querySelector(&quot;.output&quot;)</span>
<span class="s1">            if(output) return output.innerHTML</span>
<span class="s1">            output=cell.querySelector(&quot;.rendered_html&quot;)</span>
<span class="s1">            if(output) return output.innerHTML</span>
<span class="s1">            return &quot;&quot;</span>
<span class="s1">        }</span>
<span class="s1">    )</span>
<span class="s1">    </span>
<span class="s1">    IPython.notebook.kernel.execute(&quot;cell_outputs=&quot;+JSON.stringify(outputs)) </span>
<span class="s1">    IPython.notebook.kernel.execute(&quot;soup = BeautifulSoup(cell_outputs[48])&quot;)</span>
<span class="s1">    IPython.notebook.kernel.execute(&quot;removals = soup.find_all(attrs={&#39;class&#39;: &#39;prompt&#39;})&quot;)</span>
<span class="s1">    IPython.notebook.kernel.execute(&quot;for removal in removals: removal.decompose()&quot;)</span>
<span class="s1">    IPython.notebook.kernel.execute(&quot;soup = str(soup)&quot;)   </span>
<span class="s1">    IPython.notebook.kernel.execute(&quot;html = open(&#39;../../out/site/indicador.html&#39;,&#39;w&#39;)&quot;)</span>
<span class="s1">    IPython.notebook.kernel.execute(&quot;html.write(</span><span class="se">\</span>
<span class="s1">    &#39;&lt;html&gt;&lt;head&gt;&lt;link rel=</span><span class="si">{}</span><span class="s1"> href=</span><span class="si">{}</span><span class="s1">&gt;&lt;link rel=</span><span class="si">{}</span><span class="s1"> href=</span><span class="si">{}</span><span class="s1">&gt;&lt;link rel=</span><span class="si">{}</span><span class="s1"> href=</span><span class="si">{}</span><span class="s1">&gt;&lt;script src=</span><span class="si">{}</span><span class="s1">&gt;&lt;/script&gt;&lt;script src=</span><span class="si">{}</span><span class="s1">&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&#39;</span><span class="se">\</span>
<span class="s1">    .format(&#39;stylesheet&#39;, &#39;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css&#39;, </span><span class="se">\</span>
<span class="s1">    &#39;stylesheet&#39;, &#39;./style.min.css&#39;, </span><span class="se">\</span>
<span class="s1">    &#39;stylesheet&#39;, &#39;./ipython.min.css&#39;, </span><span class="se">\</span>
<span class="s1">    &#39;https://cdn.plot.ly/plotly-latest.min.js&#39;, &#39;https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.js&#39;)</span><span class="se">\</span>
<span class="s1">    + soup +&#39;&lt;/body&gt;&lt;/html&gt;&#39;)&quot;)</span>
<span class="s1">    IPython.notebook.kernel.execute(&quot;html.close()&quot;)</span>
<span class="s1">}&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">{
    let outputs=[...document.querySelectorAll(".cell")].map(
        cell=> {
            let output=cell.querySelector(".output")
            if(output) return output.innerHTML
            output=cell.querySelector(".rendered_html")
            if(output) return output.innerHTML
            return ""
        }
    )
    
    IPython.notebook.kernel.execute("cell_outputs="+JSON.stringify(outputs)) 
    IPython.notebook.kernel.execute("soup = BeautifulSoup(cell_outputs[48])")
    IPython.notebook.kernel.execute("removals = soup.find_all(attrs={'class': 'prompt'})")
    IPython.notebook.kernel.execute("for removal in removals: removal.decompose()")
    IPython.notebook.kernel.execute("soup = str(soup)")   
    IPython.notebook.kernel.execute("html = open('../../out/site/indicador.html','w')")
    IPython.notebook.kernel.execute("html.write(    '<html><head><link rel={} href={}><link rel={} href={}><link rel={} href={}><script src={}></script><script src={}></script></head><body>'    .format('stylesheet', 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css',     'stylesheet', './style.min.css',     'stylesheet', './ipython.min.css',     'https://cdn.plot.ly/plotly-latest.min.js', 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.js')    + soup +'</body></html>')")
    IPython.notebook.kernel.execute("html.close()")
}</script></div>
</div>
</div>
<div class="section" id="informacion-de-sesion">
<h2>Información de sesión<a class="headerlink" href="#informacion-de-sesion" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">session_info</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">cpu</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">jupyter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">std_lib</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">write_req_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">req_file_name</span><span class="o">=</span><span class="s1">&#39;2_requeriments.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">            <details>
            <summary>Click to view session information</summary>
            <pre>
            -----
            bs4                 4.9.3
            datetime            NA
            json                2.0.9
            locale              NA
            math                NA
            matplotlib          3.3.4
            numpy               1.19.5
            os                  NA
            pandas              1.2.3
            scipy               1.6.2
            seaborn             0.11.1
            session_info        1.0.0
            sklearn             0.24.1
            time                NA
            -----
            </pre>
            <details>
            <summary>Click to view modules imported as dependencies</summary>
            <pre>
            PIL                 8.2.0
            abc                 NA
            argparse            1.1
            array               NA
            ast                 NA
            asyncio             NA
            atexit              NA
            backcall            0.2.0
            base64              NA
            bdb                 NA
            binascii            NA
            bisect              NA
            bz2                 NA
            cProfile            NA
            calendar            NA
            cffi                1.14.5
            chardet             4.0.0
            cmath               NA
            cmd                 NA
            code                NA
            codecs              NA
            codeop              NA
            collections         NA
            colorama            0.4.4
            colorsys            NA
            concurrent          NA
            contextlib          NA
            contextvars         NA
            copy                NA
            copyreg             NA
            csv                 1.0
            ctypes              1.1.0
            curses              NA
            cycler              0.10.0
            cython_runtime      NA
            dataclasses         NA
            dateutil            2.8.1
            decimal             1.70
            decorator           5.0.9
            difflib             NA
            dis                 NA
            distutils           3.7.10
            email               NA
            encodings           NA
            enum                NA
            errno               NA
            faulthandler        NA
            fcntl               NA
            filecmp             NA
            fnmatch             NA
            fractions           NA
            functools           NA
            gc                  NA
            genericpath         NA
            getopt              NA
            getpass             NA
            gettext             NA
            glob                NA
            grp                 NA
            gzip                NA
            hashlib             NA
            heapq               NA
            hmac                NA
            html                NA
            http                NA
            imp                 NA
            importlib           NA
            inspect             NA
            io                  NA
            ipykernel           5.5.5
            ipython_genutils    0.2.0
            ipywidgets          7.6.3
            itertools           NA
            jedi                0.18.0
            joblib              1.0.1
            keyword             NA
            kiwisolver          1.3.1
            linecache           NA
            logging             0.5.1.2
            lzma                NA
            marshal             4
            mimetypes           NA
            mmap                NA
            mpl_toolkits        NA
            multiprocessing     NA
            ntpath              NA
            numbers             NA
            opcode              NA
            operator            NA
            parso               0.8.2
            pathlib             NA
            pdb                 NA
            pexpect             4.8.0
            pickle              NA
            pickleshare         0.7.5
            pkg_resources       NA
            pkgutil             NA
            platform            1.0.8
            plistlib            NA
            posix               NA
            posixpath           NA
            pprint              NA
            profile             NA
            prompt_toolkit      3.0.19
            pstats              NA
            pty                 NA
            ptyprocess          0.7.0
            pwd                 NA
            pydoc               NA
            pydoc_data          NA
            pyexpat             NA
            pygments            2.9.0
            pyparsing           2.4.7
            pytz                2021.1
            queue               NA
            quopri              NA
            random              NA
            re                  2.2.1
            reprlib             NA
            resource            NA
            runpy               NA
            secrets             NA
            select              NA
            selectors           NA
            shlex               NA
            shutil              NA
            signal              NA
            site                NA
            six                 1.16.0
            socket              NA
            soupsieve           2.2.1
            sphinxcontrib       NA
            sqlite3             2.6.0
            sre_compile         NA
            sre_constants       NA
            sre_parse           NA
            ssl                 NA
            stat                NA
            storemagic          NA
            string              NA
            struct              NA
            subprocess          NA
            sys                 3.7.10 (default, Feb 16 2021, 12:01:19) 
[GCC 9.3.0]
            sysconfig           NA
            tarfile             0.9.0
            tempfile            NA
            termios             NA
            textwrap            NA
            threading           NA
            timeit              NA
            token               NA
            tokenize            NA
            tornado             6.1
            traceback           NA
            traitlets           5.0.5
            tty                 NA
            types               NA
            typing              NA
            typing_extensions   NA
            unicodedata         NA
            unittest            NA
            urllib              NA
            uu                  NA
            uuid                NA
            warnings            NA
            wcwidth             0.2.5
            weakref             NA
            xml                 NA
            zipfile             NA
            zipimport           NA
            zlib                1.0
            zmq                 22.1.0
            </pre>
            </details> <!-- seems like this ends pre, so might as well be explicit -->
            <pre>
            -----
            IPython             7.25.0
            jupyter_client      6.1.12
            jupyter_core        4.7.1
            notebook            6.4.0
            -----
            Python 3.7.10 (default, Feb 16 2021, 12:01:19) [GCC 9.3.0]
            Linux-5.8.0-1033-azure-x86_64-with-debian-bullseye-sid
            2 logical CPU cores, x86_64
            -----
            Session information updated at 2021-06-29 22:47
            </pre>
            </details></div></div>
</div>
</div>
<div class="section" id="bibliografia-de-esta-pagina">
<h2>Bibliografía de esta página<a class="headerlink" href="#bibliografia-de-esta-pagina" title="Permalink to this headline">¶</a></h2>
<p><dl class="footnote brackets">
<dt class="label" id="sergio-montoro"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Sergio Montoro. Repaso didáctico sobre machine learning. 2015. URL: <a class="reference external" href="https://lapastillaroja.net/2015/02/ml-algols/">https://lapastillaroja.net/2015/02/ml-algols/</a>.</p>
</dd>
<dt class="label" id="learning-to-segment-facebook"><span class="brackets"><a class="fn-backref" href="#id4">2</a></span></dt>
<dd><p>Piotr Dollár. Learning to Segment. 2016. URL: <a class="reference external" href="https://research.fb.com/blog/2016/08/learning-to-segment/">https://research.fb.com/blog/2016/08/learning-to-segment/</a>.</p>
</dd>
<dt class="label" id="estrategiagradual-pasopaso"><span class="brackets">3</span><span class="fn-backref">(<a href="#id11">1</a>,<a href="#id61">2</a>,<a href="#id62">3</a>)</span></dt>
<dd><p>Ministerio de Salud de Chile. Estrategia Gradual “Paso a Paso nos cuidamos”. 2021. URL: <a class="reference external" href="https://s3.amazonaws.com/gobcl-prod/public_files/Campa%C3%B1as/Corona-Virus/documentos/paso-a-paso/210429_Plan_Paso_a_Paso.pdf">https://s3.amazonaws.com/gobcl-prod/public_files/Campa%C3%B1as/Corona-Virus/documentos/paso-a-paso/210429_Plan_Paso_a_Paso.pdf</a>.</p>
</dd>
<dt class="label" id="economipedia-inferenciaestadistica"><span class="brackets"><a class="fn-backref" href="#id15">4</a></span></dt>
<dd><p>José Francisco López. Choosing the right estimator. URL: <a class="reference external" href="https://economipedia.com/definiciones/inferencia-estadistica.html">https://economipedia.com/definiciones/inferencia-estadistica.html</a>.</p>
</dd>
<dt class="label" id="blogminitab-pruebaestadistica"><span class="brackets"><a class="fn-backref" href="#id17">5</a></span></dt>
<dd><p>Minitab Blog Editor. ¿Cómo Elegir entre una Prueba no Paramétrica y una Prueba Paramétrica? 2019. URL: <a class="reference external" href="https://blog.minitab.com/es/como-elegir-entre-una-prueba-no-parametrica-y-una-prueba-parametrica">https://blog.minitab.com/es/como-elegir-entre-una-prueba-no-parametrica-y-una-prueba-parametrica</a>.</p>
</dd>
<dt class="label" id="kernel-vaerenbergh"><span class="brackets"><a class="fn-backref" href="#id19">6</a></span></dt>
<dd><p>I. Santamaría S. Van Vaerenbergh. Métodos kernel para clasificación. 2018. URL: <a class="reference external" href="https://gtas.unican.es/files/docencia/APS/apuntes/07_svm_kernel.pdf">https://gtas.unican.es/files/docencia/APS/apuntes/07_svm_kernel.pdf</a>.</p>
</dd>
<dt class="label" id="dotcsv"><span class="brackets"><a class="fn-backref" href="#id26">7</a></span></dt>
<dd><p>Carlos Santana Vega. Las Redes Neuronales… ¿Aprenden o Memorizan? - Overfitting y Underfitting - Parte 1. 2019. URL: <a class="reference external" href="https://www.youtube.com/watch?v=7-6X3DTt3R8">https://www.youtube.com/watch?v=7-6X3DTt3R8</a>.</p>
</dd>
<dt class="label" id="mlandrewng"><span class="brackets"><a class="fn-backref" href="#id30">8</a></span></dt>
<dd><p>Andrew NG. Machine Learning. 2011. URL: <a class="reference external" href="https://www.coursera.org/learn/machine-learning">https://www.coursera.org/learn/machine-learning</a>.</p>
</dd>
<dt class="label" id="kernel-amat"><span class="brackets">9</span><span class="fn-backref">(<a href="#id32">1</a>,<a href="#id35">2</a>,<a href="#id37">3</a>,<a href="#id38">4</a>,<a href="#id39">5</a>)</span></dt>
<dd><p>Joaquín Amat Rodrigo. Ajuste de distribuciones con kernel density estimation y Python. 2021. URL: <a class="reference external" href="https://www.cienciadedatos.net/documentos/pystats02-kernel-density-estimation-kde-python.html">https://www.cienciadedatos.net/documentos/pystats02-kernel-density-estimation-kde-python.html</a>.</p>
</dd>
<dt class="label" id="dennis-wittich"><span class="brackets"><a class="fn-backref" href="#id48">10</a></span></dt>
<dd><p>Dennis Wittich. Jupyter magic to handle notebook exceptions. 2019. URL: <a class="reference external" href="https://icaml.org/canon/algo/bayesian-classification/KDE_KNN/KNN.html">https://icaml.org/canon/algo/bayesian-classification/KDE_KNN/KNN.html</a>.</p>
</dd>
<dt class="label" id="maquinas-soporte-jose"><span class="brackets">11</span><span class="fn-backref">(<a href="#id53">1</a>,<a href="#id55">2</a>,<a href="#id57">3</a>)</span></dt>
<dd><p>Jose Martinez Heras. Máquinas de Vectores de Soporte (SVM). 2019. URL: <a class="reference external" href="https://www.iartificial.net/maquinas-de-vectores-de-soporte-svm/">https://www.iartificial.net/maquinas-de-vectores-de-soporte-svm/</a>.</p>
</dd>
<dt class="label" id="machine-learning-mastery"><span class="brackets">12</span><span class="fn-backref">(<a href="#id59">1</a>,<a href="#id60">2</a>)</span></dt>
<dd><p>Jason Brownlee. How to Choose a Feature Selection Method For Machine Learning. 2019. URL: <a class="reference external" href="https://machinelearningmastery.com/feature-selection-with-real-and-categorical-data/">https://machinelearningmastery.com/feature-selection-with-real-and-categorical-data/</a>.</p>
</dd>
<dt class="label" id="axum-labs"><span class="brackets"><a class="fn-backref" href="#id65">13</a></span></dt>
<dd><p>Patricia Bassey. Logistic Regression Vs Support Vector Machines (SVM). 2019. URL: <a class="reference external" href="https://medium.com/axum-labs/logistic-regression-vs-support-vector-machines-svm-c335610a3d16">https://medium.com/axum-labs/logistic-regression-vs-support-vector-machines-svm-c335610a3d16</a>.</p>
</dd>
</dl>
</p>
<hr class="footnotes docutils" />
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./page/2_programacion"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="1_thisistheway.html" title="previous page">Génesis</a>
    <a class='right-next' id="next-link" href="3_thisistheway.html" title="next page">Salida</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Alejandro Dinamarca Cáceres<br/>
        
            &copy; Copyright 2021. Numeral.lab.<br/>
          <div class="extra_footer">
            Por Alejandro Dinamarca, <a href="https://www.linkedin.com/in/alejandrodinamarca/">Linkedin</a>
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-169901790-2', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </body>
</html>